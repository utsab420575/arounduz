# Image Manipulation
composer require intervention/image

# Payment Gateways
composer require stripe/stripe-php
composer require srmklive/paypal

# PDF Generation
composer require barryvdh/laravel-dompdf

# Excel Import/Export
composer require maatwebsite/excel

# Sluggable URLs
composer require cviebrock/eloquent-sluggable

# Activity Logging
composer require spatie/laravel-activitylog

# Permission Management
composer require spatie/laravel-permission

# Media Library (for file uploads)
composer require spatie/laravel-medialibrary

# Backup
composer require spatie/laravel-backup

# SEO Meta Tags
composer require artesaos/seotools

# Sitemap Generator
composer require spatie/laravel-sitemap

# Social Login (OAuth)
composer require laravel/socialite

# API Resources & Pagination
composer require spatie/laravel-query-builder

# UUID Generation (Optional)
composer require ramsey/uuid

# Geocoding (Optional for location features)
composer require stevebauman/location
composer require jenssegers/agent



# QR Code Generation (for certificates)
composer require simplesoftwareio/simple-qrcode

# Charts & Analytics (Optional)
composer require asantibanez/livewire-charts

# Currency Conversion API (Optional)
composer require florianv/laravel-swap

# SMS Notifications (Optional)
composer require twilio/sdk

# Translation (Optional)
composer require outhebox/laravel-translations --with-all-dependencies

# Database Optimization
composer require laravel/telescope

# API Documentation (Optional)
composer require darkaonline/l5-swagger

# Markdown Parser (Optional for blog)
composer require graham-campbell/markdown

# Captcha (Optional)
composer require anhskohbo/no-captcha

# Two-Factor Authentication (Optional)
composer require pragmarx/google2fa-laravel


# Core
npm install

# Additional UI Libraries
npm install alpinejs
npm install aos  # Animate on scroll
npm install swiper  # Slider/carousel
npm install flatpickr  # Date picker
npm install choices.js  # Select dropdown enhancement
npm install tippy.js  # Tooltips
npm install chart.js  # Charts

# Image Upload/Crop
npm install filepond
npm install filepond-plugin-image-preview
npm install cropperjs

# Lightbox for gallery
npm install photoswipe

# Form Validation
npm install validator

# Rich Text Editor (choose one)
npm install tinymce
# OR
npm install @ckeditor/ckeditor5-build-classic

# Video Player (for courses)
npm install video.js

# PDF Viewer (for documents)
npm install pdfjs-dist

# Calendar (for availability)
npm install @fullcalendar/core
npm install @fullcalendar/daygrid
npm install @fullcalendar/interaction

# Loading Indicators
npm install nprogress




STEP 1: Database Setup & Seeders
===============================
Context: We have a travel platform connecting tourists with local guides and agencies in Uzbekistan.

Requirements:
- Create comprehensive seeders for all reference tables
- Ensure data consistency and relationships
- Include realistic test data for development

Prompt:
"I'm building a travel platform called AroundUz for Uzbekistan tourism. Create detailed seeders:

1. CurrencySeeder:
   - USD (symbol: $, rate: 1.0)
   - EUR (symbol: â‚¬, rate: 0.92)
   - UZS (symbol: so'm, rate: 12500)
   - GBP, JPY, CNY

2. CountrySeeder:
   - Uzbekistan (code: UZ, flag image)
   - USA, UK, China, Russia, Turkey, Germany, France, Japan, South Korea
   - Include country flags

3. RegionSeeder (Uzbekistan regions):
   - Tashkent, Samarkand, Bukhara, Khorezm, Fergana Valley, Kashkadarya, Surkhandarya
   - Link to Uzbekistan country

4. CitySeeder (major tourist cities):
   - Tashkent (region: Tashkent)
   - Samarkand (region: Samarkand)
   - Bukhara (region: Bukhara)
   - Khiva (region: Khorezm)
   - Shakhrisabz, Termez, Kokand, Margilan, Nukus
   - Link each to correct region and country

5. LanguageSeeder:
   - English (en), Russian (ru), Uzbek (uz), Turkish (tr)
   - German (de), French (fr), Spanish (es), Arabic (ar)
   - Chinese (zh), Japanese (ja), Korean (ko)

6. SpecializationSeeder:
   - Historical Tours (icon: landmark, slug: historical-tours)
   - Photography Tours (icon: camera)
   - Food & Culinary Tours (icon: utensils)
   - Adventure & Trekking (icon: hiking)
   - Cultural & Traditional (icon: theater-masks)
   - Religious & Spiritual (icon: mosque)
   - Nature & Wildlife (icon: tree)
   - Shopping & Markets (icon: shopping-bag)
   - Family-Friendly (icon: users)
   - Luxury & VIP (icon: crown)
   - Silk Road Heritage (icon: road)
   - Architecture Tours (icon: building)

7. SocialTypeSeeder:
   - Facebook (icon: facebook-f, base_url: https://facebook.com/)
   - Instagram (icon: instagram, base_url: https://instagram.com/)
   - Twitter (icon: twitter, base_url: https://twitter.com/)
   - LinkedIn (icon: linkedin-in, base_url: https://linkedin.com/in/)
   - Telegram (icon: telegram, base_url: https://t.me/)
   - WhatsApp (icon: whatsapp, base_url: https://wa.me/)
   - YouTube (icon: youtube, base_url: https://youtube.com/)
   - TikTok (icon: tiktok, base_url: https://tiktok.com/@)
   - Website (icon: globe, base_url: https://)

8. AchievementSeeder:
   - First Tour Completed (type: tours_completed, requirement: 1)
   - 10 Tours Milestone (type: tours_completed, requirement: 10)
   - 50 Tours Expert (type: tours_completed, requirement: 50)
   - 100 Tours Master (type: tours_completed, requirement: 100)
   - 5-Star Rating (type: rating_milestone, requirement: 5)
   - First Certification (type: certification_earned, requirement: 1)
   - Training Graduate (type: training_completed, requirement: 1)
   - Verified Guide (type: certification_earned)
   - Customer Favorite (100+ reviews)

9. AdminUserSeeder:
   - Create admin user:
     * Email: admin@arounduz.com
     * Password: admin123 (hashed)
     * Role: admin
     * Name: Admin User
     * Status: active

10. TestDataSeeder (for development):
    - 5 regular users
    - 3 guide users with complete profiles
    - 2 agency users with complete profiles
    - Sample bookings
    - Sample reviews

Also create DatabaseSeeder.php that calls all seeders in correct order.
Include factory files if needed for test data."




STEP 2: Authentication Setup
============================
Context: Multi-role authentication system (user, guide, agency, admin) with email verification and social login.

Requirements:
- Standard Laravel authentication
- Role-based access control
- Email verification required
- Social login (Google, Facebook)
- Profile completion wizard after registration

Prompt:
"Create complete authentication system for AroundUz:

1. Routes (web.php):
   - GET /login - show login form
   - POST /login - process login
   - GET /register - show registration form
   - POST /register - process registration
   - GET /register/complete - profile completion wizard
   - POST /register/complete - save profile details
   - GET /verify-email - email verification notice
   - GET /verify-email/{id}/{hash} - verify email
   - POST /email/verification-notification - resend verification
   - GET /forgot-password - password reset request
   - POST /forgot-password - send reset link
   - GET /reset-password/{token} - password reset form
   - POST /reset-password - process password reset
   - POST /logout - logout
   - GET /auth/google - Google OAuth redirect
   - GET /auth/google/callback - Google OAuth callback
   - GET /auth/facebook - Facebook OAuth redirect
   - GET /auth/facebook/callback - Facebook OAuth callback

2. AuthController with methods:
   - showLoginForm()
   - login(Request $request) - validate credentials, check status, login
   - showRegistrationForm()
   - register(Request $request) - validate, create user, send verification email
   - showCompleteProfile() - wizard for guides/agencies
   - completeProfile(Request $request) - save additional details
   - verifyEmail(Request $request)
   - resendVerificationEmail(Request $request)
   - showForgotPasswordForm()
   - sendResetLinkEmail(Request $request)
   - showResetPasswordForm($token)
   - resetPassword(Request $request)
   - logout(Request $request)

3. SocialAuthController:
   - redirectToGoogle()
   - handleGoogleCallback() - create/login user
   - redirectToFacebook()
   - handleFacebookCallback()

4. Middleware:
   - EnsureEmailIsVerified
   - CheckUserStatus (active/suspended)
   - RoleMiddleware (user, guide, agency, admin)

5. Blade Views:
   - auth/login.blade.php
     * Email and password fields
     * Remember me checkbox
     * Forgot password link
     * Social login buttons
     * Register link

   - auth/register.blade.php
     * Name, email, password, password confirmation
     * Role selection (User/Guide/Agency)
     * Terms acceptance
     * Social signup buttons
     * Login link

   - auth/complete-profile.blade.php
     * Multi-step wizard
     * Step 1: Basic info (phone, country, city)
     * Step 2 (Guide): Experience, languages, specializations
     * Step 2 (Agency): Company name, license, team size
     * Step 3: Upload avatar/logo

   - auth/verify-email.blade.php
     * Verification pending message
     * Resend link

   - auth/forgot-password.blade.php
     * Email input
     * Submit button

   - auth/reset-password.blade.php
     * Email, password, password confirmation
     * Submit button

6. Validation Rules:
   - Registration: required fields, unique email, strong password
   - Login: required email and password
   - Password reset: valid email, matching passwords

7. Email Notifications:
   - VerifyEmail notification
   - ResetPassword notification
   - WelcomeEmail notification (after verification)

8. Events:
   - Registered event (send verification email)
   - Verified event (redirect to profile completion)
   - Login event (log activity)

Use Tailwind CSS styling consistent with the AroundUz theme (skyblue primary color).
Include error handling and success messages using SweetAlert2.
Implement CSRF protection and rate limiting."


STEP 3: User Dashboard & Profile
================================
Context: Regular user dashboard for managing bookings, favorites, subscriptions, and profile.

Requirements:
- Dashboard overview with stats
- Profile management
- Booking history
- Favorites list
- Subscription management
- Notifications

Prompt:
"Create comprehensive user dashboard for AroundUz:

1. Routes (web.php - prefix: /dashboard, middleware: auth, verified):
   - GET /dashboard - dashboard home
   - GET /dashboard/profile - view profile
   - GET /dashboard/profile/edit - edit profile form
   - POST /dashboard/profile/update - update profile
   - POST /dashboard/profile/avatar - upload avatar
   - POST /dashboard/profile/password - change password
   - GET /dashboard/bookings - booking list
   - GET /dashboard/bookings/{id} - booking details
   - POST /dashboard/bookings/{id}/cancel - cancel booking
   - POST /dashboard/bookings/{id}/review - submit review
   - GET /dashboard/favorites - favorites list
   - POST /dashboard/favorites/{type}/{id}/toggle - add/remove favorite
   - GET /dashboard/subscriptions - subscription list
   - GET /dashboard/subscriptions/{id} - subscription details
   - POST /dashboard/subscriptions/{id}/cancel - cancel subscription
   - GET /dashboard/reviews - my reviews
   - GET /dashboard/reviews/{id}/edit - edit review
   - POST /dashboard/reviews/{id}/update - update review
   - DELETE /dashboard/reviews/{id} - delete review
   - GET /dashboard/achievements - achievements list
   - GET /dashboard/notifications - notifications
   - POST /dashboard/notifications/{id}/read - mark as read
   - POST /dashboard/notifications/read-all - mark all as read

2. UserController methods:
   - dashboard() - show stats: total bookings, active subscriptions, favorite count, recent bookings
   - profile() - show user profile
   - editProfile() - edit form
   - updateProfile(Request $request) - validate and update
   - uploadAvatar(Request $request) - handle image upload, resize, save
   - changePassword(Request $request) - validate, hash, update
   - bookings() - list with filters (status, date range), pagination
   - bookingDetails($id) - show booking with guide/agency info
   - cancelBooking($id) - check cancellation policy, process
   - submitReview($id, Request $request) - validate, create review
   - favorites() - list all favorites (guides and agencies)
   - toggleFavorite($type, $id) - add or remove
   - subscriptions() - list all subscriptions
   - subscriptionDetails($id) - show details with usage
   - cancelSubscription($id) - process cancellation
   - reviews() - list my reviews with edit/delete options
   - editReview($id) - edit form
   - updateReview($id, Request $request) - validate and update
   - deleteReview($id) - soft delete
   - achievements() - list all achievements (earned and locked)
   - notifications() - list with pagination
   - markAsRead($id) - mark notification as read
   - markAllAsRead() - mark all as read

3. Blade Views (resources/views/dashboard/):
   - layouts/dashboard.blade.php
     * Sidebar navigation
     * Top bar with user info and notifications
     * Main content area
     * Mobile responsive menu

   - index.blade.php (Dashboard Home)
     * Welcome message
     * Stats cards: Total Bookings, Active Subscriptions, Favorites, Reviews
     * Recent bookings table
     * Upcoming bookings section
     * Quick actions (book guide, browse agencies, view favorites)

   - profile/show.blade.php
     * Avatar display
     * User information (name, email, phone, location)
     * Member since date
     * Verification status
     * Edit button

   - profile/edit.blade.php
     * Form: name, email, phone, country, city
     * Avatar upload with preview
     * Change password section
     * Delete account option
     * Save button

   - bookings/index.blade.php
     * Filter tabs: All, Upcoming, Completed, Cancelled
     * Search by guide/agency name
     * Date range filter
     * Booking cards with: thumbnail, name, date, status, price
     * Actions: View, Cancel, Review (if completed)
     * Pagination

   - bookings/show.blade.php
     * Booking details: reference number, status, dates
     * Guide/Agency information
     * Tour details, number of people
     * Price breakdown
     * Special requests
     * Timeline (booked, confirmed, completed)
     * Cancel button (if applicable)
     * Review button (if completed and not reviewed)
     * Messages section

   - favorites/index.blade.php
     * Tabs: Guides, Agencies
     * Grid layout with cards
     * Each card: image, name, rating, location, price
     * Remove from favorites button
     * Empty state if no favorites

   - subscriptions/index.blade.php
     * Active subscriptions section
     * Subscription cards: plan name, views remaining, expiry date
     * Usage stats (views used vs total)
     * Renew/upgrade buttons
     * Subscription history table
     * Buy new subscription button

   - subscriptions/show.blade.php
     * Plan details
     * Start and end dates
     * Views remaining meter
     * Usage history table (who viewed, when)
     * Cancel button

   - reviews/index.blade.php
     * My reviews list
     * Each review: thumbnail, guide/agency name, rating, date
     * Edit and delete buttons
     * Filter by rating
     * Pagination

   - reviews/edit.blade.php
     * Edit review form
     * Star rating selector
     * Title and description
     * Image upload
     * Update button

   - achievements/index.blade.php
     * Achievement badges grid
     * Earned achievements (colored)
     * Locked achievements (grayed out with progress)
     * Achievement details on hover
     * Progress bars for ongoing achievements

   - notifications/index.blade.php
     * Notification list with icons
     * Unread highlighted
     * Time ago display
     * Mark as read button
     * Mark all as read button
     * Filter: All, Unread, Read
     * Pagination

4. Components (resources/views/components/):
   - dashboard-stat-card.blade.php - reusable stat card
   - booking-card.blade.php - booking list item
   - favorite-card.blade.php - favorite item
   - notification-item.blade.php - notification list item
   - achievement-badge.blade.php - achievement display

5. JavaScript:
   - Avatar upload preview
   - Form validation
   - Confirm dialogs for delete/cancel actions
   - Toggle favorite AJAX
   - Mark notification as read AJAX
   - Date range picker for booking filters

6. Validation:
   - Profile update: required name, valid email, valid phone
   - Password change: current password correct, new password strong, confirmation matches
   - Review submission: rating required (1-5), review text optional but recommended

7. Authorization:
   - Users can only access their own data
   - Can only cancel bookings within cancellation window
   - Can only review completed bookings

Use consistent styling with AroundUz theme, responsive design, loading states, and error handling."


STEP 4: Guide Management System
================================
Context: Complete guide profile management, itinerary creation, booking management, and earnings tracking.

Requirements:
- Guide profile creation/editing
- Itinerary management
- Availability calendar
- Booking management
- Reviews and ratings
- Earnings dashboard
- Profile boost options

Prompt:
"Create complete guide management system for AroundUz:

1. Routes (web.php - prefix: /guide, middleware: auth, verified, role:guide):
   - GET /guide/dashboard - guide dashboard home
   - GET /guide/profile - view guide profile
   - GET /guide/profile/create - create guide profile (first time)
   - POST /guide/profile/store - store initial profile
   - GET /guide/profile/edit - edit profile form
   - POST /guide/profile/update - update profile
   - POST /guide/profile/cover - upload cover image
   - POST /guide/profile/gallery - upload gallery images
   - DELETE /guide/profile/gallery/{id} - delete gallery image
   - POST /guide/profile/languages - add language
   - DELETE /guide/profile/languages/{id} - remove language
   - POST /guide/profile/specializations - add specialization
   - DELETE /guide/profile/specializations/{id} - remove specialization
   - POST /guide/profile/certifications - add certification
   - PUT /guide/profile/certifications/{id} - update certification
   - DELETE /guide/profile/certifications/{id} - delete certification
   - POST /guide/profile/social - add social account
   - PUT /guide/profile/social/{id} - update social account
   - DELETE /guide/profile/social/{id} - delete social account

   - GET /guide/itineraries - list itineraries
   - GET /guide/itineraries/create - create itinerary form
   - POST /guide/itineraries - store itinerary
   - GET /guide/itineraries/{id} - show itinerary
   - GET /guide/itineraries/{id}/edit - edit itinerary form
   - PUT /guide/itineraries/{id} - update itinerary
   - DELETE /guide/itineraries/{id} - delete itinerary

   - GET /guide/availability - availability calendar
   - POST /guide/availability - set availability
   - PUT /guide/availability/{id} - update availability
   - DELETE /guide/availability/{id} - remove availability

   - GET /guide/bookings - booking list
   - GET /guide/bookings/{id} - booking details
   - POST /guide/bookings/{id}/accept - accept booking
   - POST /guide/bookings/{id}/decline - decline booking
   - POST /guide/bookings/{id}/complete - mark as completed
   - POST /guide/bookings/{id}/cancel - cancel booking

   - GET /guide/reviews - reviews received
   - GET /guide/reviews/{id} - review details
   - POST /guide/reviews/{id}/respond - respond to review

   - GET /guide/earnings - earnings dashboard
   - GET /guide/earnings/export - export earnings report

   - GET /guide/boost - boost options
   - POST /guide/boost/purchase - purchase boost plan

2. GuideController methods:
   - dashboard()
     * Stats: total tours, this month tours, total earnings, average rating
     * Upcoming bookings (7 days)
     * Pending booking requests
     * Recent reviews
     * Profile completion percentage

   - showProfile() - display guide profile with all details

   - createProfile() - show profile creation form (multi-step)

   - storeProfile(Request $request)
     * Validate: title, tagline, country, city, experience, hourly/daily rates
     * Create guide record
     * Redirect to profile edit for additional details

   - editProfile() - comprehensive edit form

   - updateProfile(Request $request)
     * Validate all fields
     * Update guide record
     * Handle cover image upload (resize, optimize)
     * Success message

   - uploadCover(Request $request)
     * Validate image (max 2MB, jpg/png)
     * Resize to 1920x600
     * Save and update database

   - uploadGallery(Request $request)
     * Validate multiple images
     * Resize to 1200x800
     * Create gallery_images records
     * Return uploaded images

   - deleteGalleryImage($id)
     * Delete file and database record

   - addLanguage(Request $request)
     * Create guide_language record

   - removeLanguage($id)
     * Delete guide_language record

   - addSpecialization(Request $request)
     * Create guide_specialization record

   - removeSpecialization($id)
     * Delete guide_specialization record

   - addCertification(Request $request)
     * Validate: name, date, file upload
     * Store certification with pending status

   - updateCertification($id, Request $request)
     * Update certification details

   - deleteCertification($id)
     * Delete certification record and file

   - addSocialAccount(Request $request)
     * Validate: social_type_id, url
     * Create guide_social_account record

   - updateSocialAccount($id, Request $request)
     * Update social account

   - deleteSocialAccount($id)
     * Delete social account

3. ItineraryController methods:
   - index() - list all itineraries with stats

   - create() - itinerary creation form

   - store(Request $request)
     * Validate: title, duration, price, group_size
     * Create itinerary
     * Add stops and includes
     * Success message

   - show($id) - display itinerary details

   - edit($id) - edit form

   - update($id, Request $request)
     * Validate and update
     * Update stops and includes

   - destroy($id) - soft delete itinerary

4. AvailabilityController methods:
   - index() - calendar view

   - store(Request $request)
     * Validate: date, status, slots
     * Create availability record

   - update($id, Request $request)
     * Update availability

   - destroy($id) - remove availability

5. GuideBookingController methods:
   - index()
     * Filter: pending, confirmed, completed, cancelled
     * Search by tourist name
     * Date range filter
     * Pagination

   - show($id) - booking details with tourist info

   - accept($id)
     * Update status to confirmed
     * Send notification to tourist
     * Update availability

   - decline($id, Request $request)
     * Validate decline reason
     * Update status
     * Send notification
     * Free up availability

   - complete($id)
     * Update status to completed
     * Trigger payment release
     * Request review from tourist

   - cancel($id, Request $request)
     * Validate cancellation reason
     * Process refund
     * Send notifications

6. GuideReviewController methods:
   - index()
     * List all reviews with filters
     * Rating distribution chart
     * Average rating calculation

   - show($id) - single review details

   - respond($id, Request $request)
     * Add guide response to review

7. EarningsController methods:
   - index()
     * Total earnings (lifetime, this year, this month)
     * Earnings chart (monthly)
     * Recent transactions
     * Pending payouts
     * Payout history

   - export(Request $request)
     * Generate PDF/Excel report
     * Date range filter

8. Blade Views (resources/views/guide/):
   - dashboard/index.blade.php
     * Stats cards
     * Upcoming bookings table
     * Pending requests alert
     * Recent reviews
     * Quick actions

   - profile/create.blade.php
     * Multi-step form
     * Step 1: Basic info
     * Step 2: Rates and experience
     * Step 3: Location
     * Progress indicator

   - profile/show.blade.php
     * Public preview of profile
     * Edit button

   - profile/edit.blade.php
     * Tabs: Basic Info, Languages, Specializations, Certifications, Social, Gallery
     * Basic Info: title, tagline, description, rates, experience, location
     * Cover image uploader
     * Form sections

   - itineraries/index.blade.php
     * Create new button
     * Itinerary cards with: title, duration, price, stops count
     * Edit and delete actions

   - itineraries/create.blade.php
     * Form: title, duration, price, group_size, recommended_for
     * Stops repeater (add/remove)
     * Includes repeater
     * Save button

   - itineraries/edit.blade.php
     * Same as create with existing data

   - availability/calendar.blade.php
     * Full calendar view
     * Click to add availability
     * Color-coded: available (green), limited (yellow), booked (red), unavailable (gray)
     * Modal for adding/editing

   - bookings/index.blade.php
     * Filter tabs
     * Booking cards with actions
     * Accept/decline buttons for pending
     * Complete button for confirmed

   - bookings/show.blade.php
     * Full booking details
     * Tourist information
     * Communication section
     * Action buttons based on status

   - reviews/index.blade.php
     * Rating overview
     * Review list
     * Respond button

   - earnings/index.blade.php
     * Earnings chart
     * Stats cards
     * Transactions table
     * Export button

   - boost/index.blade.php
     * Boost plan cards
     * Current boost status
     * Purchase button

9. Components:
   - guide-stat-card.blade.php
   - itinerary-form.blade.php
   - availability-modal.blade.php
   - booking-action-buttons.blade.php

10. JavaScript:
    - Image upload with preview
    - Repeater fields for stops and includes
    - Calendar integration (FullCalendar)
    - Form validation
    - AJAX for quick actions

11. Validation Rules:
    - Profile: required fields, valid rates (positive numbers)
    - Itinerary: required title, valid price
    - Availability: valid date (future), valid slots
    - Certification: valid file types (PDF, JPG, PNG)

12. Authorization:
    - Guide can only manage their own profile
    - Can only view their own bookings
    - Can only respond to reviews about them

Ensure mobile responsiveness, loading states, and consistent styling with AroundUz theme."


STEP 5: Agency Management System
=================================
Context: Complete agency profile management, tour package creation, team management, and earnings tracking.

Requirements:
- Agency profile creation/editing
- Tour package management
- Team member management
- Booking management
- Reviews and ratings
- Earnings dashboard
- Profile boost options

Prompt:
"Create complete agency management system for AroundUz:

1. Routes (web.php - prefix: /agency, middleware: auth, verified, role:agency):
   - GET /agency/dashboard - agency dashboard
   - GET /agency/profile - view profile
   - GET /agency/profile/create - create profile
   - POST /agency/profile/store - store profile
   - GET /agency/profile/edit - edit profile
   - POST /agency/profile/update - update profile
   - POST /agency/profile/logo - upload logo
   - POST /agency/profile/cover - upload cover
   - POST /agency/profile/gallery - upload gallery images
   - DELETE /agency/profile/gallery/{id} - delete image
   - POST /agency/profile/languages - add language
   - DELETE /agency/profile/languages/{id} - remove language
   - POST /agency/profile/specializations - add specialization
   - DELETE /agency/profile/specializations/{id} - remove specialization
   - POST /agency/profile/social - add social account
   - PUT /agency/profile/social/{id} - update social
   - DELETE /agency/profile/social/{id} - delete social

   - GET /agency/team - team members list
   - GET /agency/team/create - add team member
   - POST /agency/team - store team member
   - GET /agency/team/{id}/edit - edit team member
   - PUT /agency/team/{id} - update team member
   - DELETE /agency/team/{id} - delete team member

   - GET /agency/packages - tour packages list
   - GET /agency/packages/create - create package
   - POST /agency/packages - store package
   - GET /agency/packages/{id} - show package
   - GET /agency/packages/{id}/edit - edit package
   - PUT /agency/packages/{id} - update package
   - DELETE /agency/packages/{id} - delete package
   - POST /agency/packages/{id}/toggle - activate/deactivate

   - GET /agency/bookings - booking list
   - GET /agency/bookings/{id} - booking details
   - POST /agency/bookings/{id}/accept - accept
   - POST /agency/bookings/{id}/decline - decline
   - POST /agency/bookings/{id}/complete - complete
   - POST /agency/bookings/{id}/cancel - cancel

   - GET /agency/reviews - reviews received
   - GET /agency/reviews/{id} - review details
   - POST /agency/reviews/{id}/respond - respond

   - GET /agency/earnings - earnings dashboard
   - GET /agency/earnings/export - export report

   - GET /agency/boost - boost plans
   - POST /agency/boost/purchase - purchase boost

2. AgencyController methods:
   - dashboard()
     * Stats: total tours, active packages, total earnings, average rating
     * Upcoming bookings
     * Pending requests
     * Recent reviews
     * Team member count
     * Profile completion percentage

   - showProfile()
   - createProfile()
   - storeProfile(Request $request)
   - editProfile()
   - updateProfile(Request $request)
   - uploadLogo(Request $request) - resize to 400x400
   - uploadCover(Request $request) - resize to 1920x600
   - uploadGallery(Request $request)
   - deleteGalleryImage($id)
   - addLanguage(Request $request)
   - removeLanguage($id)
   - addSpecialization(Request $request)
   - removeSpecialization($id)
   - addSocialAccount(Request $request)
   - updateSocialAccount($id, Request $request)
   - deleteSocialAccount($id)

3. TeamMemberController methods:
   - index() - list team members

   - create() - add team member form

   - store(Request $request)
     * Validate: name, role, bio, avatar
     * Upload and resize avatar
     * Create team member record

   - edit($id) - edit form

   - update($id, Request $request)
     * Update team member

   - destroy($id)
     * Delete team member

4. TourPackageController methods:
   - index()
     * List all packages
     * Filter: active, inactive
     * Stats per package

   - create() - package creation form

   - store(Request $request)
     * Validate: title, description, duration, price, group_size, difficulty
     * Validate dates: from_date, to_date, availability_dates (JSON)
     * Create package with includes/excludes

   - show($id) - package details

   - edit($id) - edit form

   - update($id, Request $request)
     * Update package

   - destroy($id) - soft delete

   - toggle($id) - activate/deactivate

5. AgencyBookingController methods:
   - index()
   - show($id)
   - accept($id)
   - decline($id, Request $request)
   - complete($id)
   - cancel($id, Request $request)

6. AgencyReviewController methods:
   - index()
   - show($id)
   - respond($id, Request $request)

7. AgencyEarningsController methods:
   - index()
   - export(Request $request)

8. Blade Views (resources/views/agency/):
   - dashboard/index.blade.php
     * Stats cards
     * Upcoming bookings
     * Active packages count
     * Team members count
     * Quick actions

   - profile/create.blade.php
     * Multi-step: Company Info, Contact, Location

   - profile/show.blade.php
     * Public preview

   - profile/edit.blade.php
     * Tabs: Basic Info, Contact, Languages, Specializations, Social, Gallery, Team
     * Logo and cover uploaders
     * Form sections

   - team/index.blade.php
     * Team member cards with photo, name, role
     * Add new button
     * Edit/delete actions

   - team/create.blade.php
     * Form: name, role, bio, avatar

   - team/edit.blade.php
     * Edit form with existing data

   - packages/index.blade.php
     * Package cards with image, title, duration, price
     * Active/inactive toggle
     * Edit/delete actions
     * Create new button

   - packages/create.blade.php
     * Form: title, description, duration, price
     * Group size, difficulty level
     * Dates: from_date, to_date
     * Availability dates picker (multiple dates)
     * Includes repeater
     * Excludes repeater
     * Itinerary text editor

   - packages/show.blade.php
     * Full package details
     * Booking statistics

   - packages/edit.blade.php
     * Edit form with existing data

   - bookings/index.blade.php
     * Filter tabs
     * Booking cards
     * Actions based on status

   - bookings/show.blade.php
     * Booking details
     * Tourist info
     * Package details
     * Actions

   - reviews/index.blade.php
     * Rating overview
     * Reviews list

   - earnings/index.blade.php
     * Earnings chart
     * Transactions table

   - boost/index.blade.php
     * Boost plans

9. Components:
   - agency-stat-card.blade.php
   - team-member-card.blade.php
   - package-card.blade.php
   - package-form.blade.php

10. JavaScript:
    - Image uploaders with preview
    - Repeater fields
    - Date range picker
    - Multiple dates picker (Flatpickr)
    - Rich text editor (TinyMCE)
    - Form validation

11. Validation:
    - Profile: required company name, valid license number
    - Team member: required name and role
    - Package: required title, valid price, valid dates
    - Dates: from_date < to_date, availability_dates within range

12. Authorization:
    - Agency can only manage own profile
    - Can only manage own team and packages
    - Can only view own bookings

Ensure mobile responsiveness and consistent styling."


STEP 6: Public Guide Listing & Search
======================================
Context: Public-facing pages where tourists can browse, search, and filter guides.

Requirements:
- Advanced filtering system
- Search functionality
- Sort options
- Pagination
- Responsive design
- Contact view with subscription check

Prompt:
"Create public guide listing and detail pages for AroundUz:

1. Routes (web.php - public):
   - GET /guides - guide listing page
   - GET /guides/{slug} - guide detail page
   - POST /guides/{id}/contact - view contact (requires subscription)
   - POST /guides/{id}/favorite - add/remove favorite
   - POST /guides/{id}/book - booking form submission

2. PublicGuideController methods:
   - index(Request $request)
     * Fetch guides with filters applied
     * Filters: search, city, language, specialization, rating, price_min, price_max, status, sort
     * Apply boosted profiles (VIP, Featured, Sponsor at top)
     * Pagination (12 per page)
     * Return view with guides, filters, cities, languages, specializations

   - show($slug)
     * Fetch guide by slug with: languages, specializations, certifications, socialAccounts, reviews, itineraries, galleryImages
     * Calculate average rating
     * Check if user has favorited
     * Check if user has active subscription
     * Return view with guide details

   - viewContact($id)
     * Check if user is authenticated
     * Check if user has active subscription with views remaining
     * If yes: decrement views, log contact_view, return contact info (phone, email, social)
     * If no: return error, prompt to subscribe

   - toggleFavorite($id)
     * Check authentication
     * Toggle favorite record
     * Return success with new favorite status

   - showBookingForm($id)
     * Show booking modal/page
     * Include guide rates and availability

3. Blade Views (resources/views/public/guides/):
   - index.blade.php (Guide Listing)
     * Hero section with search bar (use provided design)
     * City dropdown with photos (use provided design)
     * Service type dropdown (use provided design)
     * Search button

     * Filters section (sidebar on desktop, modal on mobile - use provided design)
       - Availability (Online Now, Busy)
       - Price Range (min/max sliders)
       - Minimum Rating (radio buttons with stars)
       - Languages (checkboxes)
       - Specializations (checkboxes)
       - Apply Filters button
       - Clear All button

     * Results header
       - Showing X of Y guides
       - Sort dropdown (Most Popular, Highest Rated, Price: Low to High, Price: High to Low, Most Experienced)
       - Active filters chips (removable)

     * Guide cards grid (3 columns desktop, 2 tablet, 1 mobile)
       Each card:
       - Cover image with verified badge
       - Avatar (small, overlapping cover)
       - VIP/Featured/Sponsor badge (if boosted)
       - Name and title
       - Rating stars with count
       - Location with icon
       - Experience years
       - Languages (flags)
       - Top specializations (max 3)
       - Hourly and daily rates
       - Status indicator (online/busy/offline)
       - View Profile button
       - Favorite heart icon (toggle)

     * Pagination

     * No results state
       - Empty state icon
       - "No guides found" message
       - Clear filters button

   - show.blade.php (Guide Detail)
     * Breadcrumb navigation

     * Header section
       - Cover image (full width)
       - Avatar (large, overlapping)
       - Name and title
       - Rating and review count
       - Location
       - Verified badge
       - Favorite button
       - Share button
       - Report button

     * Main content (2 column layout)
       Left column (wider):

       - About section
         * Description (full bio)
         * Experience years
         * Tours completed
         * Member since

       - Languages section
         * Language chips with flags

       - Specializations section
         * Specialization badges with icons

       - Certifications section
         * Certificate cards with: name, date, expiry, download/view button
         * Verification status

       - Itineraries section
         * Itinerary cards with: title, duration, price, stops preview
         * View full itinerary button

       - Gallery section
         * Photo grid (masonry layout)
         * Lightbox on click

       - Reviews section
         * Rating overview with breakdown (5 stars: 80%, 4 stars: 15%, etc.)
         * Review filters (All, 5 stars, 4 stars, etc.)
         * Review cards with: user avatar, name, date, rating, review text, photos
         * Helpful button on reviews
         * Pagination
         * "Write a Review" button (if user has completed booking)

       Right column (sidebar):

       - Booking card (sticky)
         * Rates: hourly and daily
         * Date picker (with availability check)
         * Time picker
         * Number of people selector
         * Duration selector (hours/days)
         * Price calculation preview
         * "Book Now" button
         * "Request to Book" button

       - Contact card
         * If user has subscription with views:
           - Show contact button
           - Click reveals: phone, email, WhatsApp, Telegram
           - Decrements subscription view
         * If no subscription:
           - Show "View Contact" button
           - Click shows subscription required modal
           - "Get Subscription" button
         * Views remaining indicator

       - Availability calendar
         * Mini calendar showing available/booked dates
         * Color coded

       - Social links
         * Social media icons
         * Click to open profile

       - Share this guide
         * Social share buttons (Facebook, Twitter, WhatsApp, Copy Link)

       - Similar guides section
         * 3 guide cards (same city or specialization)

   - partials/guide-card.blade.php (Reusable component)
     * All card elements as described above
     * Props: $guide

   - partials/booking-modal.blade.php
     * Modal with booking form
     * Date, time, people, duration
     * Special requests textarea
     * Price breakdown
     * Payment method selection
     * Terms acceptance
     * Submit button

   - partials/subscription-required-modal.blade.php
     * Modal explaining subscription needed
     * Subscription plan cards
     * "Choose Plan" buttons
     * Close button

   - partials/itinerary-modal.blade.php
     * Full itinerary display
     * Stops with timeline
     * Includes list
     * Pricing
     * Book button

4. JavaScript (resources/js/guides.js):
   - Search functionality
     * Auto-submit on filter change (desktop)
     * Apply button on mobile

   - Mobile filter toggle
     * Show/hide filter sidebar
     * Smooth animations

   - Favorite toggle
     * AJAX request
     * Heart animation
     * Update count
     * Show login modal if not authenticated

   - Contact view
     * Check subscription
     * AJAX request to decrement view
     * Show contact info
     * Show subscription modal if needed

   - Booking form
     * Date/time validation
     * Availability check
     * Price calculation
     * Form submission

   - Image gallery
     * Lightbox/modal
     * Navigation between images

   - Share functionality
     * Copy link to clipboard
     * Social share APIs

   - Review helpful
     * AJAX request
     * Update count

   - Scroll to booking form
     * Smooth scroll on CTA click

5. API Endpoints for AJAX (routes/api.php or web.php):
   - POST /api/guides/{id}/check-availability
     * Input: date, duration
     * Return: available (true/false), slots_remaining

   - POST /api/guides/{id}/calculate-price
     * Input: duration, duration_type (hours/days), num_people
     * Return: price_breakdown

   - GET /api/guides/search-suggestions
     * Input: query
     * Return: guide names and locations (autocomplete)

6. Search & Filter Logic:
   - Text search: name, title, tagline, description (LIKE query)

   - City filter: exact match on city_id

   - Language filter: guides with selected languages (whereHas)

   - Specialization filter: guides with selected specializations (whereHas)

   - Price range: hourly_rate or daily_rate BETWEEN min and max

   - Rating filter: rating >= selected value

   - Status filter: status IN (online, busy)

   - Sort options:
     * Popular: tours_completed DESC
     * Rating: rating DESC, reviews_count DESC
     * Price Low: hourly_rate ASC
     * Price High: hourly_rate DESC
     * Experience: experience_years DESC

   - Boosted profiles:
     * Separate query for active boosts
     * Order by position_priority DESC
     * Merge with regular results

7. Subscription Check Logic:
   - Check if user has active subscription
   - Check if views_remaining > 0
   - If yes: allow contact view
   - Decrement views_remaining
   - Create contact_view record
   - Return contact information
   - If no: return error with subscription options

8. SEO Optimization:
   - Meta tags for each guide (title, description, image)
   - Structured data (LocalBusiness schema)
   - Canonical URLs
   - Open Graph tags for social sharing

9. Performance Optimization:
   - Eager loading: languages, specializations, reviews
   - Image lazy loading
   - Pagination for reviews
   - Cache popular filters
   - Database indexes on: city_id, rating, hourly_rate, status

10. Accessibility:
    - Alt text for images
    - ARIA labels for interactive elements
    - Keyboard navigation
    - Screen reader friendly

11. Responsive Design:
    - Mobile: single column, bottom sheet filters
    - Tablet: 2 column grid
    - Desktop: 3 column grid with sidebar filters

12. Error Handling:
    - 404 for non-existent guides
    - Handle no results gracefully
    - Show error messages for failed AJAX requests
    - Validation errors display inline

Use the hero section and filter designs I provided earlier. Ensure consistency with AroundUz branding (skyblue theme). Include loading states and skeleton screens."


STEP 7: Public Agency Listing & Search
=======================================
Context: Public-facing pages where tourists can browse, search, and filter travel agencies.

Requirements:
- Similar to guide listing but for agencies
- Tour package display
- Team showcase
- Contact view with subscription

Prompt:
"Create public agency listing and detail pages for AroundUz (similar to guides but for agencies):

1. Routes (web.php - public):
   - GET /agencies - agency listing page
   - GET /agencies/{slug} - agency detail page
   - GET /agencies/{id}/packages - agency packages
   - GET /agencies/{id}/packages/{package_id} - package detail
   - POST /agencies/{id}/contact - view contact
   - POST /agencies/{id}/favorite - toggle favorite
   - POST /agencies/{id}/book - booking submission

2. PublicAgencyController methods:
   - index(Request $request)
     * Fetch agencies with filters: search, city, type, specialization, rating, verified, sort
     * Apply boosted profiles
     * Pagination (12 per page)

   - show($slug)
     * Fetch agency with: languages, specializations, teamMembers, tourPackages, reviews, galleryImages, socialAccounts
     * Check favorite and subscription status

   - packages($id)
     * List all packages for agency

   - packageDetail($id, $packageId)
     * Show package details

   - viewContact($id)
     * Check subscription, decrement view, return contact

   - toggleFavorite($id)
     * Toggle favorite

   - showBookingForm($id)
     * Show booking form

3. Blade Views (resources/views/public/agencies/):
   - index.blade.php (Agency Listing)
     * Hero section with search (use provided design)
     * City and service dropdowns with photos

     * Filters (sidebar desktop, modal mobile)
       - Availability (Available Now, Busy)
       - Agency Type (Premium, Budget, Luxury, Adventure, Family)
       - Minimum Rating
       - Specializations
       - Verified Only checkbox
       - Apply/Clear buttons

     * Results header
       - Showing X of Y agencies
       - Sort: Most Popular, Highest Rated, Most Tours, Newest First
       - Active filters chips

     * Agency cards grid
       Each card:
       - Logo
       - Cover image
       - VIP/Featured badge
       - Agency name
       - Tagline
       - Verified badge (blue checkmark)
       - Rating and reviews
       - Location
       - Established year
       - Languages (flags)
       - Specializations (max 3)
       - Tours completed
       - Active packages count
       - View Agency button
       - Favorite icon

     * Pagination
     * No results state

   - show.blade.php (Agency Detail)
     * Breadcrumb

     * Header
       - Cover image
       - Logo (overlapping)
       - Agency name and tagline
       - Verified badge
       - Rating and reviews
       - Location
       - Established year
       - Favorite button
       - Share button

     * Tabs Navigation (sticky)
       - About
       - Tour Packages
       - Team
       - Reviews
       - Gallery

     * About Tab
       - Full description
       - Company information (license, established)
       - Languages section
       - Specializations section
       - Awards/certifications

     * Tour Packages Tab
       - Package cards grid
       Each package card:
       - Image
       - Title
       - Duration (e.g., "5 Days, 4 Nights")
       - Price per person
       - Group size (Min-Max)
       - Difficulty level
       - Available dates
       - Includes preview (3 items)
       - View Details button
       - Book Now button

       Package detail modal/page:
       - Full description
       - Itinerary by day
       - Includes list (full)
       - Excludes list
       - Dates: from_date, to_date, availability_dates
       - Price breakdown
       - Group size and difficulty
       - Booking form

     * Team Tab
       - Team member cards
       Each card:
       - Photo
       - Name
       - Role/Position
       - Bio
       - LinkedIn link (optional)

     * Reviews Tab
       - Same as guide reviews
       - Rating breakdown
       - Review list with filters
       - Pagination

     * Gallery Tab
       - Photo grid
       - Lightbox

     * Sidebar (sticky)
       - Contact card
         * If has subscription: view contact button
         * If no subscription: subscribe prompt
       - Quick booking card
         * Select package dropdown
         * Date picker
         * Number of people
         * Quick quote button
       - Verified information
         * License number
         * Verification date
       - Social links
       - Share buttons

     * Similar agencies section
       - 3 agency cards

   - partials/agency-card.blade.php
     * Reusable card component

   - partials/package-card.blade.php
     * Tour package card

   - partials/package-detail-modal.blade.php
     * Full package details

   - partials/team-member-card.blade.php
     * Team member display

4. JavaScript (resources/js/agencies.js):
   - Filter and search functionality
   - Mobile filter toggle
   - Favorite toggle
   - Contact view with subscription check
   - Package booking form
   - Tab navigation
   - Image gallery
   - Date picker for packages
   - Price calculation
   - Share functionality

5. API Endpoints:
   - POST /api/agencies/{id}/packages/{packageId}/check-dates
     * Check if package available on selected dates

   - POST /api/agencies/{id}/packages/{packageId}/calculate-price
     * Calculate total based on people and package

6. Search & Filter Logic:
   - Text search: name, tagline, description
   - City filter: city_id match
   - Type filter: type IN (selected)
   - Specialization filter: whereHas
   - Rating filter: rating >= value
   - Verified filter: verified = true
   - Sort:
     * Popular: tours_completed DESC
     * Rating: rating DESC
     * Tours: tours_completed DESC
     * Newest: created_at DESC
   - Boosted profiles: priority first

7. Subscription Check:
   - Same as guides
   - Check active subscription
   - Decrement views
   - Log contact_view
   - Return contact info

8. SEO & Performance:
   - Meta tags per agency
   - Structured data (TravelAgency schema)
   - Eager loading relationships
   - Image optimization
   - Lazy loading

9. Responsive Design:
   - Mobile: single column, tabs scroll
   - Tablet: 2 columns
   - Desktop: 3 columns with sidebar

10. Accessibility:
    - Alt text, ARIA labels
    - Keyboard navigation
    - Screen reader friendly

Use provided designs for hero and filters. Purple theme accent for agencies (vs skyblue for guides). Ensure consistent user experience with guide pages."


STEP 8: Booking System
======================
Context: Complete booking flow from selection to payment confirmation.

Requirements:
- Booking form with validation
- Availability checking
- Price calculation
- Payment integration
- Confirmation emails
- Booking management

Prompt:
"Create comprehensive booking system for AroundUz:

1. Routes (web.php - auth required):
   - GET /book/guide/{id} - guide booking form
   - GET /book/agency/{id} - agency booking form
   - GET /book/package/{id} - package booking form
   - POST /book/check-availability - check availability
   - POST /book/calculate-price - calculate total
   - POST /book/store - store booking
   - GET /booking/{id}/payment - payment page
   - POST /booking/{id}/process-payment - process payment
   - GET /booking/{id}/confirmation - confirmation page
   - POST /booking/{id}/cancel-request - request cancellation

2. BookingController methods:
   - showGuideBookingForm($guideId)
     * Fetch guide with rates and availability
     * Show booking form
     * Include itinerary selection

   - showAgencyBookingForm($agencyId)
     * Fetch agency
     * Show booking form

   - showPackageBookingForm($packageId)
     * Fetch package with details
     * Show booking form
     * Pre-fill package info

   - checkAvailability(Request $request)
     * Input: bookable_type, bookable_id, date, duration
     * Check availability table
     * Return: available (bool), message

   - calculatePrice(Request $request)
     * Input: bookable_type, bookable_id, duration, num_people, service_type
     * Calculate base price
     * Apply any discounts
     * Calculate fees
     * Return: breakdown (base, fees, discount, total)

   - store(Request $request)
     * Validate all booking data
     * Check availability again
     * Create booking record (status: pending)
     * Create availability record or update slots
     * Send notification to guide/agency
     * Redirect to payment page

   - showPaymentPage($bookingId)
     * Fetch booking details
     * Show payment options
     * Display price breakdown

   - processPayment($bookingId, Request $request)
     * Validate payment method
     * Process payment (Stripe/PayPal)
     * Create payment record
     * Update booking (payment_status: paid, status: confirmed)
     * Create invoice
     * Send confirmation emails
     * Redirect to confirmation page

   - showConfirmation($bookingId)
     * Fetch booking with all details
     * Show confirmation message
     * Display booking reference
     * Download invoice button
     * Share/save to calendar buttons

   - requestCancellation($bookingId, Request $request)
     * Check cancellation policy
     * Calculate refund amount
     * Update booking status (pending_cancellation)
     * Notify guide/agency
     * Process refund if applicable

3. Blade Views (resources/views/bookings/):
   - guide-form.blade.php (Guide Booking)
     * Breadcrumb: Home > Guides > {Guide Name} > Book

     * Guide summary card
       - Avatar and cover
       - Name and title
       - Rating
       - Location

     * Booking form (multi-step)
       Step 1: Tour Details
       - Select itinerary (dropdown)
       - Tour date (datepicker with availability)
       - Start time (timepicker)
       - Duration type: Hourly or Daily (radio)
       - Duration: number input
       - Number of people (counter input)

       Step 2: Personal Information
       - Full name (pre-filled from user)
       - Email (pre-filled)
       - Phone (pre-filled or input)
       - Special requests (textarea)
       - Language preference (dropdown)

       Step 3: Review & Confirm
       - Summary of all selections
       - Price breakdown:
         * Base price (rate Ã— duration)
         * Extra person charges (if applicable)
         * Service fee (platform fee)
         * Total amount
       - Terms and conditions checkbox
       - Cancellation policy display
       - Book & Pay button

     * Sidebar (sticky)
       - Price calculator (live updates)
       - Booking includes list
       - Cancellation policy summary
       - Need help? Contact support

   - agency-form.blade.php (Agency Booking)
     * Similar to guide form
     * Step 1: Tour details or package selection

   - package-form.blade.php (Package Booking)
     * Package details pre-filled
     * Step 1: Select dates
       - Check-in date
       - Number of people
       - Room/accommodation preferences
     * Step 2: Personal info
     * Step 3: Review & confirm

   - payment.blade.php (Payment Page)
     * Breadcrumb

     * Order summary card
       - What you're booking
       - Guide/Agency name
       - Date and time
       - Duration and people
       - Price breakdown
       - Total to pay

     * Payment methods (tabs)
       Tab 1: Credit/Debit Card
       - Card number
       - Expiry date
       - CVV
       - Cardholder name
       - Save card checkbox
       - Saved cards display (if any)

       Tab 2: PayPal
       - PayPal button/redirect

       Tab 3: Bank Transfer
       - Bank details display
       - Upload proof button

       Tab 4: Other
       - Alternative payment options

     * Secure payment badges
     * Terms and refund policy
     * Pay Now button (with loading state)
     * Back to booking button

   - confirmation.blade.php (Confirmation)
     * Success animation/icon
     * "Booking Confirmed!" heading

     * Booking details card
       - Booking reference number (large, copyable)
       - Status badge (Confirmed, Paid)
       - Guide/Agency info
       - Tour details
       - Date, time, duration
       - Number of people
       - Total paid

     * What's next section
       - Check email for confirmation
       - Guide/Agency will contact you
       - View in My Bookings
       - Download invoice
       - Add to calendar button

     * Quick actions
       - View Booking button
       - Contact Guide/Agency button
       - Share Booking button
       - Back to Home button

     * Need to cancel?
       - Cancellation policy reminder
       - Cancel Booking link

4. Components (resources/views/components/booking/):
   - booking-step-indicator.blade.php
     * Progress indicator for multi-step form
     * Props: current_step, total_steps

   - price-calculator.blade.php
     * Live price calculation display
     * Props: base_rate, duration, people, fees

   - date-time-picker.blade.php
     * Date and time selection with availability
     * Disabled dates display

   - payment-method-tab.blade.php
     * Payment method form sections

5. JavaScript (resources/js/bookings.js):
   - Multi-step form navigation
     * Next/Previous buttons
     * Validation before proceeding
     * Progress indicator update

   - Availability checker
     * Real-time check on date selection
     * Disable unavailable dates
     * Show available slots

   - Price calculator
     * Live price updates
     * Calculate on input change
     * Display breakdown

   - Form validation
     * Client-side validation
     * Required field checks
     * Date/time validation
     * Phone number format

   - Payment processing
     * Stripe Elements integration
     * PayPal SDK integration
     * Form submission with loading
     * Error handling

   - Calendar integration
     * Add to Google Calendar
     * Add to Apple Calendar
     * Download ICS file

6. Validation Rules:
   - Booking form:
     * bookable_type: required, in:guide,agency
     * bookable_id: required, exists
     * tour_date: required, date, after_or_equal:today
     * start_time: required, date_format:H:i
     * duration: required, numeric, min:1
     * num_people: required, integer, min:1
     * service_type: nullable
     * special_requests: nullable, max:500

   - Payment:
     * payment_method: required, in:card,paypal,bank_transfer,others
     * Card: valid card number, expiry, CVV
     * Terms acceptance: required, accepted

7. Business Logic:
   - Availability Check:
     * Query availability table for date
     * Check slots_booked < slots_total
     * Return available slots

   - Price Calculation:
     * For guides: rate Ã— duration
     * For packages: package price Ã— num_people
     * Add platform fee (e.g., 5%)
     * Apply coupons if any

   - Booking Creation:
     * Generate unique booking reference
     * Set initial status: pending
     * Set payment_status: pending
     * Create booking record
     * Update availability (increment slots_booked)

   - Payment Processing:
     * Integrate with Stripe:
       - Create payment intent
       - Confirm payment
       - Handle webhooks
     * Integrate with PayPal:
       - Create order
       - Capture payment
     * Store payment record
     * Update booking status

   - Cancellation:
     * Check time until tour (cancellation window)
     * Calculate refund:
       - >7 days: 100% refund
       - 3-7 days: 50% refund
       - <3 days: No refund
     * Process refund through payment gateway
     * Update booking status
     * Notify all parties

8. Email Notifications:
   - BookingReceived (to guide/agency)
     * New booking notification
     * Booking details
     * Accept/decline links

   - BookingConfirmed (to user)
     * Confirmation email
     * Booking details
     * Invoice attachment
     * Add to calendar link

   - BookingReminder (to user)
     * 24 hours before tour
     * Reminder details

   - BookingCancelled
     * Cancellation confirmation
     * Refund information

9. Database Transactions:
   - Use transactions for:
     * Creating booking + payment + invoice
     * Processing payment + updating booking
     * Cancellation + refund

10. Error Handling:
    - Availability conflicts: "This time slot is no longer available"
    - Payment failures: "Payment failed, please try again"
    - Invalid dates: "Please select a valid date"
    - Network errors: Retry mechanism

11. Security:
    - CSRF protection on all forms
    - Validate user owns booking before payment
    - Sanitize all inputs
    - Encrypt payment information
    - PCI compliance for card storage

12. Testing:
    - Test availability checking
    - Test price calculations
    - Test payment processing (sandbox)
    - Test cancellation logic
    - Test email sending

Integrate with Stripe and PayPal. Use SweetAlert2 for confirmations. Ensure mobile responsiveness. Include loading states and skeleton screens."


STEP 9: Review System
=====================
Context: Allow users to review guides and agencies after completed tours.

Requirements:
- Review submission form
- Photo uploads
- Star ratings
- Moderation
- Helpful votes
- Review responses

Prompt:
"Create comprehensive review system for AroundUz:

1. Routes (web.php - auth required):
   - GET /bookings/{id}/review - show review form
   - POST /bookings/{id}/review - submit review
   - GET /reviews/{id} - view single review
   - GET /reviews/{id}/edit - edit review form
   - PUT /reviews/{id} - update review
   - DELETE /reviews/{id} - delete review
   - POST /reviews/{id}/helpful - mark review as helpful
   - POST /reviews/{id}/report - report review
   - GET /reviews/pending - pending reviews (admin)
   - POST /reviews/{id}/approve - approve review (admin)
   - POST /reviews/{id}/reject - reject review (admin)

2. ReviewController methods:
   - showReviewForm($bookingId)
     * Validate: booking exists, belongs to user, status is completed, not already reviewed
     * Fetch booking with guide/agency details
     * Show review form

   - store($bookingId, Request $request)
     * Validate: rating (1-5), title, review text, photos (max 5)
     * Upload and resize photos
     * Create review record (status: pending)
     * Create review_images records
     * Update reviewable (guide/agency) reviews_count and rating
     * Send notification to guide/agency
     * Redirect with success message

   - show($id)
     * Fetch review with user, reviewable, images
     * Show review detail page

   - edit($id)
     * Authorize: user owns review
     * Show edit form

   - update($id, Request $request)
     * Authorize: user owns review
     * Validate updates
     * Update review
     * Handle photo additions/deletions
     * Re-calculate average rating

   - destroy($id)
     * Authorize: user owns review
     * Soft delete review
     * Delete images
     * Update review count and rating

   - markHelpful($id)
     * Check if user already marked
     * Increment helpful_count
     * Store user's helpful vote

   - report($id, Request $request)
     * Validate reason
     * Create report record
     * Notify admin

   - pendingReviews() (Admin)
     * Fetch reviews where status = pending
     * Show admin moderation page

   - approve($id) (Admin)
     * Update status to approved
     * Notify user

   - reject($id) (Admin)
     * Update status to rejected
     * Notify user with reason

3. GuideReviewResponseController methods:
   - respond($reviewId, Request $request)
     * Authorize: user is guide who received review
     * Validate response text
     * Add response to review
     * Notify reviewer

4. Blade Views (resources/views/reviews/):
   - create.blade.php (Review Form)
     * Breadcrumb

     * Booking summary card
       - Guide/Agency name and avatar
       - Tour date
       - Service type

     * Review form
       - Overall Rating (required)
         * 5-star rating component (interactive stars)
         * Labels: Terrible, Poor, Average, Good, Excellent

       - Specific Ratings (optional)
         * Communication (5 stars)
         * Punctuality (5 stars)
         * Knowledge (5 stars)
         * Value for Money (5 stars)

       - Review Title (required)
         * Input field (max 100 chars)
         * Placeholder: "Summarize your experience"

       - Review Description (required)
         * Textarea (max 500 chars)
         * Character counter
         * Placeholder: "Tell us about your experience..."

       - Tour Type (optional)
         * Dropdown: Solo, Couple, Family, Friends, Business

       - Photos (optional)
         * Photo uploader (max 5 photos)
         * Drag & drop or click to upload
         * Image preview with remove button
         * Max 5MB per image

       - Would you recommend? (required)
         * Yes/No radio buttons

       - Submit Review button
       - Cancel button

   - show.blade.php (Single Review)
     * Breadcrumb

     * Review header
       - User avatar and name
       - Verified purchaser badge
       - Review date
       - Rating stars

     * Review content
       - Title (bold)
       - Full review text
       - Tour type label
       - Photo gallery (if photos)
       - Recommendation badge

     * Specific ratings section
       - Communication, Punctuality, etc. with stars

     * Guide/Agency response (if exists)
       - Response text
       - Response date
       - Guide/Agency avatar and name

     * Helpful votes
       - "Was this review helpful?" text
       - Yes button with count
       - No button

     * Report button
     * Edit/Delete buttons (if own review)

   - edit.blade.php (Edit Review)
     * Same as create form with existing data
     * Update button instead of Submit

   - partials/review-card.blade.php (Review List Item)
     * Compact version for lists
     * User info
     * Rating
     * Title and truncated text
     * Read More link
     * Helpful count
     * Photos thumbnail

   - partials/rating-breakdown.blade.php
     * Visual rating distribution
     * 5 stars: 80% with progress bar
     * 4 stars: 15% with progress bar
     * etc.

   - partials/star-rating.blade.php
     * Reusable star rating component
     * Props: rating, size, interactive

   - admin/pending.blade.php (Admin Moderation)
     * List of pending reviews
     * Each review card with:
       - Full review content
       - User and guide/agency info
       - Approve button (green)
       - Reject button (red)
       - Quick actions
     * Bulk actions
     * Filters: All, Pending, Approved, Rejected

5. Components (resources/views/components/review/):
   - star-rating.blade.php
     * Interactive star selection
     * Readonly star display
     * Props: value, max, readonly, size

   - photo-uploader.blade.php
     * Multi-photo upload interface
     * Preview thumbnails
     * Remove buttons

   - review-summary.blade.php
     * Review statistics
     * Average rating
     * Total reviews
     * Rating breakdown

6. JavaScript (resources/js/reviews.js):
   - Star rating interaction
     * Click to select stars
     * Hover effect
     * Update hidden input value

   - Photo upload
     * Drag and drop
     * File validation (type, size)
     * Preview images
     * Remove uploaded photos
     * Max 5 photos enforcement

   - Character counter
     * Live count for title and description
     * Warning when near limit

   - Form validation
     * Required fields check
     * Rating validation
     * Photo size/type validation
     * Submit prevention if invalid

   - Helpful vote
     * AJAX request
     * Update count
     * Disable button after vote
     * Show login prompt if not authenticated

   - Report review
     * Show report modal
     * Reason selection
     * Submit report

   - Edit/Delete confirmation
     * Confirm before delete
     * SweetAlert2 dialogs

7. Validation Rules:
   - Create review:
     * rating: required, integer, min:1, max:5
     * title: required, string, max:100
     * review: required, string, max:500
     * tour_type: nullable, in:Solo,Couple,Family,Friends,Business
     * photos.*: nullable, image, max:5120 (5MB), mimes:jpg,jpeg,png
     * recommend: required, boolean

   - Specific ratings:
     * communication: nullable, integer, min:1, max:5
     * punctuality: nullable, integer, min:1, max:5
     * knowledge: nullable, integer, min:1, max:5
     * value: nullable, integer, min:1, max:5

   - Report:
     * reason: required, in:spam,inappropriate,fake,other
     * description: required_if:reason,other

8. Business Logic:
   - Rating Calculation:
     * Average = SUM(all ratings) / COUNT(ratings)
     * Round to 2 decimal places
     * Update guide/agency rating field
     * Update reviews_count

   - Review Moderation:
     * All reviews start as pending
     * Admin must approve/reject
     * Approved reviews visible publicly
     * Rejected reviews not shown

   - Helpful Votes:
     * Users can vote once per review
     * Store helpful votes in separate table
     * Display total helpful count

   - Photo Processing:
     * Resize images (max 1200px width)
     * Compress to reduce size
     * Store in storage/app/public/reviews
     * Create database records

9. Authorization:
   - Only users with completed bookings can review
   - Can only review once per booking
   - Can only edit/delete own reviews
   - Cannot review self (if guide/agency)
   - Guides/agencies can respond to their reviews

10. Email Notifications:
    - NewReviewReceived (to guide/agency)
      * Notification of new review
      * Rating and preview
      * Link to view full review

    - ReviewApproved (to user)
      * Review published notification

    - ReviewRejected (to user)
      * Review not approved
      * Reason for rejection

    - ReviewResponse (to user)
      * Guide/agency responded
      * Link to view response

11. Database Optimization:
    - Index on reviewable_type, reviewable_id
    - Index on user_id
    - Index on status
    - Eager load user, images, reviewable

12. Display Logic:
    - Sort reviews:
      * Most recent first (default)
      * Highest rated
      * Lowest rated
      * Most helpful

    - Filter reviews:
      * By rating (5 stars, 4 stars, etc.)
      * By tour type
      * With photos only
      * Verified bookings only

13. SEO:
    - Rich snippets for reviews (Review schema)
    - Aggregate rating display
    - Review count in meta

Ensure photo optimization, spam prevention, and proper moderation tools. Use consistent styling and responsive design."


STEP 10: Subscription System
============================
Context: Users purchase subscriptions to view contact information of guides and agencies.

Requirements:
- Multiple subscription plans
- View tracking
- Payment processing
- Subscription management
- Renewal and cancellation

Prompt:
"Create subscription system for AroundUz:

1. Routes (web.php - auth required):
   - GET /subscriptions - subscription plans page
   - GET /subscriptions/plans - view all plans
   - GET /subscriptions/{planId}/purchase - purchase page
   - POST /subscriptions/{planId}/checkout - process checkout
   - GET /subscriptions/checkout/success - payment success
   - GET /subscriptions/checkout/cancel - payment cancelled
   - GET /subscriptions/my-subscriptions - user's subscriptions
   - GET /subscriptions/{id} - subscription details
   - POST /subscriptions/{id}/cancel - cancel subscription
   - POST /subscriptions/{id}/renew - renew subscription
   - GET /subscriptions/{id}/invoice - download invoice

2. SubscriptionController methods:
   - index()
     * Show all subscription plans
     * Highlight popular plan
     * Show features comparison

   - plans()
     * API endpoint returning plans data

   - showPurchasePage($planId)
     * Fetch plan details
     * Show purchase form
     * Display plan features
     * Payment method selection

   - checkout($planId, Request $request)
     * Validate payment method
     * Create payment record
     * Process payment (Stripe/PayPal)
     * Create user_subscription record
     * Create invoice
     * Send confirmation email
     * Redirect to success page

   - checkoutSuccess(Request $request)
     * Display success message
     * Show subscription details
     * Download invoice link

   - checkoutCancel(Request $request)
     * Display cancellation message
     * Return to plans page link

   - mySubscriptions()
     * Fetch user's subscriptions (active and expired)
     * Show active subscription with views remaining
     * Show subscription history

   - show($id)
     * Authorize: user owns subscription
     * Fetch subscription with plan details
     * Show full subscription details
     * View usage history (contact views)

   - cancel($id)
     * Authorize: user owns subscription
     * Check if cancellation allowed
     * Update status to cancelled
     * Process pro-rated refund (if applicable)
     * Send cancellation confirmation

   - renew($id)
     * Authorize: user owns subscription
     * Create new subscription record
     * Process payment
     * Extend expiry date or reset views

3. Admin SubscriptionPlanController methods:
   - index() - list all plans
   - create() - create plan form
   - store(Request $request) - save plan
   - edit($id) - edit plan form
   - update($id, Request $request) - update plan
   - destroy($id) - delete plan (soft delete)
   - toggleStatus($id) - activate/deactivate plan

4. Blade Views (resources/views/subscriptions/):
   - plans.blade.php (Subscription Plans)
     * Page header
       - "Choose Your Plan" heading
       - "Unlock contact information and connect with guides" subtitle

     * Plan cards (grid - 4 plans)
       Each plan card:
       - Popular badge (for monthly plan)
       - Plan name (e.g., "5 Views Pack")
       - Plan type label (One-time / Weekly / Monthly)
       - Price (large, bold)
         * For views: "$9.99" with "5 contact views" below
         * For recurring: "$29.99/month" with "30 views per month" below
       - Features list (checkmarks)
         * Contact information access
         * Direct messaging
         * View history
         * Email support
         * For higher tiers: Priority support, etc.
       - Views remaining indicator (if applicable)
       - Duration (e.g., "Valid for 30 days")
       - "Choose Plan" button (primary color)
       - "Current Plan" badge (if user has this plan)

     * Plan comparison table (below cards)
       - Feature rows
       - Plan columns
       - Checkmarks for included features

     * FAQ section
       - "How do subscriptions work?"
       - "Can I cancel anytime?"
       - "What happens when I run out of views?"
       - "Do unused views roll over?"

     * CTA section
       - "Start connecting with local guides today"
       - Sign up button (if not logged in)

   - purchase.blade.php (Purchase Page)
     * Breadcrumb

     * Order summary (sidebar - sticky)
       - Plan name
       - Plan type
       - Features list
       - Price breakdown
         * Plan price
         * Tax (if applicable)
         * Total
       - "Complete Purchase" button

     * Payment form (main)
       - Billing information
         * Name (pre-filled)
         * Email (pre-filled)
         * Phone
         * Country

       - Payment method tabs
         Tab 1: Credit/Debit Card
         - Card number
         - Expiry and CVV
         - Cardholder name
         - Save card checkbox

         Tab 2: PayPal
         - PayPal button

         Tab 3: Bank Transfer
         - Bank details display
         - Upload proof option

       - Coupon code
         * Input field
         * "Apply" button
         * Discount display (if valid)

       - Terms checkbox
         * "I agree to terms and conditions"

       - Submit button
         * "Pay Now" with loading state

   - success.blade.php (Payment Success)
     * Success icon/animation
     * "Subscription Activated!" heading
     * Success message

     * Subscription details card
       - Plan name
       - Views remaining
       - Expires on date
       - Invoice number

     * Quick actions
       - Download Invoice button
       - View My Subscriptions button
       - Start Browsing button

     * What's next
       - Instructions on how to use views
       - Link to browse guides/agencies

   - cancel.blade.php (Payment Cancelled)
     * Cancelled icon
     * "Payment Cancelled" heading
     * Message explaining cancellation
     * "Back to Plans" button
     * "Need Help?" contact link

   - my-subscriptions.blade.php (User Subscriptions)
     * Page header
       - "My Subscriptions" heading
       - "Buy New Subscription" button

     * Active subscription card (prominent)
       - Plan name and type
       - Status badge (Active, Expired, Cancelled)
       - Views remaining meter (circular progress)
         * X of Y views used
         * Percentage
       - Expiry date
       - Renew button (if expired)
       - Cancel button (if active)
       - View Details link

     * Subscription history table
       - Columns: Plan, Type, Purchase Date, Status, Views Used, Expires, Actions
       - Rows with subscription data
       - View button, Download Invoice button
       - Pagination

     * Usage statistics
       - Total views used (lifetime)
       - Current month views
       - Chart showing usage over time

     * Empty state (if no subscriptions)
       - Icon
       - "No active subscriptions"
       - "Browse Plans" button

   - show.blade.php (Subscription Details)
     * Breadcrumb

     * Subscription info card
       - Plan name and type
       - Status badge
       - Purchase date
       - Start and end dates
       - Views: used / total
       - Progress bar

     * Payment information
       - Amount paid
       - Payment method
       - Transaction ID
       - Invoice number
       - Download Invoice button

     * Usage history table
       - Date and time
       - Viewed: Guide/Agency name (with link)
       - Remaining views after action

     * Actions
       - Renew Subscription button (if expired)
       - Cancel Subscription button (if active)
       - Buy Another Plan button

   - admin/plans/index.blade.php (Admin - Manage Plans)
     * "Add New Plan" button
     * Plans table
       - Columns: Name, Type, Price, Views, Duration, Status, Actions
       - Edit and Delete buttons
       - Toggle Status button

   - admin/plans/create.blade.php (Admin - Create Plan)
     * Form:
       - Name
       - Slug (auto-generated)
       - Type (contact_views, weekly, monthly, yearly)
       - Price
       - Currency
       - Views limit (for view-based plans)
       - Duration days (for time-based plans)
       - Features (repeater field)
       - Is active checkbox
       - Order (for display sorting)
     * Submit button

   - admin/plans/edit.blade.php (Admin - Edit Plan)
     * Same form as create with existing data

5. Components (resources/views/components/subscription/):
   - plan-card.blade.php
     * Reusable plan card
     * Props: plan, current_plan, popular

   - views-meter.blade.php
     * Circular progress showing views used/remaining
     * Props: used, total

   - feature-comparison.blade.php
     * Plan comparison table

6. JavaScript (resources/js/subscriptions.js):
   - Plan selection
     * Highlight selected plan
     * Update price on coupon apply

   - Payment processing
     * Stripe Elements integration
     * PayPal SDK
     * Form validation
     * Loading states

   - Coupon code
     * AJAX validation
     * Apply discount
     * Show discount amount

   - Cancel subscription
     * Confirmation dialog
     * Reason selection modal
     * Process cancellation

7. API Endpoints:
   - POST /api/subscriptions/validate-coupon
     * Input: coupon code, plan_id
     * Return: valid, discount_amount, new_total

   - GET /api/subscriptions/usage-stats
     * Return: usage statistics for charts

8. Validation Rules:
   - Purchase:
     * plan_id: required, exists:subscription_plans,id
     * payment_method: required, in:card,paypal,bank_transfer
     * billing_name: required
     * billing_email: required, email
     * billing_phone: required
     * coupon_code: nullable
     * terms: required, accepted

   - Cancel:
     * reason: required, in:too_expensive,not_using,found_alternative,other
     * feedback: required_if:reason,other

9. Business Logic:
   - Subscription Creation:
     * Calculate starts_at (now) and expires_at (based on duration)
     * Set views_remaining (based on plan)
     * Set status to active
     * Process payment first

   - View Tracking:
     * When user views contact:
       - Check if user has active subscription
       - Check if views_remaining > 0
       - Decrement views_remaining
       - Create contact_view record
       - If views_remaining reaches 0, prompt to renew

   - Expiry Handling:
     * Cron job to check expired subscriptions
     * Update status to expired
     * Send expiry notification 3 days before

   - Cancellation:
     * Update status to cancelled
     * Calculate pro-rated refund (optional)
     * Process refund
     * Send cancellation email

   - Renewal:
     * Can renew before or after expiry
     * If before expiry: extend expiry date
     * If after expiry: new subscription period
     * Reset views_remaining (for view-based)

10. Payment Integration:
    - Stripe:
      * Create checkout session
      * Handle webhooks (payment.succeeded, payment.failed)
      * Process refunds

    - PayPal:
      * Create order
      * Capture payment
      * Handle IPN notifications

11. Email Notifications:
    - SubscriptionPurchased
      * Welcome message
      * Subscription details
      * How to use guide

    - SubscriptionExpiring
      * 3 days before expiry
      * Renewal link

    - SubscriptionExpired
      * Expired notification
      * Renewal options

    - SubscriptionCancelled
      * Cancellation confirmation
      * Feedback request

    - ViewsRunningLow
      * When views < 5
      * Upgrade/renew options

12. Database:
    - Create indexes:
      * user_subscriptions: (user_id, status)
      * contact_views: (user_id, viewable_type, viewable_id)

    - Scheduled tasks:
      * Check expired subscriptions daily
      * Send expiry reminders
      * Clean up old cancelled subscriptions

13. Analytics:
    - Track:
      * Conversion rate (plan views to purchases)
      * Popular plans
      * Average views used per subscription
      * Churn rate
      * Renewal rate

Use clear pricing display, easy payment flow, and transparent cancellation policy. Ensure secure payment handling."


STEP 11: Boost/VIP System
=========================
Context: Guides and agencies can purchase boost plans to get premium placement in search results and listings.

Requirements:
- Multiple boost tiers (VIP, Featured, Sponsor, Top Search)
- Duration-based plans
- Priority positioning in search
- Analytics tracking
- Boost management dashboard

Prompt:
"Create profile boost system for guides and agencies on AroundUz:

1. Routes (web.php - auth required, role: guide/agency):
   - GET /boost - boost plans page
   - GET /boost/plans - view all boost plans
   - GET /boost/{planId}/purchase - purchase page
   - POST /boost/{planId}/checkout - process checkout
   - GET /boost/checkout/success - payment success
   - GET /boost/checkout/cancel - payment cancelled
   - GET /boost/my-boosts - active and past boosts
   - GET /boost/{id} - boost details and analytics
   - POST /boost/{id}/cancel - cancel boost
   - GET /boost/{id}/extend - extend boost duration
   - POST /boost/{id}/extend - process extension

2. BoostController methods:
   - index()
     * Show all boost plans with features
     * Show current boost status
     * Display position priority benefits

   - plans()
     * Return boost plans data (API)

   - showPurchasePage($planId)
     * Fetch plan details
     * Show purchase form
     * Calculate boost period
     * Show expected benefits (est. views, clicks)

   - checkout($planId, Request $request)
     * Validate boostable (guide or agency)
     * Validate payment
     * Process payment
     * Create profile_boost record
     * Set starts_at (now) and expires_at
     * Create payment and invoice
     * Send confirmation email
     * Redirect to success

   - checkoutSuccess()
     * Show success message
     * Display boost activation details
     * Show when boost starts

   - checkoutCancel()
     * Show cancellation message

   - myBoosts()
     * Fetch all boosts (active, expired, cancelled)
     * Show active boost details
     * Show analytics summary
     * Show boost history

   - show($id)
     * Authorize: user owns boost
     * Fetch boost with analytics
     * Show detailed stats:
       - Views count
       - Clicks count
       - Profile views timeline
       - Conversion metrics
     * Show boost details

   - cancel($id)
     * Authorize: user owns boost
     * Check if cancellation allowed
     * Process pro-rated refund (optional)
     * Update status to cancelled
     * Send confirmation

   - showExtendPage($id)
     * Show extend boost form
     * Calculate extension price

   - extend($id, Request $request)
     * Validate extension duration
     * Process payment
     * Update expires_at
     * Send confirmation

3. Admin BoostPlanController methods:
   - index() - list all boost plans
   - create() - create plan form
   - store(Request $request) - save plan
   - edit($id) - edit plan form
   - update($id, Request $request) - update plan
   - destroy($id) - delete plan
   - toggleStatus($id) - activate/deactivate

4. Blade Views (resources/views/boost/):
   - plans.blade.php (Boost Plans)
     * Page header
       - "Boost Your Profile" heading
       - "Get more visibility and bookings" subtitle
       - Current boost status badge (if active)

     * Comparison table (top section)
       - Feature comparison grid
       - Columns: Basic (Free), VIP, Featured, Sponsor, Top Search
       - Rows:
         * Position Priority (numbers: 0, 10, 20, 30, 40)
         * Search Placement (Normal, Top 20, Top 10, Top 5, #1)
         * Badge Display (None, VIP, Featured, Sponsor, Premium)
         * Profile Highlighting (No, Yes, Yes, Yes, Yes)
         * Analytics Dashboard (Basic, Advanced, Advanced, Premium, Premium)
         * Listing Page Display (Normal, Enhanced, Enhanced, Banner, Banner)
         * Support Priority (Normal, Priority, Priority, VIP, VIP)
         * Featured in Newsletter (No, No, Maybe, Yes, Yes)

     * Plan cards (4 cards in grid)
       Each card:
       - Recommended badge (for VIP plan)
       - Plan icon/illustration
       - Plan name (e.g., "VIP Boost")
       - Tagline (e.g., "Stand out from the crowd")
       - Price (large, bold)
         * "$49/month" or "$29/week"
       - Duration (7 days, 30 days, 90 days options)
       - Key benefits list (bullet points)
         * Priority in search results
         * VIP badge on profile
         * 3x more visibility
         * Advanced analytics
         * Priority support
       - Expected results
         * "~200% more profile views"
         * "~150% more bookings"
       - "Choose Plan" button
       - "Current Plan" badge (if active)

     * How it works section
       - Step 1: Choose your plan
       - Step 2: Complete payment
       - Step 3: Boost activates immediately
       - Step 4: Track your performance

     * Success stories (testimonials)
       - Before/After stats from other guides/agencies
       - Quotes and photos

     * FAQ section
       - "How long does boost last?"
       - "Can I cancel anytime?"
       - "What happens when boost expires?"
       - "Can I upgrade my boost?"

   - purchase.blade.php (Purchase Page)
     * Breadcrumb

     * Selected plan summary (sidebar - sticky)
       - Plan name and icon
       - Features list
       - Duration selection
         * Radio buttons: 7 days, 30 days, 90 days
         * Price updates on selection
       - Price breakdown
         * Plan price
         * Duration multiplier
         * Tax (if applicable)
         * Total
       - Expected boost period
         * "Boost active from [date] to [date]"
       - "Complete Purchase" button

     * Your profile preview (main)
       - "How your profile will look" heading
       - Profile card mockup with boost badge
       - Position indicator
         * "You'll appear in top 10 results"

     * Payment form
       - Billing information (pre-filled)
       - Payment method tabs
       - Coupon code field
       - Terms checkbox
       - Submit button

   - success.blade.php (Payment Success)
     * Success animation
     * "Boost Activated!" heading

     * Boost details card
       - Plan name and icon
       - Active badge
       - Start and end dates
       - Features activated

     * What's next
       - "Your profile is now boosted"
       - "Track your performance in dashboard"
       - Instructions on maximizing boost

     * Quick actions
       - View Analytics button
       - Edit Profile button (optimize for boost)
       - Share Profile button

   - my-boosts.blade.php (Boost Dashboard)
     * Page header
       - "My Boosts" heading
       - "Buy New Boost" button

     * Active boost card (prominent, full width)
       - Plan name and icon
       - Status badge (Active, Expiring Soon, Expired)
       - Circular progress (time remaining)
         * Days remaining / Total days
         * Percentage
       - Expires on date (countdown)
       - Quick stats
         * Profile views (with growth percentage)
         * Clicks (with growth percentage)
         * Conversion rate
       - Chart showing views over boost period
       - Actions
         * View Full Analytics button
         * Extend Boost button
         * Cancel Boost button

     * Performance metrics (3 cards)
       Card 1: Total Views
       - Number with trend arrow
       - Comparison to pre-boost

       Card 2: Click-through Rate
       - Percentage with trend arrow
       - Industry average comparison

       Card 3: Bookings Increase
       - Number with trend arrow
       - Revenue impact

     * Boost history table
       - Columns: Plan, Duration, Start Date, End Date, Status, Views, Clicks, Actions
       - View Analytics button per row
       - Download Report button
       - Pagination

     * Recommendations
       - "Boost expiring soon? Extend now for 10% off"
       - "Upgrade to Sponsor for 2x visibility"

     * Empty state (if no boosts)
       - Icon
       - "No active boosts"
       - "Start boosting your profile today"
       - "View Plans" button

   - show.blade.php (Boost Analytics)
     * Breadcrumb

     * Boost info header
       - Plan name and icon
       - Status badge
       - Date range (start to end)
       - Days active / Total days

     * Key metrics (4 cards)
       - Total Profile Views
       - Total Clicks
       - Click-through Rate
       - Estimated Revenue Impact

     * Charts section
       Chart 1: Views Over Time (line chart)
       - Daily profile views
       - Compare to average (before boost)

       Chart 2: Traffic Sources (pie chart)
       - Search results
       - Featured listings
       - Direct links
       - Referrals

       Chart 3: Engagement Metrics (bar chart)
       - Profile views
       - Gallery views
       - Contact views
       - Booking inquiries

     * Performance comparison table
       - Metrics: Before Boost, During Boost, Change (%)
       - Rows: Views, Clicks, CTR, Bookings

     * Activity log
       - Chronological list of profile interactions
       - View, click, favorite, booking events
       - Timestamps

     * Actions
       - Extend Boost button
       - Download Report (PDF) button
       - Share Results button

   - extend.blade.php (Extend Boost)
     * Current boost summary
       - Days remaining
       - Current plan

     * Extension options
       - Add 7 days: $X
       - Add 30 days: $Y
       - Add 90 days: $Z
       - Radio button selection

     * New expiry date preview
       - "Boost will now expire on [new date]"

     * Payment form
       - Use saved payment method
       - Or enter new payment details

     * Submit button

   - admin/plans/index.blade.php (Admin - Boost Plans)
     * "Add New Plan" button
     * Plans table
       - Columns: Name, Type, Price, Duration, Priority, Status, Actions
       - Edit and Delete buttons
       - Toggle Status button

   - admin/plans/create.blade.php (Admin - Create Boost Plan)
     * Form:
       - Name
       - Slug
       - Type (vip, featured, sponsor, top_search)
       - Price
       - Currency
       - Duration (days)
       - Position Priority (integer - higher = better)
       - Features (repeater)
       - Is Active checkbox
       - Order
     * Submit button

   - admin/plans/edit.blade.php (Admin - Edit Plan)
     * Same as create with existing data

5. Components (resources/views/components/boost/):
   - plan-card.blade.php
     * Reusable boost plan card
     * Props: plan, current_boost, recommended

   - analytics-chart.blade.php
     * Chart component (line, bar, pie)
     * Props: type, data, labels

   - metric-card.blade.php
     * Stat card with trend indicator
     * Props: title, value, change_percent, icon

   - boost-badge.blade.php
     * Visual boost badge for profiles
     * Props: boost_type

6. JavaScript (resources/js/boost.js):
   - Duration selection
     * Update price on duration change
     * Calculate end date preview

   - Analytics charts
     * Chart.js integration
     * Interactive tooltips
     * Responsive charts

   - Countdown timer
     * Real-time countdown for expiring boosts
     * Visual progress bar

   - Payment processing
     * Stripe integration
     * Form validation

   - Extend boost
     * Calculate extension price
     * Preview new expiry

   - Cancel confirmation
     * Modal with reason selection
     * Refund calculation display

7. Search Integration:
   - Modify guide/agency search queries:
     * Check for active boosts
     * Order by position_priority DESC first
     * Then apply regular sorting

   - Query example:
```php
     $guides = Guide::select('guides.*')
         ->leftJoin('profile_boosts', function($join) {
             $join->on('profile_boosts.boostable_id', '=', 'guides.id')
                  ->where('profile_boosts.boostable_type', '=', 'Guide')
                  ->where('profile_boosts.status', '=', 'active')
                  ->where('profile_boosts.expires_at', '>', now());
         })
         ->leftJoin('boost_plans', 'profile_boosts.boost_plan_id', '=', 'boost_plans.id')
         ->orderByRaw('COALESCE(boost_plans.position_priority, 0) DESC')
         ->orderBy('guides.rating', 'desc')
         ->paginate(12);
```

8. Analytics Tracking:
   - Track profile views:
     * Increment views_count on profile_boosts
     * Log in activity_logs
     * Store daily aggregates

   - Track clicks:
     * Increment clicks_count when user clicks "View Profile"
     * Log source (search, featured, category)

   - Calculate CTR:
     * CTR = (clicks / views) Ã— 100

   - Track conversions:
     * Count bookings during boost period
     * Attribute revenue to boost

9. Validation Rules:
   - Purchase:
     * plan_id: required, exists:boost_plans,id
     * duration: required, in:7,30,90
     * payment_method: required
     * terms: required, accepted

   - Extend:
     * boost_id: required, exists, active
     * additional_days: required, in:7,30,90
     * payment_method: required

10. Business Logic:
    - Boost Activation:
      * Process payment first
      * Create profile_boost record
      * Set starts_at = now()
      * Set expires_at = starts_at + duration
      * Set status = active
      * Link to payment

    - Expiry Handling:
      * Cron job checks expired boosts daily
      * Update status to expired
      * Send expiry notification 3 days before
      * Remove from priority search

    - Cancellation:
      * Calculate remaining days
      * Calculate pro-rated refund (optional policy)
      * Update status to cancelled
      * Process refund
      * Remove from priority search immediately

    - Extension:
      * Add days to expires_at
      * Process payment for extension
      * Send confirmation

11. Email Notifications:
    - BoostActivated
      * Welcome to boosted status
      * Tips to maximize boost
      * Link to analytics dashboard

    - BoostExpiringSoon
      * 3 days before expiry
      * Extend now offer
      * Performance summary

    - BoostExpired
      * Boost has ended
      * Performance summary
      * Renewal options with discount

    - BoostPerformanceReport
      * Weekly summary during active boost
      * Key metrics
      * Recommendations

    - BoostCancelled
      * Cancellation confirmation
      * Refund details (if applicable)

12. Cron Jobs:
    - Daily:
      * Check expired boosts
      * Update statuses
      * Send expiry warnings
      * Clean up old cancelled boosts

    - Weekly:
      * Send performance reports to active boost users
      * Calculate aggregate statistics

13. Database Optimization:
    - Indexes:
      * profile_boosts: (boostable_type, boostable_id, status, expires_at)
      * profile_boosts: (status, expires_at)

    - Caching:
      * Cache boosted profile IDs for search queries
      * Cache for 1 hour
      * Clear on boost activation/expiry

14. Admin Features:
    - View all active boosts
    - Boost revenue reports
    - Popular boost plans
    - Conversion rates
    - Manually activate/deactivate boosts
    - Refund management

15. Display Badges:
    - VIP Badge: Gold crown icon
    - Featured Badge: Blue star icon
    - Sponsor Badge: Purple badge icon
    - Top Search Badge: Red flame icon

    - Badge placement:
      * On profile cards (top right corner)
      * On profile header (next to name)
      * In search results (prominent)

Ensure fair rotation among same-tier boosts. Track analytics accurately. Provide clear value demonstration."


STEP 12: Training Course System
===============================
Context: Platform for guides and agencies to take certification courses and training.

Requirements:
- Course catalog with categories
- Video lessons and modules
- Progress tracking
- Quizzes and assessments
- Certificate generation
- Course reviews

Prompt:
"Create comprehensive training course platform for AroundUz:

1. Routes (web.php):
   Public routes:
   - GET /courses - course catalog
   - GET /courses/category/{slug} - courses by category
   - GET /courses/{slug} - course detail page

   Auth required:
   - POST /courses/{id}/enroll - enroll in course
   - GET /my-courses - enrolled courses
   - GET /learn/courses/{id} - course player
   - GET /learn/courses/{id}/lesson/{lessonId} - specific lesson
   - POST /learn/lessons/{id}/complete - mark lesson complete
   - POST /learn/courses/{id}/quiz - submit quiz
   - GET /certificates - my certificates
   - GET /certificates/{id} - view certificate
   - GET /certificates/{id}/download - download PDF
   - POST /courses/{id}/review - submit course review

2. CourseController methods:
   - index(Request $request)
     * Fetch courses with filters: category, level, price_range, sort
     * Show featured courses
     * Pagination

   - category($slug)
     * Courses in specific category

   - show($slug)
     * Fetch course with: modules, lessons, instructor, reviews
     * Check if user enrolled
     * Show course details
     * Display curriculum

   - enroll($id, Request $request)
     * Check if already enrolled
     * Validate payment (if paid course)
     * Process payment
     * Create course_enrollment record
     * Send welcome email
     * Redirect to course player

   - myCourses()
     * Fetch user's enrolled courses
     * Show progress for each
     * Filter: in progress, completed

   - player($id)
     * Authorize: user enrolled in course
     * Fetch course with modules and lessons
     * Get user's progress
     * Show course player interface

   - showLesson($courseId, $lessonId)
     * Authorize: enrolled and lesson unlocked
     * Fetch lesson with content
     * Mark as started
     * Update last accessed
     * Show lesson content

   - completeLesson($lessonId)
     * Authorize: user enrolled
     * Update lesson_progress to completed
     * Calculate course progress percentage
     * Check if course completed
     * If completed: generate certificate

   - submitQuiz($courseId, Request $request)
     * Validate answers
     * Calculate score
     * Store quiz result
     * Unlock next module if passed

3. CertificateController methods:
   - index()
     * List all user's certificates
     * Show earned and pending

   - show($id)
     * Authorize: user owns certificate
     * Display certificate preview

   - download($id)
     * Authorize: user owns certificate
     * Generate PDF certificate
     * Return download response

4. CourseReviewController methods:
   - store($courseId, Request $request)
     * Authorize: user completed course
     * Validate rating and review
     * Create course_review record
     * Update course average rating
     * Send notification to instructor

5. Admin CourseManagementController methods:
   - index() - list all courses
   - create() - course creation form
   - store(Request $request) - save course
   - edit($id) - edit course
   - update($id, Request $request) - update course
   - destroy($id) - delete course

   - moduleCreate($courseId) - add module
   - moduleUpdate($moduleId, Request $request) - update module
   - moduleDestroy($moduleId) - delete module

   - lessonCreate($moduleId) - add lesson
   - lessonUpdate($lessonId, Request $request) - update lesson
   - lessonDestroy($lessonId) - delete lesson

6. Blade Views (resources/views/courses/):
   - index.blade.php (Course Catalog)
     * Page header
       - "Professional Training & Certification" heading
       - "Enhance your skills with expert-led courses" subtitle
       - Search bar

     * Filters (sidebar)
       - Category checkboxes
         * Guide Certification
         * First Aid & Safety
         * Language Skills
         * Hospitality
         * Marketing
       - Level radio buttons
         * Beginner
         * Intermediate
         * Advanced
       - Price range
         * Free
         * Paid
         * Min-Max slider
       - Duration
         * < 5 hours
         * 5-10 hours
         * 10-20 hours
         * 20+ hours
       - Rating (minimum)
       - Apply Filters button

     * Sort dropdown
       - Most Popular
       - Highest Rated
       - Newest First
       - Price: Low to High

     * Course cards grid (3 columns)
       Each card:
       - Course thumbnail/image
       - Category badge
       - Best Seller badge (if popular)
       - Course title
       - Instructor name and photo
       - Star rating with count
       - Duration (e.g., "12 hours")
       - Level badge (Beginner/Intermediate/Advanced)
       - Price (or "Free")
       - Certification badge (if provides certificate)
       - Enrollment count (e.g., "1,234 students")
       - Brief description (truncated)
       - View Course button
       - Wishlist heart icon

     * Pagination
     * Featured courses section at top

   - show.blade.php (Course Detail)
     * Breadcrumb

     * Course header
       - Course title
       - Tagline/subtitle
       - Rating and reviews count
       - Enrollment count
       - Last updated date
       - Language
       - Certificate badge

     * Video preview
       - Course intro video
       - Play button overlay

     * Tabs (sticky)
       - Overview
       - Curriculum
       - Instructor
       - Reviews

     * Overview Tab (main content)
       - What you'll learn section
         * Bullet points of learning outcomes
       - Course description (full)
       - Requirements section
       - Who this course is for

     * Curriculum Tab
       - Modules accordion
       Each module:
       - Module number and title
       - Total lessons
       - Total duration
       - Lessons list (collapsible)
         Each lesson:
         - Lesson number and title
         - Type icon (video, reading, quiz)
         - Duration
         - Lock icon (if not enrolled)
         - Preview badge (for free lessons)

     * Instructor Tab
       - Instructor photo (large)
       - Name and title
       - Bio
       - Expertise areas
       - Stats: Courses taught, students, rating
       - Social links

     * Reviews Tab
       - Rating breakdown (visual)
       - Review filters (all stars)
       - Review list
         Each review:
         - User avatar and name
         - Rating stars
         - Review date
         - Review text
         - Helpful votes

     * Sidebar (sticky)
       - Price (large)
       - If not enrolled:
         * Enroll Now button (primary)
         * Add to Wishlist button
         * Gift this course link
         * Share buttons
       - If enrolled:
         * Continue Learning button
         * Progress percentage
         * Last accessed lesson

       - Course includes section
         * X hours on-demand video
         * X downloadable resources
         * Lifetime access
         * Certificate of completion
         * Access on mobile

       - Preview course button
       - 30-day money-back guarantee

   - player.blade.php (Course Player)
     * Sidebar (collapsible, left)
       - Course title
       - Progress bar (overall)
       - Modules and lessons tree
         Each lesson:
         - Checkmark (if completed)
         - Play icon
         - Lock icon (if locked)
         - Lesson title
         - Duration
         * Click to load lesson

     * Main content area
       - Video player (for video lessons)
         * Custom controls
         * Playback speed
         * Quality selection
         * Fullscreen
         * PIP mode
       - Reading content (for text lessons)
         * Rich text display
         * Images and formatting
       - Quiz interface (for quiz lessons)
         * Questions (multiple choice, true/false)
         * Submit button
         * Results display

       - Lesson navigation
         * Previous Lesson button
         * Next Lesson button
         * Mark as Complete checkbox

       - Tabs below content
         Tab 1: Overview
         - Lesson description
         - Learning objectives

         Tab 2: Resources
         - Downloadable files
         - External links
         - Additional reading

         Tab 3: Q&A
         - Questions from students
         - Instructor answers
         - Ask Question button

         Tab 4: Notes
         - Take notes section
         - Timestamp linking
         - Save notes

     * Top bar
       - Back to Course Details link
       - Course title
       - Current lesson title
       - Progress: X% complete
       - Settings icon
       - Exit course button

   - my-courses.blade.php (My Learning)
     * Page header
       - "My Courses" heading
       - Filter tabs: All, In Progress, Completed
       - Search my courses

     * Course cards (larger format)
       Each card:
       - Course thumbnail
       - Course title
       - Instructor
       - Progress bar with percentage
       - Last accessed: X days ago
       - Continue Learning button
       - Certificate button (if completed)
       - Time remaining estimate

     * Empty state (if no enrollments)
       - Illustration
       - "Start learning today"
       - Browse Courses button

   - certificates/index.blade.php (My Certificates)
     * Page header
       - "My Certificates" heading
       - Total certificates earned

     * Certificates grid
       Each certificate card:
       - Certificate thumbnail/preview
       - Course name
       - Issue date
       - Certificate number
       - Verification link
       - View button
       - Download button
       - Share buttons (LinkedIn, Facebook)

     * Verify certificate section
       - Input certificate number
       - Verify button
       - Public verification

   - certificates/show.blade.php (Certificate View)
     * Certificate display (full page)
       - Decorative border
       - AroundUz logo
       - "Certificate of Completion" heading
       - Recipient name (large)
       - "has successfully completed" text
       - Course name
       - Completion date
       - Instructor signature
       - Certificate number
       - QR code (for verification)
       - Verification URL

     * Actions
       - Download PDF button
       - Share on LinkedIn button
       - Print button
       - Back to Certificates button

   - admin/courses/index.blade.php (Admin - Courses)
     * "Add New Course" button
     * Courses table
       - Columns: Title, Category, Level, Price, Students, Rating, Status, Actions
       - Edit, Delete, View buttons
       - Toggle Active/Inactive
       - Enrollments link

   - admin/courses/create.blade.php (Admin - Create Course)
     * Multi-tab form
       Tab 1: Basic Info
       - Title, slug
       - Description
       - Category, level
       - Duration hours
       - Language
       - Price
       - Thumbnail upload
       - Preview video URL

       Tab 2: Curriculum
       - Add Module button
       - Modules list (drag to reorder)
         Each module:
         - Module title, description
         - Add Lesson button
         - Lessons list (drag to reorder)
           Each lesson:
           - Lesson title
           - Type (video, reading, quiz)
           - Content (video URL, text editor, quiz builder)
           - Duration
           - Is free preview checkbox

       Tab 3: Instructor
       - Instructor name
       - Instructor bio
       - Instructor photo

       Tab 4: Settings
       - Is certified course checkbox
       - Certificate template
       - Requirements
       - Learning outcomes
       - Is active checkbox

     * Save Draft button
     * Publish button

   - admin/courses/edit.blade.php
     * Same as create with existing data
     * Additional: View enrollments, Analytics

7. Components (resources/views/components/courses/):
   - course-card.blade.php
     * Reusable course card

   - lesson-item.blade.php
     * Lesson list item with icons

   - progress-bar.blade.php
     * Course progress indicator

   - quiz-question.blade.php
     * Quiz question component

8. JavaScript (resources/js/courses.js):
   - Video player
     * Video.js integration
     * Track watch progress
     * Auto-save position
     * Resume from last position

   - Lesson navigation
     * Load lessons via AJAX
     * Update sidebar highlights
     * Update progress bar

   - Quiz functionality
     * Question selection
     * Answer validation
     * Score calculation
     * Result display

   - Progress tracking
     * Mark lesson complete
     * Update progress percentage
     * Celebrate milestones

   - Notes taking
     * Rich text editor
     * Auto-save
     * Timestamp linking

   - Certificate generation
     * Trigger on course completion
     * Show celebration modal
     * Download prompt

9. Validation Rules:
   - Course creation:
     * title: required, max:255
     * description: required
     * category: required, in:guide_certification,first_aid,language,hospitality,safety,marketing
     * level: required, in:beginner,intermediate,advanced
     * price: required, numeric, min:0
     * duration_hours: required, integer, min:1
     * thumbnail: required, image, max:2048

   - Enrollment:
     * course_id: required, exists
     * payment_method: required_if:price,>,0

   - Review:
     * rating: required, integer, min:1, max:5
     * review: required, min:20, max:500

10. Business Logic:
    - Enrollment:
      * Check if already enrolled
      * Process payment if paid course
      * Create enrollment record
      * Set status: enrolled
      * Unlock first module

    - Progress Tracking:
      * Calculate: (completed_lessons / total_lessons) Ã— 100
      * Update progress_percentage
      * Update course_enrollment

    - Lesson Completion:
      * Mark lesson_progress as completed
      * Unlock next lesson
      * Update overall progress
      * Check if module completed
      * Check if course completed

    - Certificate Generation:
      * Trigger when progress = 100%
      * Generate unique certificate number
      * Create course_certificate record
      * Generate PDF
      * Send email with certificate

    - Quiz Handling:
      * Validate answers
      * Calculate score
      * Pass mark: 80%
      * Allow retakes if failed
      * Track attempts

11. Certificate Generation:
    - Use DOMPDF for PDF generation
    - Template with:
      * Course name
      * Student name
      * Completion date
      * Instructor signature
      * Certificate number
      * QR code for verification
      * Verification URL

    - Store PDF in storage
    - Create database record
    - Email to user

12. Video Hosting:
    - Support for:
      * YouTube embed
      * Vimeo embed
      * Self-hosted (AWS S3)

    - Track:
      * Watch time
      * Completion rate
      * Drop-off points

13. Email Notifications:
    - EnrollmentConfirmation
      * Welcome to course
      * Getting started guide
      * First lesson link

    - LessonReminder
      * Haven't watched in 3 days
      * Continue where you left off

    - CourseCompleted
      * Congratulations
      * Certificate attached
      * Share certificate prompt

    - CertificateIssued
      * Certificate PDF attachment
      * Verification link
      * Social sharing links

14. Analytics:
    - Track per course:
      * Total enrollments
      * Completion rate
      * Average rating
      * Revenue

    - Track per student:
      * Courses enrolled
      * Courses completed
      * Total learning hours
      * Certificates earned

15. Gamification:
    - Badges for:
      * First course completed
      * 5 courses completed
      * 100% completion rate
      * Fast learner (complete in X days)

    - Leaderboard
    - Streak tracking

Ensure video DRM if needed. Implement quiz randomization. Provide course analytics to instructors."


STEP 13: Payment System
=======================
Context: Centralized payment processing for bookings, subscriptions, boosts, and courses.

Requirements:
- Multiple payment gateways (Stripe, PayPal)
- Payment method storage
- Invoice generation
- Refund processing
- Coupon/discount system
- Payment history

Prompt:
"Create comprehensive payment system for AroundUz:

1. Routes (web.php - auth required):
   - GET /payment/methods - saved payment methods
   - POST /payment/methods - add payment method
   - DELETE /payment/methods/{id} - remove payment method
   - POST /payment/methods/{id}/default - set as default
   - GET /payment/history - payment history
   - GET /payment/{id} - payment details
   - GET /payment/{id}/invoice - view invoice
   - GET /payment/{id}/invoice/download - download invoice PDF
   - POST /payment/{id}/refund-request - request refund
   - POST /payment/validate-coupon - validate coupon code

   Webhooks (no auth):
   - POST /webhooks/stripe - Stripe webhooks
   - POST /webhooks/paypal - PayPal IPN

2. PaymentController methods:
   - methods()
     * Fetch user's saved payment methods
     * Show cards with masked numbers
     * Show default card

   - storeMethod(Request $request)
     * Validate payment method
     * Tokenize card with Stripe
     * Store payment_card record
     * Return success

   - destroyMethod($id)
     * Authorize: user owns card
     * Delete payment_card record
     * Remove from Stripe

   - setDefaultMethod($id)
     * Authorize: user owns card
     * Update all cards to not default
     * Set this card as default

   - history(Request $request)
     * Fetch user's payments
     * Filter: status, payable_type, date_range
     * Pagination

   - show($id)
     * Authorize: user owns payment
     * Fetch payment with invoice
     * Show payment details

   - showInvoice($id)
     * Authorize: user owns payment
     * Fetch invoice
     * Display invoice

   - downloadInvoice($id)
     * Authorize: user owns payment
     * Generate PDF invoice
     * Return download

   - requestRefund($id, Request $request)
     * Authorize: user owns payment
     * Validate refund reason
     * Check refund eligibility
     * Create refund request
     * Notify admin

3. PaymentProcessingService (App/Services):
   - processBookingPayment($booking, $paymentMethod, $paymentData)
     * Validate booking
     * Calculate amount
     * Create payment record
     * Process with gateway (Stripe/PayPal)
     * Update booking payment_status
     * Generate invoice
     * Send confirmation email
     * Return payment result

   - processSubscriptionPayment($plan, $user, $paymentMethod, $paymentData)
     * Calculate amount
     * Apply coupon if provided
     * Create payment record
     * Process with gateway
     * Create user_subscription
     * Generate invoice
     * Send confirmation
     * Return result

   - processBoostPayment($boostPlan, $boostable, $duration, $paymentMethod, $paymentData)
     * Calculate amount (plan price Ã— duration factor)
     * Create payment
     * Process payment
     * Create profile_boost
     * Generate invoice
     * Send confirmation
     * Return result

   - processCoursePayment($course, $user, $paymentMethod, $paymentData)
     * Calculate amount
     * Apply coupon
     * Create payment
     * Process payment
     * Create course_enrollment
     * Generate invoice
     * Send confirmation
     * Return result

   - processRefund($payment, $amount, $reason)
     * Validate refund eligibility
     * Process refund with gateway
     * Update payment record
     * Update related records (booking, subscription, etc.)
     * Generate credit note
     * Send notification
     * Return result

4. StripeService (App/Services):
   - createPaymentIntent($amount, $currency, $metadata)
     * Create Stripe payment intent
     * Return client secret

   - confirmPayment($paymentIntentId, $paymentMethod)
     * Confirm payment
     * Handle 3D Secure if needed
     * Return result

   - createCustomer($user)
     * Create Stripe customer
     * Store customer ID in user record
     * Return customer

   - attachPaymentMethod($customerId, $paymentMethodId)
     * Attach payment method to customer
     * Return payment method

   - detachPaymentMethod($paymentMethodId)
     * Detach payment method

   - processRefund($chargeId, $amount, $reason)
     * Create refund
     * Return refund object

   - handleWebhook($payload, $signature)
     * Verify signature
     * Handle events:
       - payment_intent.succeeded
       - payment_intent.failed
       - charge.refunded
       - customer.subscription.updated
     * Update database accordingly

5. PayPalService (App/Services):
   - createOrder($amount, $currency, $description, $returnUrl, $cancelUrl)
     * Create PayPal order
     * Return approval URL

   - captureOrder($orderId)
     * Capture payment
     * Return capture details

   - processRefund($captureId, $amount, $reason)
     * Create refund
     * Return refund details

   - handleIPN($payload)
     * Verify IPN authenticity
     * Handle payment notifications
     * Update database

6. CouponController methods:
   - validateCoupon(Request $request)
     * Input: coupon code, amount, applicable_to
     * Fetch coupon
     * Validate:
       - Is active
       - Not expired
       - Usage limit not reached
       - Minimum purchase met
       - Applicable to item type
     * Calculate discount
     * Return: valid, discount_amount, new_total

7. InvoiceService (App/Services):
   - generateInvoice($payment)
     * Create invoice record
     * Generate unique invoice number
     * Calculate line items
     * Calculate tax
     * Calculate total
     * Return invoice

   - generateInvoicePDF($invoice)
     * Use DOMPDF
     * Template with:
       - Company info
       - Invoice number and date
       - Bill to (customer info)
       - Line items table
       - Subtotal, tax, total
       - Payment method
       - Terms and notes
     * Return PDF

   - sendInvoiceEmail($invoice)
     * Generate PDF
     * Send email with attachment

8. Blade Views (resources/views/payment/):
   - methods.blade.php (Saved Payment Methods)
     * Page header
       - "Payment Methods" heading
       - "Add New Card" button

     * Saved cards list
       Each card:
       - Card brand icon (Visa, Mastercard, etc.)
       - Masked card number (â€¢â€¢â€¢â€¢ 4242)
       - Expiry date
       - Default badge (if default)
       - Actions:
         * Set as Default button
         * Remove button

     * Empty state
       - No saved cards message
       - Add Card button

     * Add card modal
       - Card number input (Stripe Elements)
       - Expiry date input
       - CVV input
       - Cardholder name
       - Save as default checkbox
       - Add Card button

   - history.blade.php (Payment History)
     * Page header
       - "Payment History" heading
       - Export button

     * Filters
       - Status dropdown (All, Completed, Failed, Refunded)
       - Type dropdown (Bookings, Subscriptions, Boosts, Courses)
       - Date range picker
       - Apply button

     * Payments table
       - Columns: Date, Type, Description, Amount, Status, Invoice, Actions
       - Rows:
         * Payment date
         * Type icon and label
         * Description (what was paid for)
         * Amount (formatted)
         * Status badge (color-coded)
         * View Invoice link
         * Actions dropdown (View Details, Request Refund, Download Invoice)
       - Pagination

     * Summary cards (top)
       - Total Spent (all time)
       - This Month
       - Pending Refunds

   - show.blade.php (Payment Details)
     * Breadcrumb

     * Payment info card
       - Payment date and time
       - Status badge (large)
       - Transaction ID
       - Payment method (card/PayPal icon and last 4 digits)
       - Gateway (Stripe/PayPal)

     * Payment for section
       - What was purchased
       - Link to item (booking/subscription/boost/course)
       - Details of purchase

     * Amount breakdown
       - Subtotal
       - Discount (if coupon used)
       - Tax (if applicable)
       - Total paid (large, bold)

     * Invoice section
       - Invoice number
       - Issue date
       - Download Invoice button
       - View Invoice link

     * Refund section (if refunded)
       - Refund amount
       - Refund date
       - Refund reason
       - Refund status

     * Actions
       - Request Refund button (if eligible)
       - Contact Support link

   - invoice.blade.php (Invoice View)
     * Invoice header
       - Company logo
       - Company info (address, phone, email)
       - Invoice title
       - Invoice number
       - Issue date
       - Due date (if applicable)

     * Bill To section
       - Customer name
       - Customer email
       - Customer address (if provided)

     * Invoice details table
       - Columns: Description, Quantity, Unit Price, Amount
       - Line items
       - Subtotal row
       - Discount row (if applicable)
       - Tax row (if applicable)
       - Total row (bold)

     * Payment info
       - Payment method
       - Transaction ID
       - Payment date
       - Payment status

     * Notes section
       - Terms and conditions
       - Thank you message

     * Actions
       - Download PDF button
       - Print button

   - refund-request.blade.php (Request Refund Modal)
     * Refund eligibility check
       - Shows refund amount (full or partial)
       - Shows refund policy

     * Refund request form
       - Reason dropdown
         * Changed plans
         * Service not as expected
         * Found alternative
         * Technical issues
         * Other
       - Description textarea (required if Other)
       - Submit button

   - checkout-form.blade.php (Reusable Checkout)
     * Order summary (sidebar)
       - Item details
       - Price breakdown
       - Total

     * Payment method selection
       - Saved cards (radio buttons)
       - New card option
       - PayPal option
       - Bank transfer option

     * New card form (Stripe Elements)
       - Card number
       - Expiry and CVV
       - Cardholder name
       - Save card checkbox

     * Coupon code section
       - Input field
       - Apply button
       - Discount display

     * Billing information
       - Name, email (pre-filled)
       - Address (optional)

     * Terms checkbox
     * Pay Now button (with loading state)

9. Components (resources/views/components/payment/):
   - card-element.blade.php
     * Stripe card element wrapper

   - status-badge.blade.php
     * Payment status badge (color-coded)

   - amount-display.blade.php
     * Formatted amount display

10. JavaScript (resources/js/payment.js):
    - Stripe integration
      * Initialize Stripe with publishable key
      * Create Elements
      * Mount card element
      * Handle card validation
      * Create payment method
      * Confirm payment
      * Handle 3D Secure

    - PayPal integration
      * Load PayPal SDK
      * Create PayPal buttons
      * Handle approval
      * Capture order

    - Card management
      * Add card form
      * Validate card input
      * Set default card
      * Remove card confirmation

    - Coupon validation
      * AJAX coupon check
      * Apply discount
      * Update totals

    - Payment processing
      * Show loading state
      * Handle errors
      * Success redirect
      * Error display

11. Validation Rules:
    - Add payment method:
      * payment_method_id: required (from Stripe)
      * save_as_default: boolean

    - Process payment:
      * payment_method: required, in:card,paypal,bank_transfer
      * amount: required, numeric, min:0
      * For card: payment_method_id or card_token required

    - Refund request:
      * reason: required, in:changed_plans,not_as_expected,found_alternative,technical,other
      * description: required_if:reason,other, max:500

    - Coupon:
      * code: required, exists:coupons,code
      * amount: required, numeric

12. Business Logic:
    - Payment Processing:
      * Create payment record (status: pending)
      * Process with gateway
      * If success:
        - Update status: completed
        - Set paid_at timestamp
        - Generate invoice
        - Trigger related actions (activate subscription, etc.)
        - Send confirmation email
      * If failed:
        - Update status: failed
        - Store error message
        - Send failure notification

    - Refund Processing:
      * Check eligibility:
        - Within refund window
        - Payment status: completed
        - Not already refunded
      * Calculate refund amount (full or pro-rated)
      * Process refund with gateway
      * If success:
        - Update payment status: refunded
        - Set refunded_at timestamp
        - Set refund_amount
        - Update related records
        - Send refund confirmation

    - Coupon Application:
      * Validate coupon
      * Calculate discount:
        - Percentage: amount Ã— (value / 100)
        - Fixed: value
        - Free views: N/A (applied to subscription)
      * Check minimum purchase
      * Increment used_count
      * Create coupon_usage record

    - Invoice Generation:
      * Generate unique invoice number (INV-YYYYMMDD-XXXX)
      * Calculate line items
      * Calculate tax (if applicable)
      * Set due date (immediate for most)
      * Store invoice record
      * Generate PDF

13. Webhook Handling:
    - Stripe Webhooks:
      * payment_intent.succeeded
        - Update payment status
        - Trigger success actions

      * payment_intent.failed
        - Update payment status
        - Send failure notification

      * charge.refunded
        - Update payment status
        - Send refund notification

      * customer.subscription.updated
        - Update subscription status

    - PayPal IPN:
      * Payment completed
      * Payment refunded
      * Subscription cancelled

14. Security:
    - Never store raw card numbers
    - Use PCI-compliant tokenization
    - Validate webhook signatures
    - Encrypt sensitive data
    - Use HTTPS for all payment pages
    - Implement CSRF protection
    - Rate limit payment attempts
    - Log all payment activities

15. Testing:
    - Use Stripe test mode
    - Test cards:
      * 4242424242424242 - Success
      * 4000000000000002 - Declined
      * 4000002500003155 - 3D Secure required
    - PayPal sandbox
    - Test all payment flows
    - Test refund scenarios
    - Test webhook handling

16. Error Handling:
    - Gateway errors
      * Insufficient funds
      * Card declined
      * Invalid card
      * Gateway timeout
    - Display user-friendly messages
    - Log technical details
    - Provide support contact

17. Reporting:
    - Daily revenue report
    - Payment method breakdown
    - Refund rate tracking
    - Failed payment analysis
    - Coupon usage statistics

Ensure PCI compliance. Implement proper error handling. Use secure payment tokenization."

STEP 14: Messaging System
=========================
Context: Direct messaging between users, guides, and agencies for booking inquiries and support.

Requirements:
- Real-time messaging
- Conversation threads
- Message notifications
- File attachments
- Booking-related messages
- Message search

Prompt:
"Create messaging system for AroundUz:

1. Routes (web.php - auth required):
   - GET /messages - inbox/conversation list
   - GET /messages/conversation/{userId} - conversation with specific user
   - POST /messages/send - send message
   - POST /messages/{id}/read - mark message as read
   - DELETE /messages/{id} - delete message
   - GET /messages/search - search messages
   - POST /messages/archive/{conversationId} - archive conversation
   - GET /messages/archived - archived conversations

2. MessageController methods:
   - index()
     * Fetch user's conversations
     * Group messages by sender/receiver
     * Show latest message per conversation
     * Show unread count per conversation
     * Order by latest message timestamp

   - conversation($userId)
     * Authorize: valid conversation partner
     * Fetch messages between auth user and $userId
     * Mark messages as read
     * Fetch other user details
     * Show conversation thread

   - send(Request $request)
     * Validate: receiver_id, message, booking_id (optional)
     * Create message record
     * Send notification to receiver
     * Return message data

   - markAsRead($id)
     * Authorize: user is receiver
     * Update read_at timestamp
     * Return success

   - destroy($id)
     * Authorize: user is sender or receiver
     * Soft delete message
     * Return success

   - search(Request $request)
     * Search in message content
     * Filter by sender
     * Return matching messages

   - archive($conversationId)
     * Archive conversation for user
     * Hidden from main inbox

   - archived()
     * Show archived conversations

3. Blade Views (resources/views/messages/):
   - index.blade.php (Inbox)
     * Two-column layout

     Left sidebar (conversations list):
     - Header
       * "Messages" heading
       * New Message button
       * Search bar

     - Tabs
       * All (default)
       * Unread
       * Archived

     - Conversations list
       Each conversation item:
       - Avatar
       - Name
       - User type badge (Guide/Agency/User)
       - Last message preview (truncated)
       - Timestamp (relative)
       - Unread badge (if unread)
       - Click to open conversation

     - Empty state
       * No conversations icon
       * "No messages yet"
       * Start browsing guides/agencies

     Right panel (conversation):
     - Header
       * Avatar and name
       * User type badge
       * Online status indicator
       * Actions:
         - View Profile link
         - Archive button
         - Block button
         - More options (dropdown)

     - Messages area (scrollable)
       Each message:
       - If sent by auth user (right aligned):
         * Message bubble (primary color)
         * Message text
         * Timestamp (small)
         * Read status (double checkmark if read)

       - If received (left aligned):
         * Sender avatar (small)
         * Message bubble (gray)
         * Message text
         * Timestamp

       - System messages (centered):
         * "Booking #XXX created"
         * "Booking confirmed"
         * Date separators

       - Attachment display
         * Image thumbnails (clickable)
         * File download links

     - Message input (bottom, fixed)
       * Textarea (auto-expanding)
       * Emoji picker button
       * Attach file button
       * Send button
       * Typing indicator (if other user typing)

     - No conversation selected state
       * Select a conversation icon
       * "Select a conversation to start messaging"

   - new-message-modal.blade.php
     * Modal to start new conversation
     * Search users (guides/agencies)
     * Select recipient
     * Write first message
     * Send button

4. Components (resources/views/components/messages/):
   - conversation-item.blade.php
     * Reusable conversation list item
     * Props: conversation, active, unread_count

   - message-bubble.blade.php
     * Message display component
     * Props: message, sent_by_me

   - typing-indicator.blade.php
     * "... is typing" indicator

5. JavaScript (resources/js/messages.js):
   - Real-time updates (Laravel Echo + Pusher)
     * Listen for new messages
     * Update conversation list
     * Append message to conversation
     * Show notification
     * Play sound (optional)

   - Send message
     * AJAX request
     * Optimistic UI update
     * Handle errors
     * Clear input on success

   - Auto-scroll
     * Scroll to bottom on new message
     * Maintain scroll position when loading older messages

   - Infinite scroll
     * Load older messages on scroll up
     * Pagination

   - Mark as read
     * Auto-mark as read when conversation opened
     * Update unread counts

   - Typing indicator
     * Emit typing event on input
     * Show indicator when other user typing
     * Timeout after 3 seconds

   - Message search
     * Live search in messages
     * Highlight matching text

   - Emoji picker
     * Show emoji panel
     * Insert emoji into textarea

   - File upload
     * Select file
     * Preview before send
     * Upload with message
     * Progress indicator

6. Real-time Events (Laravel Echo):
   - MessageSent event
     * Broadcast to receiver
     * Payload: message data
     * Update UI in real-time

   - MessageRead event
     * Broadcast to sender
     * Update read status

   - UserTyping event
     * Broadcast to conversation partner
     * Show typing indicator

   - UserOnline event
     * Update online status

7. Validation Rules:
   - Send message:
     * receiver_id: required, exists:users,id, not:auth_user_id
     * message: required, min:1, max:1000
     * booking_id: nullable, exists:bookings,id
     * attachment: nullable, file, max:10240 (10MB), mimes:jpg,jpeg,png,pdf,doc,docx

   - Search:
     * query: required, min:2

8. Business Logic:
   - Message Creation:
     * Create message record
     * Set sender_id (auth user)
     * Set receiver_id
     * Set booking_id (if related to booking)
     * Set message text
     * Upload attachment if provided
     * Broadcast event
     * Send notification

   - Read Status:
     * When conversation opened
     * Mark all unread messages as read
     * Update read_at timestamp
     * Broadcast read event
     * Update unread count

   - Conversation Grouping:
     * Group messages by conversation partner
     * Show latest message per conversation
     * Count unread messages
     * Order by latest message timestamp

   - Notifications:
     * Real-time notification via Pusher
     * Email notification (configurable)
     * Push notification (mobile - if applicable)

   - Message Deletion:
     * Soft delete
     * Hide from sender or receiver (not both)
     * If both delete: permanent delete

9. Database Optimization:
   - Indexes:
     * messages: (sender_id, receiver_id)
     * messages: (receiver_id, read_at)
     * messages: (booking_id)

   - Eager loading:
     * Load sender and receiver with messages
     * Load booking details if present

10. Notifications:
    - NewMessageReceived
      * Email notification
      * Subject: "New message from [Name]"
      * Message preview
      * Reply link

    - MessageReadNotification (optional)
      * Notify sender when message read

11. Privacy & Security:
    - Users can only message:
      * Guides/agencies they've booked
      * Users who've booked them (if guide/agency)

    - Spam prevention:
      * Rate limiting (max 10 messages per minute)
      * Block feature
      * Report feature

    - Content moderation:
      * Filter inappropriate language
      * Admin can view reported messages

12. File Handling:
    - Supported file types:
      * Images: jpg, jpeg, png, gif (max 5MB)
      * Documents: pdf, doc, docx (max 10MB)

    - Storage:
      * Store in storage/app/messages
      * Generate unique filenames
      * Create thumbnails for images

    - Display:
      * Images: show inline with lightbox
      * Documents: show download link with icon

13. Search Functionality:
    - Search in:
      * Message content
      * Sender name
      * Related booking reference

    - Filters:
      * Date range
      * Conversation partner
      * Unread only
      * With attachments

14. Additional Features:
    - Quick replies (templates)
      * "Thank you for your inquiry"
      * "I'll be available on that date"
      * "Please provide more details"

    - Message reactions (optional)
      * Thumbs up
      * Heart

    - Voice messages (optional)
      * Record audio
      * Play inline

    - Video calls (optional)
      * Integration with Zoom/Jitsi

15. Mobile Considerations:
    - Responsive design
    - Touch-friendly interface
    - Swipe actions (archive, delete)
    - Pull to refresh
    - Mobile notifications

16. Performance:
    - Lazy load messages (pagination)
    - Load 20 messages at a time
    - Infinite scroll for older messages
    - Cache conversation list
    - Optimize real-time listeners

Implement real-time updates with Laravel Echo and Pusher. Ensure message privacy and security."


STEP 15: Favorites System
=========================
Context: Allow users to save favorite guides and agencies for quick access.

Requirements:
- Add/remove favorites
- Favorites list page
- Favorite button on listings
- Favorite count display
- Collections/folders (optional)

Prompt:
"Create favorites/wishlist system for AroundUz:

1. Routes (web.php - auth required):
   - GET /favorites - favorites list page
   - POST /favorites/toggle - add/remove favorite
   - DELETE /favorites/{id} - remove specific favorite
   - GET /favorites/check - check if item is favorited
   - POST /favorites/clear - clear all favorites

2. FavoriteController methods:
   - index()
     * Fetch user's favorites (guides and agencies)
     * Group by type (tabs)
     * Show favorite cards
     * Pagination

   - toggle(Request $request)
     * Input: favoritable_type, favoritable_id
     * Check if already favorited
     * If yes: remove favorite
     * If no: create favorite
     * Return: favorited (boolean), message

   - destroy($id)
     * Authorize: user owns favorite
     * Delete favorite record
     * Return success

   - check(Request $request)
     * Input: favoritable_type, favoritable_id
     * Return: favorited (boolean)

   - clear()
     * Confirm action
     * Delete all user's favorites
     * Return success

3. Blade Views (resources/views/favorites/):
   - index.blade.php (Favorites Page)
     * Page header
       - "My Favorites" heading
       - Total count
       - Clear All button

     * Tabs
       - All (default)
       - Guides (count)
       - Agencies (count)

     * Filter/Sort
       - Sort dropdown: Recently Added, Rating, Price
       - View toggle: Grid / List

     * Favorites grid (3 columns desktop)
       Each favorite card:
       - Same as guide/agency card on listings
       - Additional:
         * "Added on [date]" text
         * Remove from Favorites button (heart icon)
         * View Profile button
       - Quick actions:
         * Send Message
         * Book Now
         * Share

     * Empty state (per tab)
       - Empty heart icon
       - "No favorites yet"
       - "Browse [Guides/Agencies]" button

     * Export/Share options
       - Share favorites list (generate link)
       - Export as PDF

   - partials/favorite-button.blade.php (Reusable component)
     * Heart icon button
     * Filled if favorited, outline if not
     * Toggle on click
     * Loading state
     * Props: favoritable_type, favoritable_id, favorited

4. Components (resources/views/components/):
   - favorite-toggle.blade.php
     * Reusable favorite button component
     * Can be used on cards, detail pages
     * Props: item_type, item_id, size, style

5. JavaScript (resources/js/favorites.js):
   - Toggle favorite
     * AJAX request to toggle
     * Animate heart (fill/unfill)
     * Update button state
     * Show toast notification
     * Update favorite count
     * Handle auth check (show login modal if not logged in)

   - Remove from list
     * Confirm action
     * AJAX delete request
     * Remove card from DOM with animation
     * Update count

   - Clear all
     * Confirmation dialog
     * AJAX request
     * Clear entire list
     * Show empty state

   - Check favorited status
     * On page load for detail pages
     * Update button state

6. API Endpoints:
   - POST /api/favorites/toggle
     * Input: favoritable_type, favoritable_id
     * Return: success, favorited, message

   - GET /api/favorites/count
     * Return: total_count, guides_count, agencies_count

7. Validation Rules:
   - Toggle favorite:
     * favoritable_type: required, in:Guide,Agency
     * favoritable_id: required, integer, exists in respective table

8. Business Logic:
   - Toggle Favorite:
     * Check if record exists in favorites table
     * If exists:
       - Delete record
       - Return favorited: false
     * If not exists:
       - Create record
       - Return favorited: true
     * Unique constraint on (user_id, favoritable_type, favoritable_id)

   - Favorite Count:
     * Cache favorite counts
     * Update cache on toggle
     * Display on profile cards

9. Database Optimization:
   - Indexes:
     * favorites: (user_id, favoritable_type, favoritable_id)
     * favorites: (favoritable_type, favoritable_id)

   - Unique constraint:
     * Prevent duplicate favorites
     * (user_id, favoritable_type, favoritable_id)

10. Notifications:
    - FavoritedNotification (optional)
      * Notify guide/agency when favorited
      * "Someone added you to their favorites"
      * Only if count reaches milestones (10, 50, 100)

11. Analytics:
    - Track:
      * Total favorites per guide/agency
      * Favorite to booking conversion rate
      * Most favorited guides/agencies
      * Favorite growth over time

12. Additional Features:
    - Collections/Folders (optional)
      * Group favorites into collections
      * "Dream Trip to Samarkand"
      * "Budget-Friendly Guides"
      * Share collections

    - Favorite notes (optional)
      * Add personal notes to favorites
      * "Good for family tours"
      * "Available in August"

    - Price alerts (optional)
      * Notify when favorite has price drop
      * Notify when favorite has special offer

13. Display Integration:
    - Guide/Agency Cards:
      * Heart icon in top-right corner
      * Show favorite count (e.g., "234 favorites")

    - Detail Pages:
      * Prominent favorite button
      * Show favorite count
      * "Join X others who favorited this guide"

14. Social Proof:
    - Display favorite counts
      * "Favorited by 234 travelers"

    - Popular favorites section
      * "Most Favorited Guides This Week"
      * Show on homepage

15. Export/Share:
    - Generate shareable link
      * Public URL to view favorites list
      * Privacy option (public/private)

    - Export as PDF
      * List of favorites with details
      * Can be shared with travel companions

Ensure favorites sync across devices. Implement smooth animations. Show login prompt for guests."


STEP 16: Search & Filter System
===============================
Context: Advanced search functionality across guides, agencies, and destinations.

Requirements:
- Global search
- Auto-suggestions
- Filter by multiple criteria
- Search history
- Save searches
- Sort options

Prompt:
"Create advanced search and filter system for AroundUz:

1. Routes (web.php):
   Public:
   - GET /search - global search page
   - GET /search/suggestions - autocomplete suggestions
   - GET /search/guides - search guides
   - GET /search/agencies - search agencies
   - GET /search/destinations - search destinations

   Auth required:
   - POST /search/save - save search
   - GET /search/saved - saved searches
   - DELETE /search/saved/{id} - delete saved search
   - GET /search/history - search history
   - DELETE /search/history/clear - clear history

2. SearchController methods:
   - index(Request $request)
     * Input: query (search term)
     * Search across: guides, agencies, destinations, courses
     * Return results grouped by type
     * Pagination per type
     * Highlight search terms

   - suggestions(Request $request)
     * Input: query (partial search term)
     * Return autocomplete suggestions:
       - Guide names (top 5)
       - Agency names (top 5)
       - Destination names (top 5)
       - Recent searches
     * Order by relevance

   - searchGuides(Request $request)
     * Detailed guide search with filters
     * Already implemented in PublicGuideController

   - searchAgencies(Request $request)
     * Detailed agency search with filters
     * Already implemented in PublicAgencyController

   - searchDestinations(Request $request)
     * Search destinations
     * Filter by region, country

   - saveSearch(Request $request)
     * Authorize: auth required
     * Save search query and filters
     * Give search a name
     * Set notification preferences

   - savedSearches()
     * List user's saved searches
     * Show search name and criteria
     * Quick re-run button

   - deleteSavedSearch($id)
     * Authorize: user owns search
     * Delete saved search

   - searchHistory()
     * Show user's recent searches (last 20)
     * Show search term and timestamp
     * Click to re-run

   - clearHistory()
     * Clear all search history for user

3. Blade Views (resources/views/search/):
   - index.blade.php (Global Search Results)
     * Search bar (sticky top)
       - Search input (pre-filled with query)
       - Search button
       - Advanced filters button

     * Results summary
       - "Showing results for '[query]'"
       - Total results count
       - Search took X seconds

     * Results tabs
       - All (default)
       - Guides (count)
       - Agencies (count)
       - Destinations (count)
       - Courses (count)

     * All Tab (mixed results)
       - Section: Guides (top 3)
         * Guide cards
         * "View all X guides" link

       - Section: Agencies (top 3)
         * Agency cards
         * "View all X agencies" link

       - Section: Destinations (top 3)
         * Destination cards
         * "View all X destinations" link

       - Section: Courses (top 3)
         * Course cards
         * "View all X courses" link

     * Individual tabs (Guides, Agencies, etc.)
       - Filters sidebar (specific to type)
       - Results grid
       - Pagination
       - Save this search button

     * No results state
       - "No results found for '[query]'"
       - Search suggestions
       - "Try adjusting your filters"
       - Popular searches
       - Browse categories

     * Did you mean? (if typo detected)
       - "Did you mean: [corrected term]?"
       - Click to search corrected term

   - suggestions-dropdown.blade.php (Autocomplete)
     * Dropdown below search input
     * Sections:
       - Recent Searches (with clock icon)
       - Guides (with user icon)
       - Agencies (with building icon)
       - Destinations (with location icon)
     * Each suggestion:
       - Icon
       - Name (with matching text highlighted)
       - Additional info (location, rating)
       - Click to search or go directly
     * "View all results" at bottom

   - saved.blade.php (Saved Searches)
     * Page header
       - "Saved Searches" heading
       - New Alert button

     * Saved searches list
       Each saved search card:
       - Search name (user-defined)
       - Search query display
       - Filters applied (chips)
       - Created date
       - Last run date
       - Result count (last run)
       - Actions:
         * Run Search button
         * Edit button
         * Delete button
         * Enable/Disable Alerts toggle

       - Alert settings (if enabled)
         * Email frequency: Daily, Weekly
         * "Notify me of new results"

     * Empty state
       - "No saved searches yet"
       - "Save your frequent searches for quick access"

   - history.blade.php (Search History)
     * Page header
       - "Search History" heading
       - Clear All button

     * History list (chronological, newest first)
       Each history item:
       - Search term
       - Timestamp (relative)
       - Result count
       - Click to re-run
       - Remove button (X icon)

     * Empty state
       - "No search history"

4. Components (resources/views/components/search/):
   - search-bar.blade.php
     * Reusable search bar component
     * Props: placeholder, value, action, show_suggestions

   - result-card.blade.php
     * Generic result card
     * Adapts to guide/agency/destination/course

   - filter-sidebar.blade.php
     * Reusable filter sidebar
     * Props: filters, active_filters

5. JavaScript (resources/js/search.js):
   - Autocomplete
     * Debounced AJAX request (300ms delay)
     * Show suggestions dropdown
     * Keyboard navigation (arrow keys)
     * Select suggestion (Enter key)
     * Close on outside click
     * Track user interaction

   - Search submission
     * Prevent empty searches
     * Add to history
     * Show loading state
     * Handle special characters

   - Filter application
     * Update URL parameters
     * Maintain search state
     * Apply filters without page reload (AJAX)
     * Update result count

   - Save search
     * Show modal to name search
     * Save with current filters
     * Confirm save

   - Search history
     * Store in localStorage (for guests)
     * Store in database (for authenticated users)
     * Click to re-run

   - Result highlighting
     * Highlight matching text in results
     * Bold search terms

6. Search Algorithm:
   - Full-text search using:
     * MySQL FULLTEXT indexes
     * Or Elasticsearch (for better performance)
     * Or Laravel Scout with Algolia

   - Search in:
     * Guides: name, title, tagline, description, location
     * Agencies: name, tagline, description, location
     * Destinations: name, description
     * Courses: title, description

   - Relevance scoring:
     * Exact match in name: highest priority
     * Match in title/tagline: high priority
     * Match in description: medium priority
     * Match in location: lower priority

   - Apply boost factors:
     * Verified profiles: +20%
     * High rating (>4.5): +15%
     * Many reviews: +10%
     * Active boost: +50%

7. Filtering Logic:
   - Multiple filters combined with AND logic
   - Each filter category uses OR logic
     Example: (City=Tashkent OR City=Samarkand) AND (Language=English OR Language=Russian)

   - Available filters:
     * Location: Country, Region, City
     * Language: Multiple selection
     * Specialization: Multiple selection
     * Rating: Minimum rating
     * Price: Min and Max range
     * Availability: Online now, Available dates
     * Verified: Verified only checkbox
     * For agencies: Type
     * For courses: Category, Level

8. Sorting Options:
   - Relevance (default for search)
   - Most Popular (tours completed)
   - Highest Rated
   - Price: Low to High
   - Price: High to Low
   - Newest First
   - Most Reviewed
   - Closest to Me (if location enabled)

9. Validation Rules:
   - Search:
     * query: required, min:2, max:100

   - Save search:
     * name: required, max:100
     * query: required
     * filters: nullable, array
     * notify: boolean

10. Advanced Features:
    - Voice search (optional)
      * Speech recognition API
      * Convert speech to text
      * Submit search

    - Search by image (optional)
      * Upload image
      * Find similar destinations

    - Boolean operators
      * Support for: AND, OR, NOT
      * Example: "Samarkand AND historical NOT expensive"

    - Fuzzy search
      * Handle typos
      * Suggest corrections
      * Phonetic matching

    - Geolocation search
      * "Guides near me"
      * Distance-based sorting
      * Map view of results

11. Performance Optimization:
    - Cache popular searches
      * Cache results for 1 hour
      * Cache key: search term + filters hash

    - Elasticsearch integration
      * Fast full-text search
      * Faceted search
      * Real-time indexing

    - Database indexes
      * FULLTEXT index on searchable columns
      * Index on filter columns

    - Query optimization
      * Limit results per page (20-30)
      * Eager load relationships
      * Select only needed columns

12. Analytics:
    - Track:
      * Popular search terms
      * Zero-result searches (to improve)
      * Search to booking conversion
      * Filter usage
      * Click-through rate per result

    - Reports:
      * Top searches daily/weekly/monthly
      * Trending searches
      * Failed searches (for content improvement)

13. SEO:
    - Search result pages
      * Canonical URLs
      * Meta tags
      * Structured data (SearchResultsPage schema)

    - Sitemap
      * Include popular search result pages
      * Update regularly

14. Mobile Considerations:
    - Touch-friendly filters
    - Swipe to dismiss suggestions
    - Bottom sheet for filters
    - Voice search button
    - Simplified sort options

15. Accessibility:
    - ARIA labels for search components
    - Keyboard navigation
    - Screen reader announcements
    - Focus management

Implement search with Laravel Scout or Elasticsearch for best performance. Cache frequently searched terms."


STEP 17: Notification System
============================
Context: Comprehensive notification system for all platform activities.

Requirements:
- Multiple notification types
- Email and in-app notifications
- Push notifications
- Notification preferences
- Mark as read/unread
- Notification center

Prompt:
"Create comprehensive notification system for AroundUz:

1. Routes (web.php - auth required):
   - GET /notifications - notification center
   - GET /notifications/unread - unread notifications count
   - POST /notifications/{id}/read - mark as read
   - POST /notifications/read-all - mark all as read
   - DELETE /notifications/{id} - delete notification
   - DELETE /notifications/clear-all - clear all notifications
   - GET /notifications/settings - notification preferences
   - POST /notifications/settings - save preferences

2. NotificationController methods:
   - index()
     * Fetch user's notifications
     * Pagination (20 per page)
     * Group by date (Today, Yesterday, This Week, Older)
     * Show unread count

   - unreadCount()
     * Return count of unread notifications
     * Cache for performance

   - markAsRead($id)
     * Authorize: user owns notification
     * Update read_at timestamp
     * Return success

   - markAllAsRead()
     * Update all user's notifications
     * Set read_at to now
     * Clear unread count cache

   - destroy($id)
     * Authorize: user owns notification
     * Delete notification
     * Return success

   - clearAll()
     * Confirm action
     * Delete all user's notifications
     * Return success

   - settings()
     * Show notification preferences form
     * Current settings

   - saveSettings(Request $request)
     * Update user's notification preferences
     * Validate preferences
     * Save to database or user meta

3. Notification Types (App/Notifications/):
   - BookingCreated
     * To: Guide/Agency
     * Title: "New Booking Request"
     * Message: "[User] wants to book [service] on [date]"
     * Action: View Booking, Accept, Decline

   - BookingConfirmed
     * To: User
     * Title: "Booking Confirmed!"
     * Message: "Your booking with [Guide/Agency] is confirmed"
     * Action: View Booking, Message Guide

   - BookingCancelled
     * To: Both parties
     * Title: "Booking Cancelled"
     * Message: "Booking #[ref] has been cancelled"
     * Action: View Details

   - BookingReminder
     * To: User
     * Title: "Tour Tomorrow"
     * Message: "Reminder: Your tour with [Guide] is tomorrow at [time]"
     * Action: View Booking, Contact Guide

   - ReviewReceived
     * To: Guide/Agency
     * Title: "New Review"
     * Message: "[User] left you a [X]-star review"
     * Action: View Review, Respond

   - ReviewResponse
     * To: User
     * Title: "Guide Responded"
     * Message: "[Guide] responded to your review"
     * Action: View Response

   - MessageReceived
     * To: Receiver
     * Title: "New Message"
     * Message: "[Sender]: [Message preview]"
     * Action: View Message, Reply

   - SubscriptionExpiring
     * To: User
     * Title: "Subscription Expiring Soon"
     * Message: "Your subscription expires in [X] days"
     * Action: Renew Subscription

   - SubscriptionExpired
     * To: User
     * Title: "Subscription Expired"
     * Message: "Your subscription has expired"
     * Action: Renew

   - BoostExpiring
     * To: Guide/Agency
     * Title: "Profile Boost Expiring"
     * Message: "Your [Plan] boost expires in [X] days"
     * Action: Extend Boost

   - CourseEnrolled
     * To: User
     * Title: "Course Enrollment Confirmed"
     * Message: "You're enrolled in [Course]"
     * Action: Start Learning

   - CourseCompleted
     * To: User
     * Title: "Course Completed!"
     * Message: "Congratulations on completing [Course]"
     * Action: Download Certificate

   - CertificateIssued
     * To: User
     * Title: "Certificate Ready"
     * Message: "Your certificate for [Course] is ready"
     * Action: View Certificate, Download

   - PaymentReceived
     * To: User
     * Title: "Payment Successful"
     * Message: "Payment of $[amount] received"
     * Action: View Invoice

   - PaymentFailed
     * To: User
     * Title: "Payment Failed"
     * Message: "Payment of $[amount] failed"
     * Action: Retry Payment

   - RefundProcessed
     * To: User
     * Title: "Refund Processed"
     * Message: "Refund of $[amount] has been processed"
     * Action: View Details

   - AchievementEarned
     * To: User
     * Title: "Achievement Unlocked!"
     * Message: "You earned: [Achievement Name]"
     * Action: View Achievements

   - FavoritePriceDrops (optional)
     * To: User
     * Title: "Price Drop Alert"
     * Message: "[Guide] reduced rates to $[price]"
     * Action: View Profile, Book Now

   - SystemAnnouncement
     * To: All users or specific groups
     * Title: Custom
     * Message: Custom
     * Action: Custom or None

4. Blade Views (resources/views/notifications/):
   - index.blade.php (Notification Center)
     * Page header
       - "Notifications" heading
       - Unread count badge
       - Actions:
         * Mark All as Read button
         * Settings icon (to preferences)
         * Clear All button

     * Filter tabs
       - All (default)
       - Unread
       - Bookings
       - Messages
       - Payments
       - System

     * Notifications list (grouped by date)
       Today:
       - Notification items

       Yesterday:
       - Notification items

       This Week:
       - Notification items

       Older:
       - Notification items

     * Each notification item:
       - Icon (type-specific)
         * Booking: calendar icon
         * Message: chat icon
         * Payment: dollar icon
         * Review: star icon
         * Achievement: trophy icon
       - Icon background color (type-specific)
       - Unread indicator (blue dot if unread)
       - Notification title (bold if unread)
       - Message text
       - Timestamp (relative)
       - Action button (if applicable)
         * "View Booking"
         * "Reply"
         * "View Review"
       - Delete button (X icon, on hover)
       - Click entire card to mark as read and navigate

     * Infinite scroll (load more on scroll)

     * Empty state
       - Bell icon
       - "No notifications"
       - "You're all caught up!"

     * Loading skeleton
       - Show while loading

   - settings.blade.php (Notification Preferences)
     * Page header
       - "Notification Settings" heading
       - Save button

     * Sections:
       Section 1: Email Notifications
       - Enable email notifications (master toggle)
       - Notification types (checkboxes):
         * New booking requests
         * Booking confirmations
         * Booking cancellations
         * New messages
         * New reviews
         * Subscription expiring
         * Course updates
         * Payment confirmations
         * Marketing emails

       Section 2: Push Notifications
       - Enable push notifications (master toggle)
       - Same notification types as email

       Section 3: In-App Notifications
       - Enable in-app notifications (always on)
       - Sound on new notification (toggle)

       Section 4: Email Frequency
       - Real-time (as they happen)
       - Daily digest (once per day)
       - Weekly digest (once per week)

       Section 5: Do Not Disturb
       - Enable quiet hours (toggle)
       - From: time picker
       - To: time picker
       - Days: checkboxes (Mon-Sun)

     * Save Settings button

   - partials/notification-item.blade.php
     * Reusable notification item component
     * Props: notification

   - partials/notification-bell.blade.php
     * Bell icon for header
     * Unread count badge
     * Dropdown with recent notifications

5. Header Integration (in layouts/app.blade.php):
   - Notification bell icon
   - Unread count badge (red bubble)
   - Click to show dropdown with:
     * Recent 5 notifications
     * "Mark all as read" link
     * "View all notifications" link
   - Real-time update of count
   - Desktop notification permission request

6. JavaScript (resources/js/notifications.js):
   - Real-time notifications (Laravel Echo)
     * Listen for new notifications
     * Update notification bell count
     * Show toast notification
     * Play sound (if enabled)
     * Show desktop notification (if permission granted)

   - Mark as read
     * AJAX request
     * Update UI (remove blue dot, make text normal)
     * Decrement count

   - Delete notification
     * Confirm action
     * AJAX request
     * Remove from list with animation

   - Dropdown interactions
     * Open/close dropdown
     * Click outside to close
     * Keyboard navigation

   - Infinite scroll
     * Load more notifications on scroll
     * Show loading indicator

   - Desktop notifications
     * Request permission
     * Show system notification
     * Click notification to open app

   - Settings save
     * Validate selections
     * AJAX save
     * Show success message

7. Real-time Events (Laravel Echo):
   - NotificationSent event
     * Broadcast to user
     * Update notification bell
     * Show toast/desktop notification
     * Play sound

   - NotificationRead event
     * Update notification status

   - NotificationCountUpdated event
     * Update bell badge count

8. Validation Rules:
   - Settings:
     * email_notifications: boolean
     * push_notifications: boolean
     * notification_types.*: boolean
     * email_frequency: in:realtime,daily,weekly
     * quiet_hours: boolean
     * quiet_hours_start: date_format:H:i, required_if:quiet_hours,true
     * quiet_hours_end: date_format:H:i, required_if:quiet_hours,true

9. Business Logic:
   - Sending Notifications:
     * Create notification record
     * Broadcast to user via Pusher
     * Send email (if enabled in preferences)
     * Send push notification (if enabled)
     * Respect quiet hours

   - Email Digests:
     * Cron job runs daily/weekly
     * Collect unread notifications
     * Send single email with all notifications
     * Mark as sent

   - Notification Preferences:
     * Store in user_notification_settings table
     * Or JSON column in users table
     * Check preferences before sending

   - Auto-delete old notifications:
     * Cron job deletes notifications older than 30 days
     * Keep unread notifications

10. Database Optimization:
    - Indexes:
      * notifications: (user_id, read_at)
      * notifications: (user_id, created_at)

    - Caching:
      * Cache unread count per user
      * Clear cache on mark as read
      * Cache for 5 minutes

11. Email Templates:
    - Consistent branding
    - Clear call-to-action
    - Unsubscribe link
    - View in browser link
    - Mobile-responsive
    - Plain text version

12. Push Notifications:
    - Web Push (using Laravel Notification Channels)
    - Request permission on first visit
    - Store subscription in database
    - Send via FCM (Firebase Cloud Messaging)
    - Or OneSignal integration
    - Handle permission denial gracefully

13. Toast Notifications:
    - Use library like Toastr or Notyf
    - Show in bottom-right corner
    - Auto-dismiss after 5 seconds
    - Click to dismiss
    - Click to navigate to relevant page
    - Queue multiple toasts

14. Analytics:
    - Track:
      * Notification open rate
      * Click-through rate per type
      * Time to read
      * Delete rate
      * Opt-out rate

    - Improve based on data:
      * Which notifications are most engaged
      * Which are ignored/deleted
      * Adjust frequency/content

15. Testing:
    - Test all notification types
    - Test email delivery
    - Test push notifications
    - Test preferences save
    - Test quiet hours
    - Test digest emails

Implement real-time updates with Laravel Echo and Pusher. Ensure notifications are not intrusive. Provide granular control over preferences."


STEP 18: Static Pages
=====================
Context: Create essential static pages for AroundUz website.

Requirements:
- Home page with hero section
- About Us
- Contact Us
- Destinations
- Pricing
- Terms & Conditions
- Privacy Policy
- FAQ

Prompt:
"Create all static pages for AroundUz using the designs I provided earlier:

1. Routes (web.php - public):
   - GET / - home page
   - GET /about - about us
   - GET /contact - contact us
   - POST /contact - submit contact form
   - GET /destinations - destinations page
   - GET /pricing - pricing plans
   - GET /terms - terms and conditions
   - GET /privacy - privacy policy
   - GET /faq - frequently asked questions
   - GET /how-it-works - how it works (guides/users/agencies)
   - GET /become-guide - guide application page
   - GET /become-agency - agency registration page

2. PageController methods:
   - home()
     * Show homepage with hero section
     * Featured guides (top 6)
     * Featured agencies (top 6)
     * Popular destinations
     * How it works section
     * Testimonials
     * Stats section
     * Newsletter signup

   - about()
     * Show about us page (use provided design)
     * Company history
     * Mission and vision
     * Team members
     * Values
     * Statistics

   - contact()
     * Show contact form (use provided design)
     * Contact information
     * Map
     * FAQ section

   - submitContact(Request $request)
     * Validate contact form
     * Create contact_message record
     * Send email to admin
     * Send confirmation to user
     * Return success

   - destinations()
     * Show destinations page (use provided design)
     * All destinations
     * Filter by region
     * Top attractions
     * Travel tips

   - pricing()
     * Show pricing page (use provided design)
     * User subscription plans
     * Guide/Agency boost plans
     * Comparison table
     * FAQ

   - terms()
     * Show terms and conditions
     * Legal text
     * Sections with anchors

   - privacy()
     * Show privacy policy
     * Data collection
     * Usage
     * Rights
     * GDPR compliance

   - faq()
     * Show FAQ page
     * Categories
     * Search functionality
     * Accordion items

   - howItWorks()
     * Show how it works
     * For Travelers
     * For Guides
     * For Agencies
     * Step-by-step process

   - becomeGuide()
     * Guide application page
     * Requirements
     * Benefits
     * Application form

   - becomeAgency()
     * Agency registration page
     * Requirements
     * Benefits
     * Registration form

3. Blade Views (resources/views/pages/):
   - home.blade.php (Homepage)
     * Use the hero section design I provided with:
       - Search bar with city and service dropdowns (with photos)
       - CTA buttons
       - Stats section

     * How It Works section
       - 3 steps for travelers
       - Icons and descriptions
       - CTA button

     * Featured Guides section
       - Top 6 guide cards
       - View All Guides button

     * Featured Agencies section
       - Top 6 agency cards
       - View All Agencies button

     * Popular Destinations section
       - 6 destination cards with images
       - Explore Destinations button

     * Why Choose AroundUz section
       - 4 value propositions
       - Icons and text

     * Testimonials section
       - 3-4 testimonials
       - User photos and names
       - Ratings
       - Carousel

     * Stats section
       - 4 key metrics
       - Animated counters

     * Newsletter section
       - Email signup form
       - "Get travel tips" CTA

     * CTA sections
       - For Travelers: "Start Your Journey"
       - For Guides: "Become a Guide"
       - For Agencies: "Register Your Agency"

   - about.blade.php
     * Use the design I provided earlier
     * All sections as specified

   - contact.blade.php
     * Use the design I provided earlier
     * All sections as specified

   - destinations.blade.php
     * Use the design I provided earlier
     * All sections as specified

   - pricing.blade.php
     * Use the design I provided earlier
     * All sections as specified

   - terms.blade.php (Terms & Conditions)
     * Page header
     * Last updated date
     * Table of contents (anchored links)
     * Sections:
       1. Acceptance of Terms
       2. User Accounts
       3. Booking and Payments
       4. Cancellation and Refunds
       5. User Conduct
       6. Intellectual Property
       7. Limitation of Liability
       8. Dispute Resolution
       9. Governing Law
       10. Changes to Terms
       11. Contact Information
     * Each section with detailed text

   - privacy.blade.php (Privacy Policy)
     * Page header
     * Last updated date
     * Table of contents
     * Sections:
       1. Information We Collect
       2. How We Use Your Information
       3. Data Sharing and Disclosure
       4. Cookies and Tracking
       5. Data Security
       6. Your Rights (GDPR)
       7. Children's Privacy
       8. International Transfers
       9. Changes to Privacy Policy
       10. Contact Us
     * GDPR compliance statements

   - faq.blade.php (FAQ)
     * Page header
       - "Frequently Asked Questions"
       - Search bar

     * Category tabs
       - General
       - For Travelers
       - For Guides
       - For Agencies
       - Booking & Payment
       - Account & Security

     * FAQ accordion (per category)
       Each question:
       - Question text (clickable)
       - Chevron icon
       - Answer (collapsible)
       - Helpful? (Yes/No buttons)

     * Still have questions?
       - Contact support CTA

     * Popular questions section

   - how-it-works.blade.php (How It Works)
     * Page header
     * Tab navigation:
       - For Travelers (default)
       - For Guides
       - For Agencies

     * For Travelers:
       Step 1: Search & Browse
       - Icon
       - Description
       - Screenshot/illustration

       Step 2: Book Your Guide
       - Icon
       - Description
       - Screenshot

       Step 3: Enjoy Your Tour
       - Icon
       - Description
       - Screenshot

       Step 4: Leave a Review
       - Icon
       - Description
       - Screenshot

     * For Guides:
       Step 1: Create Profile
       Step 2: Get Verified
       Step 3: Receive Bookings
       Step 4: Grow Your Business

     * For Agencies:
       Step 1: Register Company
       Step 2: Add Tour Packages
       Step 3: Manage Bookings
       Step 4: Expand Your Reach

     * Video tutorial (optional)
     * CTA section

   - become-guide.blade.php (Become a Guide)
     * Hero section
       - "Share Your Passion, Earn Income"
       - Image of guide with tourists
       - Apply Now button

     * Why Become a Guide section
       - Flexible Schedule
       - Set Your Rates
       - Meet People from Around the World
       - Share Your Culture

     * Requirements section
       - Age 18+
       - Knowledge of local history/culture
       - Language proficiency
       - Legal right to work
       - No criminal record

     * How It Works (guide specific)
       - 4 steps to get started

     * Earning Potential section
       - Average rates
       - Top guide earnings
       - Calculator

     * Testimonials from guides
       - 3 success stories

     * Application form
       - Name, email, phone
       - Location
       - Languages
       - Experience
       - Why you want to be a guide
       - Submit button

     * FAQ section (guide specific)

   - become-agency.blade.php (Register Agency)
     * Similar structure to become-guide
     * Agency-specific content
     * Registration form
     * Requirements for agencies
     * Benefits
     * Success stories

4. JavaScript:
   - Homepage:
     * Animated counters for stats
     * Testimonial carousel
     * Smooth scroll to sections
     * Newsletter form validation

   - Contact:
     * Form validation
     * Map integration
     * Success message

   - FAQ:
     * Accordion functionality
     * Search filter
     * Helpful vote AJAX

   - How It Works:
     * Tab switching
     * Video player

   - Forms:
     * Client-side validation
     * Character counters
     * Success/error handling

5. Validation Rules:
   - Contact form:
     * first_name: required, max:100
     * last_name: required, max:100
     * email: required, email
     * phone: nullable, regex:phone_pattern
     * subject: required
     * message: required, min:10, max:1000

   - Newsletter:
     * email: required, email, unique:newsletter_subscribers

   - Guide application:
     * Similar to contact with additional fields

   - Agency registration:
     * Company-specific fields

6. SEO Optimization:
   - Homepage:
     * Title: "AroundUz - Discover Uzbekistan with Local Guides"
     * Meta description
     * Open Graph tags
     * Structured data (Organization schema)

   - All pages:
     * Unique titles and meta
     * Canonical URLs
     * Alt text for images
     * Proper heading hierarchy

   - Sitemap
     * Include all static pages
     * Update on content change

7. Content Management:
   - Admin can edit static page content
   - WYSIWYG editor
   - Version control
   - Preview before publish

8. Newsletter:
   - Mailchimp integration
   - Or store in database
   - Send weekly digest
   - Unsubscribe link

9. Analytics:
   - Track page views
   - Bounce rate
   - Time on page
   - Conversion tracking (CTA clicks)
   - Form submissions
   - Newsletter signups

10. Responsive Design:
    - Mobile-first approach
    - Touch-friendly elements
    - Optimized images
    - Fast loading times

Ensure all pages use the designs I provided earlier. Maintain consistent branding and user experience."


STEP 19: Admin Panel - Dashboard
=================================
Context: Central admin dashboard with overview of platform metrics and quick actions.

Requirements:
- Overview statistics
- Charts and graphs
- Recent activities
- Quick actions
- System health monitoring

Prompt:
"Create comprehensive admin dashboard for AroundUz:

1. Routes (web.php - prefix: /admin, middleware: auth, role:admin):
   - GET /admin/dashboard - admin home
   - GET /admin/stats - fetch statistics (API)
   - GET /admin/chart-data/{type} - fetch chart data

2. Admin\DashboardController methods:
   - index()
     * Calculate key metrics:
       - Total users (all, new this month)
       - Total guides (active, pending verification)
       - Total agencies (active, pending verification)
       - Total bookings (all, this month, today)
       - Total revenue (all time, this month, today)
       - Active subscriptions count
       - Active boosts count
       - Course enrollments (all, this month)

     * Fetch recent activities:
       - New registrations (last 10)
       - Recent bookings (last 10)
       - Pending verifications (guides and agencies)
       - Recent reviews (last 10)
       - Recent payments (last 10)

     * System health:
       - Database size
       - Storage usage
       - Queue jobs (pending, failed)
       - Cache status

     * Return dashboard view with data

   - stats()
     * API endpoint for real-time stats
     * Return JSON with current counts
     * Cache for 5 minutes

   - chartData($type)
     * Types: revenue, bookings, users, registrations
     * Return data for charts
     * Date ranges: last 7 days, 30 days, 12 months

3. Blade Views (resources/views/admin/):
   - layouts/admin.blade.php
     * Admin layout with sidebar
     * Top navigation bar
     * Sidebar menu:
       - Dashboard (home icon)
       - Users (users icon)
       - Guides (user-tie icon)
       - Agencies (building icon)
       - Bookings (calendar icon)
       - Reviews (star icon)
       - Payments (dollar icon)
       - Subscriptions (card icon)
       - Boosts (rocket icon)
       - Courses (graduation-cap icon)
       - Content (file icon)
       - Settings (cog icon)
       - Logout
     * Breadcrumb navigation
     * Notification bell
     * Admin profile dropdown

   - dashboard/index.blade.php
     * Page header
       - "Dashboard" heading
       - Date range selector (Today, This Week, This Month, Custom)
       - Refresh button

     * Overview cards (4 cards in row)
       Card 1: Total Revenue
       - Amount (large, bold)
       - Change percentage (this month vs last)
       - Trend arrow (up/down)
       - Icon (dollar sign)
       - Chart sparkline

       Card 2: Total Bookings
       - Count
       - Change percentage
       - Trend arrow
       - Icon (calendar)
       - Chart sparkline

       Card 3: Active Users
       - Count
       - Change percentage
       - Trend arrow
       - Icon (users)
       - Chart sparkline

       Card 4: New Guides
       - Count
       - Pending verification count
       - Icon (user-tie)

     * Charts section (2 columns)
       Left: Revenue Chart
       - Line chart
       - Last 30 days
       - Breakdown by type (bookings, subscriptions, boosts, courses)
       - Toggle between daily, weekly, monthly

       Right: Bookings Chart
       - Bar chart
       - Last 30 days
       - Completed vs Cancelled

     * User Growth Chart (full width)
       - Area chart
       - New users by day
       - Separate lines: Total, Guides, Agencies
       - Last 90 days

     * Quick actions section (4 columns)
       - Verify Guide (count badge)
       - Verify Agency (count badge)
       - Review Bookings (count)
       - Moderate Reviews (count)

     * Recent Activities (2 columns)
       Left: Recent Registrations
       - Table with: Avatar, Name, Type (User/Guide/Agency), Date, Status
       - View All link

       Right: Recent Bookings
       - Table with: Ref#, User, Guide/Agency, Date, Amount, Status
       - View All link

     * Pending Actions (2 columns)
       Left: Pending Verifications
       - Guide verifications (count)
       - Agency verifications (count)
       - Review all link

       Right: Flagged Content
       - Reported reviews (count)
       - Reported messages (count)
       - Review all link

     * System Status section
       - Database size: XX GB
       - Storage usage: XX GB / YY GB
       - Queue jobs: X pending, Y failed
       - Cache: Active/Inactive
       - Last backup: [date]
       - System health: Good/Warning/Critical

     * Top Performers (3 columns)
       Column 1: Top Guides
       - Avatar, Name, Rating, Bookings, Revenue
       - Top 5

       Column 2: Top Agencies
       - Logo, Name, Rating, Bookings, Revenue
       - Top 5

       Column 3: Popular Destinations
       - Name, Views, Bookings
       - Top 5

4. Components (resources/views/admin/components/):
   - stat-card.blade.php
     * Reusable stat card
     * Props: title, value, change_percent, icon, color, sparkline_data

   - activity-item.blade.php
     * Activity list item
     * Props: activity

   - quick-action-card.blade.php
     * Quick action button with badge
     * Props: title, icon, count, route

5. JavaScript (resources/js/admin.js):
   - Real-time stats update
     * Poll stats endpoint every 30 seconds
     * Update card values
     * Animate number changes

   - Charts
     * Chart.js integration
     * Line, bar, area, sparkline charts
     * Interactive tooltips
     * Responsive
     * Data refresh on date range change

   - Date range selector
     * Update all charts/stats based on range
     * Custom date picker

   - Sidebar toggle
     * Collapse/expand sidebar
     * Remember state in localStorage

   - Quick actions
     * Click to navigate
     * Badge update on action completion

6. Chart Data Queries:
   - Revenue chart:
```php
     $revenue = Payment::where('status', 'completed')
         ->whereBetween('created_at', [$startDate, $endDate])
         ->selectRaw('DATE(created_at) as date, SUM(amount) as total')
         ->groupBy('date')
         ->orderBy('date')
         ->get();
```

   - Bookings chart:
```php
     $bookings = Booking::whereBetween('created_at', [$startDate, $endDate])
         ->selectRaw('DATE(created_at) as date, status, COUNT(*) as count')
         ->groupBy('date', 'status')
         ->get();
```

   - User growth:
```php
     $users = User::whereBetween('created_at', [$startDate, $endDate])
         ->selectRaw('DATE(created_at) as date, role, COUNT(*) as count')
         ->groupBy('date', 'role')
         ->get();
```

7. Caching Strategy:
   - Cache overview stats for 5 minutes
   - Cache chart data for 15 minutes
   - Clear cache on relevant updates
   - Use Redis for better performance

8. Performance Optimization:
   - Eager load relationships
   - Use DB queries instead of Eloquent where possible
   - Index frequently queried columns
   - Paginate large datasets
   - Lazy load charts (load on scroll)

9. Responsive Design:
   - Mobile: Single column layout
   - Tablet: 2 column layout
   - Desktop: Full layout
   - Touch-friendly elements
   - Optimized charts for mobile

10. Security:
    - Verify admin role on all requests
    - CSRF protection
    - Rate limiting
    - Activity logging
    - IP whitelisting (optional)

Ensure admin dashboard loads quickly and provides actionable insights."


STEP 20: Admin Panel - User Management
======================================
Context: Comprehensive user management system for admins.

Requirements:
- User list with filters
- View user details
- Edit user information
- Suspend/activate users
- Delete users
- User activity logs
- Bulk actions

Prompt:
"Create user management system for admin panel:

1. Routes (web.php - prefix: /admin, middleware: auth, role:admin):
   - GET /admin/users - user list
   - GET /admin/users/{id} - user details
   - GET /admin/users/{id}/edit - edit user form
   - PUT /admin/users/{id} - update user
   - POST /admin/users/{id}/suspend - suspend user
   - POST /admin/users/{id}/activate - activate user
   - DELETE /admin/users/{id} - delete user
   - GET /admin/users/{id}/activity - user activity log
   - POST /admin/users/bulk-action - bulk actions
   - GET /admin/users/export - export users

2. Admin\UserController methods:
   - index(Request $request)
     * Fetch users with filters:
       - Search: name, email
       - Role: user, guide, agency
       - Status: active, inactive, suspended
       - Date range: registered between dates
     * Sort options: newest, oldest, name A-Z, name Z-A
     * Pagination (50 per page)
     * Show total counts per role/status

   - show($id)
     * Fetch user with: guide profile, agency profile, bookings, reviews, subscriptions, payments
     * Show complete user information
     * Show statistics:
       - Total bookings
       - Total spent/earned
       - Active subscriptions
       - Reviews given/received
       - Account age
     * Show activity timeline

   - edit($id)
     * Show edit user form
     * Can edit: name, email, phone, role, status

   - update($id, Request $request)
     * Validate changes
     * Update user record
     * Log admin action
     * Send notification to user if email changed
     * Return success

   - suspend($id, Request $request)
     * Validate reason
     * Update status to suspended
     * Log admin action
     * Send suspension email to user
     * Cancel active bookings (optional)
     * Return success

   - activate($id)
     * Update status to active
     * Log admin action
     * Send activation email
     * Return success

   - destroy($id, Request $request)
     * Confirm deletion
     * Soft delete or permanent delete
     * Anonymize data (GDPR)
     * Cancel bookings
     * Cancel subscriptions
     * Log admin action
     * Return success

   - activity($id)
     * Fetch user's activity logs
     * Show: logins, bookings, reviews, payments, profile changes
     * Pagination

   - bulkAction(Request $request)
     * Actions: activate, suspend, delete, export
     * Validate user IDs
     * Perform action on multiple users
     * Log actions
     * Return results

   - export(Request $request)
     * Export users to CSV/Excel
     * Apply current filters
     * Include selected fields
     * Return download

3. Blade Views (resources/views/admin/users/):
   - index.blade.php (User List)
     * Page header
       - "Users" heading
       - Total count
       - Export button
       - Add User button (optional)

     * Filter section
       - Search bar (name, email)
       - Role filter (dropdown)
       - Status filter (dropdown)
       - Date range picker
       - Apply Filters button
       - Clear Filters button

     * Stats cards (above table)
       - Total Users
       - Active Users
       - Guides
       - Agencies
       - Suspended

     * Users table
       - Bulk select checkbox (select all)
       - Columns:
         * Checkbox (select)
         * Avatar
         * Name (link to details)
         * Email
         * Phone
         * Role (badge)
         * Status (badge: green/red/yellow)
         * Registered (date)
         * Last Login
         * Actions (dropdown)

       - Actions dropdown per user:
         * View Details
         * Edit
         * Suspend/Activate
         * Delete
         * View Activity
         * Impersonate (login as user - optional)

       - Pagination with page size selector

     * Bulk actions bar (shown when items selected)
       - "[X] users selected"
       - Actions:
         * Activate
         * Suspend
         * Delete
         * Export
       - Cancel button

     * Empty state
       - No users found icon
       - Try adjusting filters

   - show.blade.php (User Details)
     * Breadcrumb

     * User header
       - Large avatar
       - Name and email
       - Role badge
       - Status badge
       - Member since date
       - Last login
       - Actions:
         * Edit button
         * Suspend/Activate button
         * Delete button
         * Send Email button

     * Tabs:
       - Overview (default)
       - Bookings
       - Reviews
       - Payments
       - Subscriptions
       - Activity Log

     * Overview Tab
       - Personal Information card
         * Name, Email, Phone
         * Date of birth (if provided)
         * Address

       - Statistics cards (4 cards)
         * Total Bookings
         * Total Spent/Earned
         * Reviews Count
         * Active Subscriptions

       - Account Information card
         * Registered date
         * Email verified
         * Last login
         * IP address
         * Device info

       - Guide/Agency Profile (if applicable)
         * Profile completion %
         * Verification status
         * Quick view of profile
         * Link to full profile

       - Recent Activity
         * Last 10 activities
         * View All link

     * Bookings Tab
       - Bookings table
       - Filter: status
       - Pagination

     * Reviews Tab
       - Reviews given and received
       - Tabs: Given, Received
       - Review cards

     * Payments Tab
       - Payment history table
       - Total amount
       - Filter: status, date range

     * Subscriptions Tab
       - Active subscriptions
       - Subscription history
       - Total spent on subscriptions

     * Activity Log Tab
       - Activity timeline
       - Filters: activity type, date range
       - Shows: logins, profile updates, bookings, etc.

   - edit.blade.php (Edit User)
     * Breadcrumb

     * Edit form
       - Personal Information
         * Name (required)
         * Email (required, unique)
         * Phone (optional)

       - Account Settings
         * Role (dropdown: user, guide, agency, admin)
         * Status (dropdown: active, inactive, suspended)
         * Email verified (checkbox)

       - Password Reset
         * Send password reset link (button)

       - Danger Zone
         * Delete Account button (red)

       - Actions
         * Save Changes button
         * Cancel button

   - activity.blade.php (Activity Log)
     * Page header
     * Filter: activity type, date range
     * Activity timeline (vertical)
       Each activity:
       - Icon (type-specific)
       - Activity description
       - Timestamp
       - IP address
       - Device info
       - Additional details (expandable)
     * Pagination

4. Components:
   - user-status-badge.blade.php
     * Color-coded status badge
     * Props: status

   - user-role-badge.blade.php
     * Role badge with icon
     * Props: role

   - activity-timeline-item.blade.php
     * Activity timeline entry
     * Props: activity

5. JavaScript:
   - Bulk select
     * Select all checkbox
     * Individual checkboxes
     * Update selection count
     * Show/hide bulk actions bar

   - Filter application
     * Apply filters without page reload
     * Update URL parameters
     * Preserve filters on navigation

   - Suspend/Delete confirmations
     * Show modal with reason input
     * Confirm action
     * Show loading state

   - Activity log
     * Expand/collapse details
     * Infinite scroll

   - Export
     * Show export options modal
     * Select fields to export
     * Choose format (CSV/Excel)
     * Download file

6. Validation Rules:
   - Update user:
     * name: required, max:255
     * email: required, email, unique:users,email,{userId}
     * phone: nullable, regex:phone_pattern
     * role: required, in:user,guide,agency,admin
     * status: required, in:active,inactive,suspended

   - Suspend:
     * reason: required, max:500

   - Delete:
     * confirmation: required, in:DELETE
     * reason: required, max:500

7. Business Logic:
   - User Suspension:
     * Update status to suspended
     * Cancel active bookings (with refund)
     * Pause subscriptions
     * Disable login
     * Send notification email with reason
     * Log admin action

   - User Deletion:
     * Soft delete (recommended) or permanent
     * Anonymize personal data (GDPR compliance)
     * Transfer or delete user content
     * Cancel all active services
     * Send deletion confirmation
     * Log admin action

   - User Activation:
     * Update status to active
     * Re-enable login
     * Resume subscriptions (optional)
     * Send welcome back email
     * Log admin action

8. Activity Logging:
   - Log all admin actions:
     * User created/updated/deleted
     * User suspended/activated
     * Bulk actions performed

   - Include in logs:
     * Admin user ID
     * Action performed
     * Target user ID
     * Timestamp
     * IP address
     * Changes made (before/after)

9. Security:
   - Verify admin role
   - Log all sensitive actions
   - Rate limit bulk actions
   - Require confirmation for destructive actions
   - Two-factor authentication for admin (optional)

10. Performance:
    - Index database columns used in filters
    - Use pagination for large datasets
    - Cache user counts
    - Optimize queries with eager loading

11. Export Functionality:
    - Use Laravel Excel package
    - Export formats: CSV, XLSX
    - Include fields:
      * ID, Name, Email, Phone, Role, Status
      * Registered date, Last login
      * Bookings count, Total spent/earned
    - Respect current filters
    - Handle large exports (queue job)

12. Impersonate Feature (Optional):
    - Admin can login as any user
    - To see user's perspective
    - Banner showing "Viewing as [User]"
    - "Return to Admin" button
    - Log impersonation actions

Ensure proper authorization and audit logging for all admin actions."


STEP 21: Admin Panel - Guide Management
=======================================
Context: Manage guide profiles, verifications, and certifications.

Requirements:
- Guide list with filters
- Verification workflow
- Review certifications
- Approve/reject profiles
- Guide analytics
- Featured guides management

Prompt:
"Create guide management system for admin panel:

1. Routes (web.php - prefix: /admin, middleware: auth, role:admin):
   - GET /admin/guides - guide list
   - GET /admin/guides/{id} - guide details
   - GET /admin/guides/{id}/verify - verification page
   - POST /admin/guides/{id}/verify - process verification
   - POST /admin/guides/{id}/reject - reject verification
   - POST /admin/guides/{id}/feature - toggle featured status
   - GET /admin/guides/{id}/certifications - view certifications
   - POST /admin/guides/{id}/certifications/{certId}/approve - approve certification
   - POST /admin/guides/{id}/certifications/{certId}/reject - reject certification
   - GET /admin/guides/pending - pending verifications
   - POST /admin/guides/bulk-verify - bulk verification

2. Admin\GuideController methods:
   - index(Request $request)
     * Fetch guides with filters:
       - Search: name, email, location
       - Status: online, offline, busy
       - Verification: verified, pending, rejected
       - Rating: min rating
       - City
       - Language
       - Specialization
     * Sort: newest, rating, tours completed, experience
     * Pagination (50 per page)

   - show($id)
     * Fetch guide with: user, languages, specializations, certifications, itineraries, reviews, bookings
     * Show complete guide profile
     * Show statistics:
       - Total tours
       - Total earnings
       - Average rating
       - Reviews count
       - Response time
       - Acceptance rate
     * Show verification status and history

   - showVerificationPage($id)
     * Show guide details for verification
     * Certification documents
     * Profile information
     * Verification checklist

   - verify($id, Request $request)
     * Validate admin decision
     * Update verified status to true
     * Approve all valid certifications
     * Send verification success email to guide
     * Create verified badge
     * Log admin action
     * Return success

   - reject($id, Request $request)
     * Validate rejection reason
     * Update verified status to false
     * Send rejection email with reason and improvements needed
     * Log admin action
     * Return success

   - toggleFeatured($id)
     * Toggle featured status
     * Update guide record
     * Log action
     * Return success

   - certifications($id)
     * List guide's certifications
     * Show status: pending, approved, rejected
     * Show documents

   - approveCertification($id, $certId)
     * Update certification status to approved
     * Send notification to guide
     * Log action

   - rejectCertification($id, $certId, Request $request)
     * Validate rejection reason
     * Update status to rejected
     * Send rejection email with reason
     * Log action

   - pendingVerifications()
     * List all guides pending verification
     * Priority order: oldest first
     * Show profile completion %

   - bulkVerify(Request $request)
     * Verify multiple guides
     * Validate guide IDs
     * Update all to verified
     * Send notifications
     * Log actions

3. Blade Views (resources/views/admin/guides/):
   - index.blade.php (Guide List)
     * Page header
       - "Guides" heading
       - Total count
       - Pending Verification badge (count)
       - Export button

     * Quick stats cards
       - Total Guides
       - Verified Guides
       - Pending Verification
       - Featured Guides
       - Average Rating

     * Filter section
       - Search bar
       - Verification status filter
       - City filter
       - Rating filter (dropdown)
       - Language filter
       - Specialization filter
       - Apply/Clear buttons

     * Guides table
       - Columns:
         * Avatar
         * Name (link to details)
         * Email
         * Location
         * Rating (stars + count)
         * Tours Completed
         * Verification (badge)
         * Featured (toggle)
         * Status (online/offline)
         * Actions (dropdown)

       - Actions:
         * View Details
         * Verify (if pending)
         * Toggle Featured
         * View Certifications
         * Suspend
         * View as User

       - Pagination

     * Pending verification alert (if any)
       - "X guides pending verification"
       - Review Now button

   - show.blade.php (Guide Details)
     * Breadcrumb

     * Guide header
       - Avatar and cover image
       - Name and title
       - Verification badge (with date)
       - Featured star (if featured)
       - Status indicator
       - Actions:
         * Edit Profile
         * Verify/Unverify
         * Toggle Featured
         * Suspend
         * Delete

     * Tabs:
       - Overview
       - Certifications
       - Itineraries
       - Bookings
       - Reviews
       - Earnings
       - Activity Log

     * Overview Tab
       - Profile Information card
         * Bio
         * Experience years
         * Hourly/Daily rates
         * Languages (with flags)
         * Specializations
         * Contact information

       - Statistics cards (6 cards)
         * Total Tours
         * Total Earnings
         * Average Rating
         * Reviews Count
         * Response Time
         * Acceptance Rate

       - Verification Status card
         * Status badge
         * Verified by (admin name)
         * Verified on (date)
         * View verification history

       - Performance Metrics
         * Chart: Bookings over time
         * Chart: Rating trend
         * Popular itineraries

     * Certifications Tab
       - Certifications list
       Each certification:
       - Certification name
       - Issue date and expiry
       - Status badge (approved/pending/rejected)
       - View document button
       - Approve/Reject buttons (if pending)
       - Rejection reason (if rejected)

     * Itineraries Tab
       - Itineraries table
       - Columns: Title, Duration, Price, Bookings

     * Bookings Tab
       - Bookings table
       - Filter: status, date range
       - Stats: total, completed, cancelled

     * Reviews Tab
       - Reviews list
       - Average rating breakdown
       - Recent reviews

     * Earnings Tab
       - Total earnings
       - Earnings chart (monthly)
       - Breakdown by booking type
       - Payout history

     * Activity Log Tab
       - Activity timeline
       - Profile changes
       - Login history

   - verify.blade.php (Verification Page)
     * Breadcrumb

     * Verification checklist
       - Profile completeness (%)
       - Valid email âœ“
       - Phone verified âœ“
       - Profile photo âœ“
       - Cover photo âœ“
       - Bio completed âœ“
       - Rates set âœ“
       - Languages added âœ“
       - Specializations added âœ“
       - At least 1 certification âœ“

     * Guide Information (review)
       - All profile fields displayed
       - Edit link (to guide edit page)

     * Certifications Review
       - List of certifications
       - View documents
       - Approve/Reject each

     * Verification Decision
       - Approve button (green)
       - Reject button (red)

     * Rejection modal
       - Reason textarea (required)
       - Improvements needed (checklist)
       - Submit button

     * Approval confirmation
       - Success message
       - Send welcome email checkbox
       - Confirm button

   - pending.blade.php (Pending Verifications)
     * Page header
       - "Pending Verifications" heading
       - Count
       - Bulk Verify button (if applicable)

     * Pending guides list
       Each card:
       - Avatar and name
       - Submitted date
       - Profile completion %
       - Quick view of profile
       - Review button
       - Quick Approve button

     * Empty state
       - All caught up icon
       - "No pending verifications"

4. Components:
   - verification-badge.blade.php
     * Visual verification badge
     * Props: verified, date

   - certification-card.blade.php
     * Certification display with actions
     * Props: certification

   - guide-stat-card.blade.php
     * Stat card for guide metrics
     * Props: title, value, icon, change

5. JavaScript:
   - Verification
     * Show/hide rejection modal
     * Form validation
     * Checklist item toggle
     * Confirm before approve

   - Featured toggle
     * Toggle without page reload
     * Update UI immediately
     * Show success toast

   - Certification review
     * View document modal/lightbox
     * Approve/reject with AJAX
     * Update status in UI

   - Bulk verify
     * Select multiple guides
     * Confirm bulk action
     * Show progress

6. Validation Rules:
   - Verify:
     * admin_notes: nullable, max:500

   - Reject:
     * reason: required, max:500
     * improvements_needed: array

   - Certification approve:
     * admin_notes: nullable

   - Certification reject:
     * reason: required, max:500

7. Business Logic:
   - Guide Verification:
     * Check all requirements met
     * Review certifications
     * Approve/reject decision
     * If approved:
       - Set verified = true
       - Approve valid certifications
       - Send success email
       - Grant verified badge
       - Update search priority
     * If rejected:
       - Send rejection email with reason
       - List improvements needed
       - Guide can reapply after fixes
     * Log admin decision

   - Certification Review:
     * View uploaded documents
     * Verify authenticity
     * Check expiry dates
     * Approve or reject
     * Send notification to guide

   - Featured Guides:
     * Admin can mark guides as featured
     * Featured guides appear:
       - On homepage
       - Top of search results (within boosted tier)
       - Featured section
     * Limit: max 20 featured at once

8. Email Notifications:
   - GuideVerified
     * Congratulations message
     * Verified badge notification
     * Next steps
     * Marketing tips

   - GuideRejected
     * Rejection notification
     * Reason for rejection
     * Improvements needed
     * Reapplication instructions

   - CertificationApproved
     * Certification approved
     * Updated profile

   - CertificationRejected
     * Rejection reason
     * Re-upload instructions

9. Analytics:
   - Track:
     * Verification approval rate
     * Average verification time
     * Most common rejection reasons
     * Guide performance metrics
     * Featured guide conversion

10. Security:
    - Verify admin role
    - Log all verification decisions
    - Store rejection reasons
    - Audit trail for certifications

Implement thorough verification process to maintain platform quality."


STEP 22: Admin Panel - Agency Management
========================================
Context: Similar to guide management but for travel agencies.

Requirements:
- Agency list with filters
- Verification workflow
- License review
- Tour package management
- Agency analytics

Prompt:
"Create agency management system for admin panel (similar to guide management):

1. Routes (web.php - prefix: /admin, middleware: auth, role:admin):
   - GET /admin/agencies - agency list
   - GET /admin/agencies/{id} - agency details
   - GET /admin/agencies/{id}/verify - verification page
   - POST /admin/agencies/{id}/verify - process verification
   - POST /admin/agencies/{id}/reject - reject verification
   - POST /admin/agencies/{id}/feature - toggle featured
   - GET /admin/agencies/{id}/packages - view tour packages
   - POST /admin/agencies/{id}/packages/{pkgId}/approve - approve package
   - POST /admin/agencies/{id}/packages/{pkgId}/reject - reject package
   - GET /admin/agencies/pending - pending verifications
   - POST /admin/agencies/bulk-verify - bulk verification

2. Admin\AgencyController methods:
   - Similar structure to GuideController
   - index(Request $request) - list agencies with filters
   - show($id) - agency details and statistics
   - showVerificationPage($id) - verification review
   - verify($id, Request $request) - approve agency
   - reject($id, Request $request) - reject with reason
   - toggleFeatured($id) - feature/unfeature
   - packages($id) - list tour packages
   - approvePackage($id, $pkgId) - approve package
   - rejectPackage($id, $pkgId, Request $request) - reject package
   - pendingVerifications() - pending list
   - bulkVerify(Request $request) - bulk approve

3. Blade Views (resources/views/admin/agencies/):
   - index.blade.php - agency list table
   - show.blade.php - agency details with tabs
   - verify.blade.php - verification review page
   - pending.blade.php - pending verifications
   - Similar structure to guide views

4. Verification Checklist (Agency-specific):
   - Company name
   - Valid license number
   - License document uploaded
   - Logo and cover image
   - Contact information
   - At least 1 tour package
   - Team members added
   - Languages specified
   - Specializations added
   - Bank account details (for payouts)

5. License Review:
   - View license document
   - Verify license number with authority (manual)
   - Check expiry date
   - Approve or request resubmission

6. Tour Package Management:
   - View all packages per agency
   - Review package details
   - Approve/reject packages
   - Ensure accurate pricing
   - Check itinerary completeness

7. Similar tabs as guide management:
   - Overview
   - Tour Packages
   - Team Members
   - Bookings
   - Reviews
   - Earnings
   - Activity Log

8. Statistics:
   - Total tours conducted
   - Total revenue
   - Average rating
   - Active packages
   - Team size
   - Booking acceptance rate

Implement same verification rigor as guides to ensure quality agencies."


STEP 23: Admin Panel - Booking Management
=========================================
Context: Oversee all bookings, handle disputes, process refunds.

Requirements:
- Booking list with filters
- Booking details
- Status management
- Refund processing
- Dispute resolution
- Booking reports

Prompt:
"Create booking management system for admin panel:

1. Routes (web.php - prefix: /admin, middleware: auth, role:admin):
   - GET /admin/bookings - booking list
   - GET /admin/bookings/{id} - booking details
   - POST /admin/bookings/{id}/status - update status
   - POST /admin/bookings/{id}/refund - process refund
   - GET /admin/bookings/{id}/dispute - view dispute
   - POST /admin/bookings/{id}/resolve-dispute - resolve dispute
   - GET /admin/bookings/reports - booking reports
   - GET /admin/bookings/export - export bookings

2. Admin\BookingController methods:
   - index(Request $request)
     * Fetch bookings with filters:
       - Search: reference, user name, guide/agency name
       - Status: pending, confirmed, completed, cancelled
       - Payment status: pending, paid, refunded
       - Date range: booking date
       - Guide/Agency
       - Amount range
     * Sort: newest, oldest, amount high/low
     * Pagination (50 per page)

   - show($id)
     * Fetch booking with: user, guide/agency, payment, messages
     * Show all booking details
     * Show timeline of status changes
     * Show payment information
     * Show messages between parties
     * Show any disputes or issues

   - updateStatus($id, Request $request)
     * Validate new status
     * Update booking status
     * Send notifications to both parties
     * Log admin action
     * Return success

   - processRefund($id, Request $request)
     * Validate refund amount
     * Check refund eligibility
     * Process refund through payment gateway
     * Update booking and payment records
     * Send refund confirmation
     * Log admin action
     * Return success

   - showDispute($id)
     * Fetch dispute details
     * Show both parties' statements
     * Show evidence/attachments
     * Show admin notes

   - resolveDispute($id, Request $request)
     * Validate resolution decision
     * Award refund if applicable
     * Send resolution to both parties
     * Close dispute
     * Log admin decision
     * Return success

   - reports(Request $request)
     * Generate booking reports
     * Filters: date range, status, guide/agency
     * Show statistics:
       - Total bookings
       - Total revenue
       - Completion rate
       - Cancellation rate
       - Average booking value
     * Show charts:
       - Bookings over time
       - Revenue over time
       - Bookings by status
       - Top guides/agencies

   - export(Request $request)
     * Export bookings to CSV/Excel
     * Include: ref, user, guide/agency, date, amount, status
     * Apply current filters
     * Return download

3. Blade Views (resources/views/admin/bookings/):
   - index.blade.php (Booking List)
     * Page header
       - "Bookings" heading
       - Total count
       - Export button

     * Quick stats cards
       - Total Bookings
       - Pending Bookings
       - Completed Today
       - Total Revenue Today
       - Refund Requests

     * Filter section
       - Search bar (ref, names)
       - Status filter (dropdown)
       - Payment status filter
       - Date range picker
       - Guide/Agency filter
       - Amount range
       - Apply/Clear buttons

     * Bookings table
       - Columns:
         * Reference # (link)
         * User (avatar + name)
         * Guide/Agency (avatar + name)
         * Date (tour date)
         * Amount
         * Status (badge)
         * Payment (badge)
         * Created (date)
         * Actions (dropdown)

       - Actions:
         * View Details
         * Update Status
         * Process Refund
         * View Messages
         * Cancel Booking

       - Color coding by status
       - Pagination

   - show.blade.php (Booking Details)
     * Breadcrumb

     * Booking header
       - Reference number (large)
       - Status badge (large)
       - Payment status badge
       - Created date
       - Actions:
         * Update Status (dropdown)
         * Process Refund
         * Export PDF
         * Send Reminder

     * Two-column layout:
       Left: Booking Details
       - User Information card
         * Avatar and name
         * Email and phone
         * View Profile link

       - Guide/Agency Information card
         * Avatar/Logo and name
         * Contact info
         * View Profile link

       - Tour Details card
         * Tour date and time
         * Duration
         * Number of people
         * Service type
         * Special requests
         * Itinerary (if selected)

       - Price Breakdown card
         * Base price
         * Extra charges
         * Service fee
         * Discount (if any)
         * Total amount

       Right: Timeline & Actions
       - Status Timeline
         * Created
         * Confirmed
         * Completed
         * Cancelled (if applicable)
         * Refunded (if applicable)
         * Each with timestamp and admin who made change

       - Payment Information card
         * Payment method
         * Transaction ID
         * Payment date
         * Amount
         * Invoice link

       - Messages card
         * Conversation between user and guide/agency
         * Latest 5 messages
         * View All link

       - Admin Notes card
         * Internal notes text area
         * Save button
         * History of admin notes

       - Dispute Information (if any)
         * Dispute reason
         * Filed by
         * Evidence
         * Resolution status
         * Resolve button

     * Actions section
       - Update Status dropdown
         * Confirm
         * Complete
         * Cancel
         * Refund
       - Process Refund button
       - Contact User button
       - Contact Guide/Agency button

   - refund-modal.blade.php
     * Refund form modal
     * Refund amount (pre-filled, editable)
     * Refund reason (dropdown)
     * Admin notes (textarea)
     * Confirm Refund button

   - dispute.blade.php (Dispute Details)
     * Dispute information
     * User's statement
     * Guide/Agency's statement
     * Evidence attachments
     * Admin resolution form
     * Decision: Favor User / Favor Guide / Split
     * Refund amount (if applicable)
     * Resolution notes
     * Resolve button

   - reports.blade.php (Booking Reports)
     * Page header
     * Date range selector
     * Filter section

     * Overview statistics cards
       - Total Bookings
       - Total Revenue
       - Average Booking Value
       - Completion Rate
       - Cancellation Rate

     * Charts
       - Bookings Over Time (line chart)
       - Revenue Over Time (line chart)
       - Bookings by Status (pie chart)
       - Top Guides/Agencies (bar chart)

     * Detailed tables
       - Bookings Summary
       - Revenue Breakdown

     * Export button

4. JavaScript:
   - Status update
     * Show confirmation modal
     * AJAX update
     * Update UI immediately
     * Show toast notification

   - Refund processing
     * Show refund modal
     * Calculate refund amount
     * Confirm before process
     * Show loading during process
     * Show success/error

   - Dispute resolution
     * Load dispute details
     * Show resolution form
     * Validate decision
     * Submit resolution

   - Reports
     * Interactive charts
     * Date range update
     * Filter application
     * Export functionality

5. Validation Rules:
   - Update status:
     * status: required, in:pending,confirmed,completed,cancelled
     * admin_notes: nullable, max:500

   - Process refund:
     * amount: required, numeric, min:0, max:booking_total
     * reason: required, max:500
     * admin_notes: nullable, max:500

   - Resolve dispute:
     * decision: required, in:favor_user,favor_guide,split
     * refund_amount: required_if:decision,favor_user,split
     * resolution_notes: required, max:1000

6. Business Logic:
   - Status Updates:
     * Validate status transition
     * Send notifications to both parties
     * Update related records
     * Log admin action

   - Refund Processing:
     * Check refund policy
     * Calculate refund amount
     * Process through payment gateway
     * Update booking status
     * Update payment record
     * Send confirmations
     * Log transaction

   - Dispute Resolution:
     * Review evidence from both parties
     * Make fair decision
     * Process refund if awarded
     * Send resolution to both parties
     * Close dispute
     * Log decision and reasoning

7. Email Notifications:
   - BookingStatusUpdated
     * To both parties
     * New status
     * Reason (if provided)

   - RefundProcessed
     * To user
     * Refund amount
     * Refund method
     * Timeline

   - DisputeResolved
     * To both parties
     * Resolution decision
     * Refund details (if applicable)
     * Admin reasoning

8. Reports:
   - Daily bookings report
   - Revenue report
   - Cancellation report
   - Top performers report
   - Export to PDF/Excel

9. Security:
   - Verify admin permissions
   - Log all actions
   - Require confirmation for refunds
   - Audit trail for disputes

Implement fair dispute resolution process and secure refund handling."

STEP 24: Admin Panel - Content Management
=========================================
Context: Manage all platform content including static pages, FAQs, destinations, and blog posts.

Requirements:
- Page editor for static content
- FAQ management
- Destination management
- Blog/news management
- Media library
- SEO settings per page

Prompt:
"Create content management system for admin panel:

1. Routes (web.php - prefix: /admin, middleware: auth, role:admin):
   - GET /admin/pages - page list
   - GET /admin/pages/{id}/edit - edit page
   - PUT /admin/pages/{id} - update page

   - GET /admin/faqs - FAQ list
   - GET /admin/faqs/create - create FAQ
   - POST /admin/faqs - store FAQ
   - GET /admin/faqs/{id}/edit - edit FAQ
   - PUT /admin/faqs/{id} - update FAQ
   - DELETE /admin/faqs/{id} - delete FAQ
   - POST /admin/faqs/reorder - reorder FAQs

   - GET /admin/destinations - destination list
   - GET /admin/destinations/create - create destination
   - POST /admin/destinations - store destination
   - GET /admin/destinations/{id}/edit - edit destination
   - PUT /admin/destinations/{id} - update destination
   - DELETE /admin/destinations/{id} - delete destination

   - GET /admin/blog - blog post list
   - GET /admin/blog/create - create post
   - POST /admin/blog - store post
   - GET /admin/blog/{id}/edit - edit post
   - PUT /admin/blog/{id} - update post
   - DELETE /admin/blog/{id} - delete post

   - GET /admin/media - media library
   - POST /admin/media/upload - upload media
   - DELETE /admin/media/{id} - delete media

2. Admin\PageController methods:
   - index()
     * List all static pages
     * Show: About, Contact, Terms, Privacy, How It Works, etc.
     * Show last updated date

   - edit($id)
     * Show page editor
     * Load page content
     * WYSIWYG editor
     * SEO fields

   - update($id, Request $request)
     * Validate content
     * Update page content
     * Update meta tags
     * Clear cache
     * Log change
     * Return success

3. Admin\FaqController methods:
   - index()
     * List all FAQs grouped by category
     * Show order
     * Show active/inactive status

   - create()
     * Show create form
     * Category selection

   - store(Request $request)
     * Validate: question, answer, category, order
     * Create FAQ record
     * Return success

   - edit($id)
     * Show edit form

   - update($id, Request $request)
     * Update FAQ
     * Clear cache

   - destroy($id)
     * Delete FAQ
     * Reorder remaining

   - reorder(Request $request)
     * Update order of FAQs
     * Drag and drop functionality

4. Admin\DestinationController methods:
   - index()
     * List all destinations
     * Show: name, region, views, bookings
     * Search and filter

   - create()
     * Show create form
     * Fields: name, slug, description, region, country, images

   - store(Request $request)
     * Validate destination data
     * Upload images
     * Create destination record
     * Return success

   - edit($id)
     * Show edit form with existing data

   - update($id, Request $request)
     * Update destination
     * Handle image updates

   - destroy($id)
     * Delete destination
     * Delete associated images

5. Admin\BlogController methods:
   - index()
     * List all blog posts
     * Filter: status (draft, published), category
     * Search by title

   - create()
     * Show blog post editor
     * Rich text editor
     * Featured image uploader
     * Category and tag selection

   - store(Request $request)
     * Validate: title, slug, content, excerpt, featured_image
     * Create blog post
     * Auto-generate slug if not provided
     * Return success

   - edit($id)
     * Show edit form

   - update($id, Request $request)
     * Update blog post
     * Handle image updates
     * Clear cache

   - destroy($id)
     * Soft delete blog post

6. Admin\MediaController methods:
   - index()
     * Show media library
     * Grid view of uploaded files
     * Filter by type: images, documents, videos
     * Search by filename

   - upload(Request $request)
     * Validate file
     * Upload to storage
     * Create media record
     * Return file URL

   - destroy($id)
     * Delete file from storage
     * Delete record

7. Blade Views (resources/views/admin/content/):
   - pages/index.blade.php (Page List)
     * List of static pages
     * Columns: Page Name, URL, Last Updated, Actions
     * Edit button per page

   - pages/edit.blade.php (Page Editor)
     * Page title
     * Rich text editor (TinyMCE or CKEditor)
       - Full toolbar
       - Image upload
       - Code view
       - Formatting options

     * SEO section
       - Meta Title
       - Meta Description
       - Meta Keywords
       - OG Image

     * Preview button
     * Save button
     * Publish/Unpublish toggle

   - faqs/index.blade.php (FAQ List)
     * Category tabs
     * FAQ list per category (draggable for reordering)
     * Each FAQ:
       - Question
       - Active toggle
       - Edit button
       - Delete button
     * Add New FAQ button

   - faqs/create.blade.php (Create FAQ)
     * Form:
       - Category (dropdown)
       - Question (input)
       - Answer (textarea with rich text)
       - Order (number)
       - Active (checkbox)
     * Submit button

   - faqs/edit.blade.php (Edit FAQ)
     * Same as create with existing data

   - destinations/index.blade.php (Destination List)
     * Destinations table
     * Columns: Image, Name, Region, Views, Bookings, Actions
     * Search bar
     * Add New button

   - destinations/create.blade.php (Create Destination)
     * Form:
       - Name (required)
       - Slug (auto-generated)
       - Description (rich text)
       - Short Description
       - Region (dropdown)
       - Country (dropdown)
       - City
       - Featured Image (uploader)
       - Gallery Images (multiple uploader)
       - Top Attractions (repeater)
       - Best Time to Visit
       - Getting There
       - Where to Stay
       - SEO Meta Tags
     * Save button

   - destinations/edit.blade.php
     * Same as create with existing data

   - blog/index.blade.php (Blog Post List)
     * Posts table
     * Columns: Featured Image, Title, Author, Category, Status, Published Date, Views, Actions
     * Filter: Status, Category
     * Search bar
     * Add New Post button

   - blog/create.blade.php (Create Blog Post)
     * Form:
       - Title (required)
       - Slug (auto-generated)
       - Content (rich text editor)
       - Excerpt (textarea)
       - Featured Image (uploader)
       - Category (dropdown)
       - Tags (multi-select)
       - Status (draft/published)
       - Publish Date
       - Author (auto-filled)
       - SEO Meta Tags
     * Save Draft button
     * Publish button

   - blog/edit.blade.php
     * Same as create with existing data

   - media/library.blade.php (Media Library)
     * Upload area (drag & drop)
     * Grid view of media files
     * Each file:
       - Thumbnail
       - Filename
       - File size
       - Upload date
       - Copy URL button
       - Delete button
     * Filter by type
     * Search by filename
     * Pagination

8. JavaScript:
   - Rich text editor
     * TinyMCE integration
     * Image upload
     * Media library integration
     * Custom toolbar

   - Slug generation
     * Auto-generate from title
     * Make URL-friendly
     * Check uniqueness

   - Image upload
     * Drag and drop
     * Preview before upload
     * Progress bar
     * Multiple upload

   - FAQ reordering
     * Sortable.js for drag and drop
     * Save new order via AJAX

   - Media library
     * Grid view
     * Select media
     * Copy URL to clipboard
     * Delete confirmation

9. Validation Rules:
   - Page update:
     * content: required
     * meta_title: nullable, max:60
     * meta_description: nullable, max:160

   - FAQ:
     * question: required, max:255
     * answer: required
     * category: required
     * order: integer

   - Destination:
     * name: required, max:255
     * slug: required, unique, alpha_dash
     * description: required
     * region_id: required, exists
     * featured_image: required, image, max:2048

   - Blog post:
     * title: required, max:255
     * slug: required, unique, alpha_dash
     * content: required
     * excerpt: required, max:500
     * featured_image: required, image, max:2048
     * status: required, in:draft,published

   - Media upload:
     * file: required, mimes:jpg,jpeg,png,gif,pdf,doc,docx, max:10240

10. SEO Optimization:
    - Auto-generate meta tags from content
    - Slug validation and uniqueness
    - Sitemap auto-update on content change
    - OG image generation
    - Canonical URLs

11. Content Versioning (Optional):
    - Save content history
    - Restore previous versions
    - Track who made changes
    - Compare versions

12. Caching:
    - Cache static pages for 1 hour
    - Clear cache on update
    - Cache destinations and FAQs
    - Refresh cache automatically

13. Media Management:
    - Organize in folders (optional)
    - Compress images on upload
    - Generate thumbnails
    - Track usage (where used)
    - Unused media detection

Implement robust content management with version control and caching."


STEP 25: Admin Panel - Settings
===============================
Context: System-wide settings and configurations.

Requirements:
- General settings
- Email settings
- Payment gateway settings
- Notification settings
- Social media settings
- Localization settings
- Maintenance mode

Prompt:
"Create settings management for admin panel:

1. Routes (web.php - prefix: /admin, middleware: auth, role:admin):
   - GET /admin/settings - settings page
   - POST /admin/settings/general - update general settings
   - POST /admin/settings/email - update email settings
   - POST /admin/settings/payment - update payment settings
   - POST /admin/settings/social - update social settings
   - POST /admin/settings/localization - update localization
   - POST /admin/settings/maintenance - toggle maintenance mode
   - POST /admin/settings/test-email - send test email
   - POST /admin/settings/clear-cache - clear all caches

2. Admin\SettingsController methods:
   - index()
     * Show settings page
     * Load all settings from database/config
     * Organize by tabs

   - updateGeneral(Request $request)
     * Validate general settings
     * Update: site_name, site_logo, site_favicon, site_description, contact_email, contact_phone, address
     * Store in settings table
     * Clear cache
     * Return success

   - updateEmail(Request $request)
     * Validate email settings
     * Update: mail_driver, smtp_host, smtp_port, smtp_username, smtp_password, from_email, from_name
     * Update .env file
     * Clear config cache
     * Return success

   - updatePayment(Request $request)
     * Validate payment settings
     * Update: stripe_public_key, stripe_secret_key, paypal_client_id, paypal_secret, payment_currency, commission_rate
     * Update .env file or database
     * Clear cache
     * Return success

   - updateSocial(Request $request)
     * Validate social media links
     * Update: facebook_url, instagram_url, twitter_url, linkedin_url, youtube_url
     * Store in settings
     * Return success

   - updateLocalization(Request $request)
     * Validate localization settings
     * Update: default_language, default_timezone, date_format, time_format, currency_symbol, currency_position
     * Store in settings
     * Clear cache
     * Return success

   - toggleMaintenance(Request $request)
     * Enable/disable maintenance mode
     * Update maintenance mode setting
     * Redirect with message

   - sendTestEmail(Request $request)
     * Validate test email address
     * Send test email using current settings
     * Return success/failure

   - clearCache()
     * Clear application cache
     * Clear config cache
     * Clear route cache
     * Clear view cache
     * Return success

3. Blade Views (resources/views/admin/settings/):
   - index.blade.php (Settings Page)
     * Page header
       - "Settings" heading
       - Save All button

     * Tabs (vertical sidebar or horizontal)
       - General
       - Email Configuration
       - Payment Gateways
       - Social Media
       - Localization
       - Advanced

     * General Tab
       - Site Information
         * Site Name (input)
         * Site Tagline (input)
         * Site Description (textarea)
         * Logo Upload (with preview)
         * Favicon Upload (with preview)

       - Contact Information
         * Contact Email (email input)
         * Contact Phone (phone input)
         * Address (textarea)
         * Support Email

       - Business Information
         * Company Registration Number
         * Tax ID
         * Business Address

       - Save button

     * Email Configuration Tab
       - SMTP Settings
         * Mail Driver (dropdown: smtp, sendmail, mailgun, etc.)
         * SMTP Host
         * SMTP Port
         * SMTP Username
         * SMTP Password (password input)
         * SMTP Encryption (dropdown: tls, ssl)

       - Email Defaults
         * From Email
         * From Name
         * Reply-To Email

       - Test Email Section
         * Test Email Address (input)
         * Send Test Email button

       - Save button

     * Payment Gateways Tab
       - Stripe Settings
         * Enable Stripe (toggle)
         * Publishable Key
         * Secret Key
         * Webhook Secret

       - PayPal Settings
         * Enable PayPal (toggle)
         * Mode (sandbox/live)
         * Client ID
         * Secret

       - General Payment Settings
         * Default Currency (dropdown)
         * Currency Symbol
         * Commission Rate (percentage)
         * Tax Rate (percentage)

       - Save button

     * Social Media Tab
       - Social Media Links
         * Facebook URL
         * Instagram URL
         * Twitter URL
         * LinkedIn URL
         * YouTube URL
         * TikTok URL

       - Social Login Settings
         * Enable Facebook Login (toggle)
         * Facebook App ID
         * Facebook App Secret
         * Enable Google Login (toggle)
         * Google Client ID
         * Google Client Secret

       - Save button

     * Localization Tab
       - Regional Settings
         * Default Language (dropdown)
         * Available Languages (multi-select)
         * Default Timezone (dropdown)
         * Date Format (dropdown)
         * Time Format (12h/24h)

       - Currency Settings
         * Default Currency (dropdown)
         * Currency Position (before/after)
         * Decimal Places
         * Thousand Separator
         * Decimal Separator

       - Save button

     * Advanced Tab
       - Performance
         * Enable Caching (toggle)
         * Cache Duration (minutes)
         * Enable Query Logging (toggle)
         * Clear Cache button

       - Security
         * Enable Two-Factor Auth (toggle)
         * Session Timeout (minutes)
         * Password Min Length
         * Require Email Verification (toggle)

       - Maintenance Mode
         * Enable Maintenance Mode (toggle)
         * Maintenance Message (textarea)
         * Allowed IPs (textarea, one per line)

       - Backups
         * Last Backup Date
         * Backup Frequency (dropdown)
         * Run Backup Now button

       - System Information
         * PHP Version
         * Laravel Version
         * Database Type and Version
         * Server OS
         * Disk Space

       - Save button

4. Settings Storage:
   - Create settings table:
```php
     Schema::create('settings', function (Blueprint $table) {
         $table->id();
         $table->string('key')->unique();
         $table->text('value')->nullable();
         $table->string('type')->default('string'); // string, boolean, integer, json
         $table->string('group')->nullable(); // general, email, payment, etc.
         $table->timestamps();
     });
```

   - Helper function to get/set settings:
```php
     function setting($key, $default = null) {
         return cache()->remember("setting_{$key}", 3600, function() use ($key, $default) {
             $setting = Setting::where('key', $key)->first();
             return $setting ? $setting->value : $default;
         });
     }

     function setSetting($key, $value, $type = 'string', $group = null) {
         Setting::updateOrCreate(
             ['key' => $key],
             ['value' => $value, 'type' => $type, 'group' => $group]
         );
         cache()->forget("setting_{$key}");
     }
```

5. JavaScript:
   - Tab switching
     * Show/hide tab content
     * Maintain state in URL

   - Image upload preview
     * Show preview of logo/favicon
     * Remove and re-upload

   - Form validation
     * Validate before submit
     * Show inline errors

   - Test email
     * AJAX request
     * Show sending state
     * Show success/error message

   - Clear cache
     * Confirmation dialog
     * AJAX request
     * Show progress
     * Show success message

6. Validation Rules:
   - General settings:
     * site_name: required, max:255
     * contact_email: required, email
     * site_logo: nullable, image, max:2048
     * site_favicon: nullable, image, max:512

   - Email settings:
     * smtp_host: required_if:mail_driver,smtp
     * smtp_port: required_if:mail_driver,smtp, integer
     * from_email: required, email

   - Payment settings:
     * stripe_secret_key: required_if:enable_stripe,true
     * commission_rate: numeric, min:0, max:100

   - Social settings:
     * facebook_url: nullable, url
     * instagram_url: nullable, url

7. Security:
   - Encrypt sensitive settings (API keys, passwords)
   - Validate admin permissions
   - Log all settings changes
   - Backup settings before changes
   - Environment variable protection

8. Environment File Updates:
   - Update .env file for critical settings
   - Use setEnvironmentValue() helper:
```php
     function setEnvironmentValue($key, $value) {
         $path = base_path('.env');
         if (file_exists($path)) {
             file_put_contents($path, str_replace(
                 $key . '=' . env($key),
                 $key . '=' . $value,
                 file_get_contents($path)
             ));
         }
     }
```
   - Clear config cache after update

9. Maintenance Mode:
   - Enable/disable via settings
   - Custom maintenance message
   - IP whitelist for admin access
   - Schedule maintenance window
   - Notify users before maintenance

10. Backup System:
    - Automated database backups
    - Schedule: daily, weekly, monthly
    - Store on: local, S3, Dropbox
    - Retention policy
    - Restore functionality

11. Cache Management:
    - Clear different cache types
    - View cache statistics
    - Warm up cache after clear
    - Selective cache clearing

12. System Health Check:
    - Check database connection
    - Check storage permissions
    - Check queue status
    - Check external services (Stripe, PayPal)
    - Display warnings if issues

Implement secure settings management with proper validation and audit logging."


STEP 26: Admin Panel - Reports & Analytics
==========================================
Context: Comprehensive reporting and analytics dashboard.

Requirements:
- Revenue reports
- User analytics
- Booking analytics
- Guide/Agency performance
- Export functionality
- Custom date ranges

Prompt:
"Create reports and analytics system for admin panel:

1. Routes (web.php - prefix: /admin, middleware: auth, role:admin):
   - GET /admin/reports - reports dashboard
   - GET /admin/reports/revenue - revenue report
   - GET /admin/reports/bookings - booking analytics
   - GET /admin/reports/users - user analytics
   - GET /admin/reports/guides - guide performance
   - GET /admin/reports/agencies - agency performance
   - GET /admin/reports/custom - custom report builder
   - POST /admin/reports/export - export report
   - GET /admin/analytics/realtime - real-time analytics

2. Admin\ReportController methods:
   - index()
     * Show reports dashboard
     * Overview of key metrics
     * Quick report cards
     * Charts for main KPIs

   - revenue(Request $request)
     * Date range: this month (default), custom
     * Calculate:
       - Total revenue
       - Revenue by source (bookings, subscriptions, boosts, courses)
       - Revenue by payment method
       - Revenue growth (vs previous period)
       - Average transaction value
     * Charts:
       - Revenue over time (line chart)
       - Revenue by source (pie chart)
       - Top revenue guides/agencies
     * Filters: date range, source type, payment method

   - bookings(Request $request)
     * Calculate:
       - Total bookings
       - Completed bookings
       - Cancelled bookings
       - Booking completion rate
       - Average booking value
       - Popular time slots
       - Popular destinations
     * Charts:
       - Bookings over time
       - Bookings by status
       - Bookings by guide/agency
       - Peak booking hours/days
     * Filters: date range, status, guide/agency

   - users(Request $request)
     * Calculate:
       - Total users
       - New users (by period)
       - Active users
       - User retention rate
       - User growth rate
       - Users by role
       - Users by location
     * Charts:
       - User growth over time
       - Users by role (pie chart)
       - User acquisition channels
       - Active vs inactive users
     * Filters: date range, role, status

   - guides(Request $request)
     * Calculate per guide:
       - Total bookings
       - Total revenue
       - Average rating
       - Response time
       - Acceptance rate
       - Completion rate
     * Rankings:
       - Top guides by bookings
       - Top guides by revenue
       - Top guides by rating
     * Charts:
       - Guide performance comparison
       - Guide registration trend
     * Filters: date range, city, specialization

   - agencies(Request $request)
     * Similar to guides report
     * Agency-specific metrics:
       - Active packages
       - Team size
       - Package bookings
     * Rankings and charts

   - custom(Request $request)
     * Custom report builder
     * Select metrics to include
     * Select dimensions
     * Select filters
     * Generate custom report
     * Save report template

   - export(Request $request)
     * Export report to CSV/Excel/PDF
     * Include current filters
     * Include charts (for PDF)
     * Return download

3. Admin\AnalyticsController methods:
   - realtime()
     * Real-time dashboard
     * Metrics updated every 10 seconds
     * Show:
       - Active users now
       - Bookings today
       - Revenue today
       - New registrations today
       - Recent activities (live feed)
     * Auto-refresh via AJAX

4. Blade Views (resources/views/admin/reports/):
   - index.blade.php (Reports Dashboard)
     * Page header
       - "Reports & Analytics" heading
       - Date range selector
       - Export button

     * Key metrics cards (4-6 cards)
       - Total Revenue (with growth %)
       - Total Bookings (with growth %)
       - Active Users (with growth %)
       - Conversion Rate
       - Average Booking Value
       - Customer Satisfaction (avg rating)

     * Quick report links
       - Revenue Report
       - Booking Analytics
       - User Analytics
       - Guide Performance
       - Agency Performance
       - Custom Reports

     * Charts section (2x2 grid)
       Top Left: Revenue Over Time
       Top Right: Bookings by Status
       Bottom Left: User Growth
       Bottom Right: Top Performers

     * Recent activity feed
       - New registrations
       - Recent bookings
       - Recent payments
       - Real-time updates

   - revenue.blade.php (Revenue Report)
     * Page header
       - "Revenue Report" heading
       - Date range selector
       - Compare to previous period (toggle)
       - Export button

     * Summary cards
       - Total Revenue
       - Revenue Growth
       - Average Transaction
       - Transactions Count

     * Revenue breakdown cards
       - By Source (Bookings, Subscriptions, Boosts, Courses)
       - By Payment Method
       - By Currency

     * Charts
       - Revenue Over Time (line chart with comparison)
       - Revenue by Source (donut chart)
       - Revenue by Day of Week (bar chart)
       - Top Revenue Guides (horizontal bar)
       - Top Revenue Agencies (horizontal bar)

     * Detailed table
       - Date
       - Source
       - Amount
       - Payment Method
       - Status
       - Pagination

   - bookings.blade.php (Booking Analytics)
     * Summary cards
       - Total Bookings
       - Completed
       - Cancelled
       - Completion Rate
       - Cancellation Rate

     * Charts
       - Bookings Over Time
       - Bookings by Status
       - Bookings by Guide/Agency
       - Popular Destinations
       - Peak Hours Heatmap

     * Insights section
       - Most popular booking day
       - Most popular time slot
       - Average booking lead time
       - Busiest guides/agencies

   - users.blade.php (User Analytics)
     * Summary cards
       - Total Users
       - New Users (period)
       - Active Users
       - User Growth Rate

     * Charts
       - User Growth Over Time
       - Users by Role
       - Users by Location (map)
       - User Acquisition Channels
       - User Retention Cohort

     * User demographics table
       - Role breakdown
       - Location breakdown
       - Registration source

   - guides.blade.php (Guide Performance)
     * Filters
       - Date range
       - City
       - Specialization
       - Min rating

     * Top performers section (cards)
       - Top by Bookings (top 5)
       - Top by Revenue (top 5)
       - Top by Rating (top 5)

     * Guide performance table
       - Columns: Name, Bookings, Revenue, Rating, Response Time, Acceptance Rate
       - Sort by any column
       - Pagination

     * Charts
       - Guide registration trend
       - Average performance metrics
       - Performance distribution

   - agencies.blade.php (Agency Performance)
     * Similar to guides report
     * Agency-specific metrics

   - custom.blade.php (Custom Report Builder)
     * Report builder interface

     * Step 1: Select Report Type
       - Revenue
       - Bookings
       - Users
       - Guides
       - Agencies

     * Step 2: Select Metrics
       - Checkboxes for available metrics
       - Depends on report type

     * Step 3: Select Dimensions
       - Group by: Date, Location, Category, etc.

     * Step 4: Apply Filters
       - Date range
       - Status
       - Other relevant filters

     * Step 5: Visualization
       - Chart type selection
       - Table view option

     * Generate Report button
     * Save Template button

     * Results section (after generation)
       - Display chosen metrics
       - Display charts
       - Display data table
       - Export button

   - realtime.blade.php (Real-time Analytics)
     * Big numbers (live updating)
       - Active Users Now
       - Bookings Today
       - Revenue Today
       - Avg Response Time

     * Live activity feed
       - New user registrations
       - New bookings
       - Payments received
       - Reviews posted
       - Scrolling feed, newest first

     * Active users map
       - World map showing active user locations
       - Animated dots for new activities

     * Charts (auto-updating)
       - Bookings per hour (today)
       - Revenue per hour (today)

     * Auto-refresh indicator
       - "Last updated: X seconds ago"
       - Manual refresh button

5. JavaScript:
   - Charts
     * Chart.js integration
     * Interactive tooltips
     * Drill-down functionality
     * Export chart as image

   - Date range picker
     * Preset ranges: Today, Yesterday, Last 7 days, Last 30 days, This Month, Last Month, Custom
     * Update all charts/tables on change

   - Real-time updates
     * AJAX polling every 10 seconds
     * Update numbers with animations
     * Add to activity feed

   - Export functionality
     * Show export modal
     * Select format: CSV, Excel, PDF
     * Generate and download

   - Custom report builder
     * Step-by-step wizard
     * Dynamic form based on selections
     * Preview before generate

6. Report Calculations:
   - Revenue growth:
```php
     $current = Revenue in current period
     $previous = Revenue in previous period (same duration)
     $growth = (($current - $previous) / $previous) * 100
```

   - Completion rate:
```php
     $completed = Completed bookings
     $total = Total bookings
     $rate = ($completed / $total) * 100
```

   - User retention:
```php
     $retained = Users active in both periods
     $total = Total users from first period
     $retention = ($retained / $total) * 100
```

7. Data Aggregation:
   - Use database queries for efficiency
   - Cache results for 15 minutes
   - Use database views for complex queries
   - Aggregate data nightly for historical reports

8. Export Formats:
   - CSV: Simple data export
   - Excel: Formatted with charts
   - PDF: Printable report with logo and charts

   - Use Laravel Excel for CSV/Excel
   - Use DomPDF for PDF generation

9. Performance:
   - Index database columns used in reports
   - Use read replicas for reporting queries
   - Cache expensive calculations
   - Paginate large result sets
   - Queue large exports

10. Scheduled Reports:
    - Admin can schedule reports
    - Frequency: daily, weekly, monthly
    - Email report as PDF
    - Slack notification (optional)

Implement comprehensive analytics with interactive visualizations and export options."


STEP 27: Admin Panel - System Logs & Monitoring
===============================================
Context: Activity logs, error logs, and system monitoring.

Requirements:
- Activity logs (admin actions, user actions)
- Error logs
- Login history
- API usage logs
- System health monitoring
- Log search and filtering

Prompt:
"Create logging and monitoring system for admin panel:

1. Routes (web.php - prefix: /admin, middleware: auth, role:admin):
   - GET /admin/logs/activity - activity logs
   - GET /admin/logs/errors - error logs
   - GET /admin/logs/logins - login history
   - GET /admin/logs/api - API usage logs
   - GET /admin/monitoring - system monitoring dashboard
   - GET /admin/monitoring/health-check - health check endpoint
   - POST /admin/logs/clear - clear old logs

2. Admin\LogController methods:
   - activity(Request $request)
     * Fetch activity logs
     * Filters: user, action type, date range, entity type
     * Show: timestamp, user, action, entity, IP, details
     * Pagination

   - errors(Request $request)
     * Fetch error logs from storage/logs
     * Parse Laravel log files
     * Filters: level (error, warning, info), date range, search
     * Show: timestamp, level, message, stack trace, file, line
     * Pagination

   - logins(Request $request)
     * Fetch login history
     * Filters: user, status (success/failed), date range, IP
     * Show: timestamp, user, IP, device, location, status
     * Detect suspicious activity
     * Pagination

   - api(Request $request)
     * Fetch API request logs
     * Filters: endpoint, method, status code, date range
     * Show: timestamp, endpoint, method, status, response time, IP
     * Statistics: requests per endpoint, average response time
     * Pagination

   - clear(Request $request)
     * Clear logs older than specified days
     * Validate admin confirmation
     * Archive old logs before deletion
     * Return success

3. Admin\MonitoringController methods:
   - index()
     * System monitoring dashboard
     * Show real-time metrics:
       - CPU usage
       - Memory usage
       - Disk space
       - Database connections
       - Queue size
       - Cache hit rate
       - Response times
     * Show alerts if any issues

   - healthCheck()
     * API endpoint for health check
     * Check:
       - Database connection
       - Redis connection
       - Queue workers running
       - Storage writable
       - Critical services accessible
     * Return JSON with status

4. Blade Views (resources/views/admin/logs/):
   - activity.blade.php (Activity Logs)
     * Page header
       - "Activity Logs" heading
       - Clear Old Logs button
       - Export button

     * Filters
       - User search/select
       - Action type (dropdown)
         * User Created
         * User Updated
         * User Deleted
         * Booking Created
         * Payment Processed
         * Settings Changed
         * etc.
       - Entity type (User, Booking, Payment, etc.)
       - Date range picker
       - Apply/Clear buttons

     * Activity log table
       - Columns:
         * Timestamp
         * User (avatar + name, link to user)
         * Action (badge with color)
         * Entity (type + ID, link if applicable)
         * IP Address
         * Details (expandable)
       - Click row to expand details
       - Show before/after values for updates
       - Pagination

     * Summary statistics
       - Total activities (period)
       - Most active users
       - Most common actions

   - errors.blade.php (Error Logs)
     * Page header
       - "Error Logs" heading
       - Refresh button
       - Clear Logs button

     * Error level filter
       - All
       - Critical
       - Error
       - Warning
       - Info
       - Debug

     * Date range filter
     * Search box (search in message)

     * Error log cards (list view)
       Each card:
       - Level badge (color-coded)
       - Timestamp
       - Error message
       - File and line number
       - Expand button for stack trace
       - Stack trace (collapsible)
       - Context data (if available)

     * Pagination

     * Error statistics
       - Errors by level (pie chart)
       - Errors over time (line chart)
       - Most common errors

   - logins.blade.php (Login History)
     * Page header
       - "Login History" heading
       - Export button

     * Filters
       - User search
       - Status (All, Success, Failed)
       - Date range
       - IP address filter
       - Apply/Clear buttons

     * Login history table
       - Columns:
         * Timestamp
         * User (avatar + name)
         * IP Address (with location icon)
         * Device (browser + OS)
         * Location (city, country with flag)
         * Status (badge: success green, failed red)
       - Failed login highlighted
       - Pagination

     * Suspicious activity alerts
       - Multiple failed logins
       - Logins from unusual locations
       - Simultaneous logins from different IPs

     * Statistics
       - Total logins (period)
       - Unique users
       - Failed login rate
       - Login locations map

   - api.blade.php (API Usage Logs)
     * Page header
       - "API Usage" heading
       - Export button

     * Filters
       - Endpoint (dropdown or search)
       - HTTP Method (GET, POST, PUT, DELETE)
       - Status Code (200, 400, 404, 500, etc.)
       - Date range
       - Apply/Clear buttons

     * API log table
       - Columns:
         * Timestamp
         * Endpoint
         * Method (badge)
         * Status Code (color-coded)
         * Response Time (ms)
         * IP Address
         * User (if authenticated)
       - Pagination

     * API statistics
       - Total requests (period)
       - Requests per endpoint (bar chart)
       - Average response time
       - Error rate
       - Slowest endpoints
       - Most used endpoints

   - monitoring/index.blade.php (System Monitoring)
     * Page header
       - "System Monitoring" heading
       - Health Status badge (Healthy/Warning/Critical)
       - Refresh button
       - Auto-refresh toggle

     * Server metrics (cards, 2x2 grid)
       Card 1: CPU Usage
       - Percentage (large number)
       - Gauge chart
       - Current/Max
       - Alert if >80%

       Card 2: Memory Usage
       - Used / Total
       - Percentage
       - Bar chart
       - Alert if >80%

       Card 3: Disk Space
       - Used / Total
       - Percentage
       - Bar chart per disk
       - Alert if >85%

       Card 4: Database
       - Connection count
       - Active queries
       - Slow query count
       - Database size

     * Application metrics (cards)
       - Active Users (now)
       - Queue Jobs (pending/failed)
       - Cache Hit Rate
       - Average Response Time
       - Scheduled Tasks Status

     * Services status (list)
       - Database (online/offline)
       - Redis (online/offline)
       - Queue Workers (running/stopped)
       - Storage (writable/read-only)
       - Mail Service (working/failed)
       - Payment Gateway (connected/disconnected)

     * Charts
       - Response Times (last 24h)
       - Memory Usage (last 24h)
       - Queue Jobs (last 24h)

     * Recent errors (last 10)
       - Error message
       - Timestamp
       - View details link

     * Alerts section
       - Show active alerts
       - Color-coded by severity
       - Dismiss button

5. Activity Logging:
   - Log important admin actions:
```php
     activity()
         ->causedBy(auth()->user())
         ->performedOn($model)
         ->withProperties(['old' => $old, 'new' => $new])
         ->log('User updated');
```

   - Use Spatie Laravel Activity Log package
   - Store in activity_log table
   - Log:
     * Who performed action
     * What action was performed
     * On which entity
     * When it happened
     * From which IP
     * What changed (before/after)

6. Error Logging:
   - Laravel logs to storage/logs/laravel.log
   - Parse log file to display in UI
   - Use LogViewer package or custom parser
   - Rotate logs daily
   - Archive old logs
   - Send critical errors to Slack/email

7. Login History:
   - Create login_history table:
```php
     Schema::create('login_history', function (Blueprint $table) {
         $table->id();
         $table->foreignId('user_id')->constrained();
         $table->string('ip_address');
         $table->string('user_agent');
         $table->string('device')->nullable();
         $table->string('browser')->nullable();
         $table->string('os')->nullable();
         $table->string('location')->nullable(); // city, country
         $table->boolean('success')->default(true);
         $table->string('failure_reason')->nullable();
         $table->timestamp('logged_in_at');
     });
```

   - Log every login attempt (success and failure)
   - Detect device, browser, OS
   - Geolocate IP address
   - Alert on suspicious activity

8. API Usage Logging:
   - Create api_logs table:
```php
     Schema::create('api_logs', function (Blueprint $table) {
         $table->id();
         $table->string('endpoint');
         $table->string('method'); // GET, POST, etc.
         $table->integer('status_code');
         $table->integer('response_time'); // milliseconds
         $table->string('ip_address');
         $table->foreignId('user_id')->nullable()->constrained();
         $table->text('request_body')->nullable();
         $table->text('response_body')->nullable();
         $table->timestamp('created_at');
     });
```

   - Log via middleware
   - Don't log request/response bodies for large payloads
   - Rotate logs weekly

9. System Monitoring:
   - Use server monitoring tools:
     * CPU: `sys_getloadavg()`
     * Memory: `memory_get_usage()`
     * Disk: `disk_free_space()`, `disk_total_space()`

   - Database monitoring:
     * Connection count: `SHOW STATUS LIKE 'Threads_connected'`
     * Slow queries: `SHOW FULL PROCESSLIST`

   - Queue monitoring:
     * Pending jobs: `Queue::size()`
     * Failed jobs: count in failed_jobs table

   - Cache monitoring:
     * Hit rate from Redis stats

   - Health check endpoint returns:
```json
     {
       "status": "healthy",
       "checks": {
         "database": "ok",
         "redis": "ok",
         "storage": "ok",
         "queue": "ok"
       },
       "timestamp": "2023-..."
     }
```

10. JavaScript:
    - Auto-refresh monitoring dashboard
      * Poll every 30 seconds
      * Update metrics without page reload

    - Real-time log streaming (optional)
      * WebSocket connection
      * Stream new logs as they happen

    - Chart updates
      * Update charts with new data
      * Smooth animations

    - Expandable log details
      * Click to expand
      * Syntax highlighting for stack traces

11. Alerting:
    - Set thresholds for alerts:
      * CPU > 80%
      * Memory > 80%
      * Disk > 85%
      * Queue > 1000 pending
      * Error rate > 5%

    - Send alerts via:
      * Email to admin
      * Slack notification
      * SMS (optional)

    - Alert resolution tracking

12. Log Rotation:
    - Rotate logs daily
    - Compress old logs
    - Delete logs older than 30 days
    - Archive critical logs

13. Performance:
    - Index log tables
    - Partition large log tables by date
    - Async log writing
    - Don't log sensitive data

Implement comprehensive logging for audit and troubleshooting purposes."


STEP 28: Email Templates
========================
Context: Design and manage all email templates used by the platform.

Requirements:
- Welcome emails
- Verification emails
- Booking confirmations
- Payment receipts
- Notifications
- Transactional emails
- Newsletter templates

Prompt:
"Create comprehensive email template system for AroundUz:

1. Email Template Design:
   - Use responsive HTML email templates
   - Consistent branding (colors, logo, fonts)
   - Mobile-friendly design
   - Plain text alternative
   - Unsubscribe link
   - Footer with company info

2. Email Types to Create:

   A. Authentication & Account:
   - WelcomeEmail
   - EmailVerification
   - PasswordReset
   - AccountActivated
   - AccountSuspended
   - TwoFactorCode

   B. Bookings:
   - BookingCreated (to user)
   - BookingReceived (to guide/agency)
   - BookingConfirmed
   - BookingReminder (24h before)
   - BookingCompleted
   - BookingCancelled
   - BookingRejected

   C. Payments:
   - PaymentReceived
   - PaymentFailed
   - RefundProcessed
   - InvoiceGenerated

   D. Reviews:
   - ReviewRequestEmail (after completed booking)
   - NewReviewReceived (to guide/agency)
   - ReviewResponseReceived (to reviewer)

   E. Subscriptions:
   - SubscriptionPurchased
   - SubscriptionExpiring (3 days before)
   - SubscriptionExpired
   - SubscriptionCancelled
   - SubscriptionRenewed

   F. Profile Boosts:
   - BoostActivated
   - BoostExpiring (3 days before)
   - BoostExpired

   G. Courses:
   - CourseEnrolled
   - CourseCompleted
   - CertificateIssued
   - CourseReminder

   H. Verification:
   - GuideVerificationApproved
   - GuideVerificationRejected
   - AgencyVerificationApproved
   - AgencyVerificationRejected
   - CertificationApproved
   - CertificationRejected

   I. Messages:
   - NewMessageReceived
   - MessageDigest (daily summary)

   J. System:
   - MaintenanceNotification
   - PasswordChanged
   - EmailChanged
   - SystemAnnouncement

   K. Marketing:
   - NewsletterTemplate
   - PromotionalEmail
   - NewFeatureAnnouncement
   - ReEngagementEmail (inactive users)

3. Laravel Mailable Structure:
```php
   namespace App\Mail;

   use Illuminate\Mail\Mailable;
   use Illuminate\Mail\Mailables\Content;
   use Illuminate\Mail\Mailables\Envelope;

   class BookingConfirmed extends Mailable
   {
       public function __construct(
           public Booking $booking
       ) {}

       public function envelope(): Envelope
       {
           return new Envelope(
               subject: 'Booking Confirmed - ' . $this->booking->reference,
           );
       }

       public function content(): Content
       {
           return new Content(
               view: 'emails.bookings.confirmed',
               text: 'emails.bookings.confirmed-text',
           );
       }

       public function attachments(): array
       {
           return [
               // Invoice PDF
           ];
       }
   }
```

4. Blade Email Templates:
   Base layout: resources/views/emails/layout.blade.php
```blade
   <!DOCTYPE html>
   <html>
   <head>
       <meta charset="utf-8">
       <meta name="viewport" content="width=device-width, initial-scale=1.0">
       <title>@yield('title')</title>
       <style>
           /* Inline CSS for email clients */
           body { font-family: Arial, sans-serif; }
           .container { max-width: 600px; margin: 0 auto; }
           .header { background-color: #0EA5E9; padding: 20px; text-align: center; }
           .content { padding: 30px; }
           .button { background-color: #0EA5E9; color: white; padding: 12px 30px; text-decoration: none; border-radius: 5px; display: inline-block; }
           .footer { background-color: #f3f4f6; padding: 20px; text-align: center; font-size: 12px; color: #6b7280; }
       </style>
   </head>
   <body>
       <div class="container">
           <div class="header">
               <img src="{{ asset('images/logo.png') }}" alt="AroundUz" height="40">
           </div>

           <div class="content">
               @yield('content')
           </div>

           <div class="footer">
               <p>Â© {{ date('Y') }} AroundUz. All rights reserved.</p>
               <p>
                   <a href="{{ route('terms') }}">Terms</a> |
                   <a href="{{ route('privacy') }}">Privacy</a> |
                   <a href="{{ route('contact') }}">Contact</a>
               </p>
               <p>
                   <a href="{{ $unsubscribeUrl ?? '#' }}">Unsubscribe</a>
               </p>
           </div>
       </div>
   </body>
   </html>
```

5. Example Email Templates:

   A. Welcome Email (resources/views/emails/auth/welcome.blade.php):
```blade
   @extends('emails.layout')

   @section('title', 'Welcome to AroundUz!')

   @section('content')
       <h2>Welcome to AroundUz, {{ $user->name }}!</h2>

       <p>We're thrilled to have you join our community of travelers and local guides.</p>

       <p>Here's what you can do now:</p>
       <ul>
           <li>Browse local guides in Uzbekistan</li>
           <li>Book authentic experiences</li>
           <li>Connect with travel agencies</li>
           <li>Explore destinations</li>
       </ul>

       <p style="text-align: center; margin: 30px 0;">
           <a href="{{ route('guides.index') }}" class="button">Start Exploring</a>
       </p>

       <p>If you have any questions, feel free to reach out to our support team.</p>

       <p>Happy travels!<br>The AroundUz Team</p>
   @endsection
```

   B. Booking Confirmation (resources/views/emails/bookings/confirmed.blade.php):
```blade
   @extends('emails.layout')

   @section('title', 'Booking Confirmed')

   @section('content')
       <h2>Your Booking is Confirmed!</h2>

       <p>Hi {{ $booking->user->name }},</p>

       <p>Great news! Your booking has been confirmed.</p>

       <div style="background-color: #f3f4f6; padding: 20px; border-radius: 8px; margin: 20px 0;">
           <h3 style="margin-top: 0;">Booking Details</h3>
           <p><strong>Reference:</strong> {{ $booking->reference }}</p>
           <p><strong>Guide:</strong> {{ $booking->guide->name }}</p>
           <p><strong>Date:</strong> {{ $booking->date->format('F j, Y') }}</p>
           <p><strong>Time:</strong> {{ $booking->time }}</p>
           <p><strong>Duration:</strong> {{ $booking->duration }} hours</p>
           <p><strong>Total Amount:</strong> ${{ number_format($booking->amount, 2) }}</p>
       </div>

       <p><strong>What's Next?</strong></p>
       <ul>
           <li>Your guide will contact you 24 hours before the tour</li>
           <li>Make sure to arrive at the meeting point on time</li>
           <li>Bring any special items mentioned in the itinerary</li>
       </ul>

       <p style="text-align: center; margin: 30px 0;">
           <a href="{{ route('bookings.show', $booking) }}" class="button">View Booking</a>
       </p>

       <p>Looking forward to your amazing experience!</p>
   @endsection
```

   C. Payment Receipt (resources/views/emails/payments/receipt.blade.php):
```blade
   @extends('emails.layout')

   @section('title', 'Payment Receipt')

   @section('content')
       <h2>Payment Received</h2>

       <p>Hi {{ $payment->user->name }},</p>

       <p>Thank you for your payment. Here are the details:</p>

       <div style="background-color: #f3f4f6; padding: 20px; border-radius: 8px; margin: 20px 0;">
           <h3 style="margin-top: 0;">Payment Details</h3>
           <p><strong>Transaction ID:</strong> {{ $payment->transaction_id }}</p>
           <p><strong>Amount:</strong> ${{ number_format($payment->amount, 2) }}</p>
           <p><strong>Payment Method:</strong> {{ ucfirst($payment->payment_method) }}</p>
           <p><strong>Date:</strong> {{ $payment->created_at->format('F j, Y g:i A') }}</p>
           <p><strong>For:</strong> {{ $payment->description }}</p>
       </div>

       <p style="text-align: center; margin: 30px 0;">
           <a href="{{ route('payments.invoice', $payment) }}" class="button">Download Invoice</a>
       </p>

       <p>If you have any questions about this payment, please contact our support team.</p>
   @endsection
```

6. Plain Text Versions:
   - Create .txt version of each email
   - Example: emails/bookings/confirmed-text.blade.php
Booking Confirmed
Hi {{ $booking->user->name }},
Your booking has been confirmed!
Booking Details:
Reference: {{ $booking->reference }}
Guide: {{ $booking->guide->name }}
Date: {{ $booking->date->format('F j, Y') }}
Time: {{ $booking->time }}
View your booking: {{ route('bookings.show', $booking) }}
Thanks,
AroundUz Team

7. Email Sending:
   - Send via queue for better performance
```php
   Mail::to($user)->queue(new WelcomeEmail($user));
```

   - Use rate limiting for bulk emails
   - Handle failed emails gracefully
   - Log email sending

8. Email Testing:
   - Use Mailtrap for development
   - Use MailHog locally
   - Preview emails in browser
   - Test in multiple email clients
   - Test responsive design

9. Customization:
   - Allow admin to customize email templates
   - Store custom templates in database
   - Use placeholders: {{user_name}}, {{booking_ref}}, etc.
   - Preview before sending
   - Test send to admin email

10. Unsubscribe Handling:
    - Add unsubscribe link to all marketing emails
    - Create unsubscribe table
    - Respect unsubscribe preferences
    - Don't send transactional emails to unsubscribed users for marketing

11. Email Analytics:
    - Track email opens (pixel tracking)
    - Track link clicks
    - Track bounces
    - Track spam complaints
    - Use service like SendGrid, Mailgun, or AWS SES

12. Localization:
    - Support multiple languages
    - Use Laravel translations
    - Detect user's preferred language
    - Send emails in user's language

Ensure all emails are professional, clear, and mobile-responsive."


STEP 29: Testing & Quality Assurance
====================================
Context: Comprehensive testing strategy for the entire platform.

Requirements:
- Unit tests
- Feature tests
- Browser tests
- API tests
- Performance testing
- Security testing

Prompt:
"Create comprehensive testing suite for AroundUz:

1. Testing Setup:
   - Use PHPUnit for backend tests
   - Use Laravel Dusk for browser tests
   - Use Jest for JavaScript tests
   - Set up CI/CD pipeline (GitHub Actions)
   - Database seeding for tests
   - Test database separate from development

2. Unit Tests:
   Test individual functions and methods

   A. Model Tests (tests/Unit/Models/):
   - UserTest.php
   - GuideTest.php
   - BookingTest.php
   - PaymentTest.php
   - Test relationships
   - Test accessors and mutators
   - Test scopes

   B. Service Tests (tests/Unit/Services/):
   - PaymentServiceTest.php
   - BookingServiceTest.php
   - NotificationServiceTest.php
   - Test business logic
   - Mock external dependencies

   C. Helper Tests (tests/Unit/Helpers/):
   - Test custom helper functions
   - Test utility classes

3. Feature Tests:
   Test complete features and workflows

   A. Authentication Tests (tests/Feature/Auth/):
   - RegistrationTest.php
     * Test user registration
     * Test validation
     * Test email verification

   - LoginTest.php
     * Test successful login
     * Test failed login
     * Test account lockout after failed attempts

   - PasswordResetTest.php
     * Test password reset flow
     * Test password reset link
     * Test password update

   B. Booking Tests (tests/Feature/Bookings/):
   - CreateBookingTest.php
     * Test booking creation
     * Test validation
     * Test availability check
     * Test payment processing

   - ManageBookingTest.php
     * Test view booking
     * Test cancel booking
     * Test refund processing

   - BookingNotificationsTest.php
     * Test notification sending
     * Test email queue

   C. Payment Tests (tests/Feature/Payments/):
   - StripePaymentTest.php
     * Test Stripe integration
     * Test payment success
     * Test payment failure
     * Test refund

   - PayPalPaymentTest.php
     * Test PayPal integration
     * Test order creation
     * Test order capture

   D. Review Tests (tests/Feature/Reviews/):
   - CreateReviewTest.php
     * Test review submission
     * Test validation
     * Test photo upload

   - ManageReviewTest.php
     * Test edit review
     * Test delete review
     * Test review moderation

   E. Subscription Tests (tests/Feature/Subscriptions/):
   - PurchaseSubscriptionTest.php
   - ManageSubscriptionTest.php
   - ViewTrackingTest.php

   F. Admin Tests (tests/Feature/Admin/):
   - UserManagementTest.php
   - GuideVerificationTest.php
   - BookingManagementTest.php
   - SettingsTest.php

4. Browser Tests (Laravel Dusk):
   Test user interactions in real browser

   A. User Journey Tests (tests/Browser/):
   - RegistrationJourneyTest.php
```php
     public function testUserCanRegister()
     {
         $this->browse(function (Browser $browser) {
             $browser->visit('/register')
                     ->type('name', 'John Doe')
                     ->type('email', 'john@example.com')
                     ->type('password', 'password123')
                     ->type('password_confirmation', 'password123')
                     ->press('Register')
                     ->assertPathIs('/verify-email');
         });
     }
```

   - BookingJourneyTest.php
     * Search for guide
     * View guide profile
     * Select itinerary
     * Fill booking form
     * Complete payment
     * Verify confirmation

   - GuideProfileTest.php
     * Login as guide
     * Complete profile
     * Upload certification
     * Create itinerary
     * Receive booking

   B. Admin Tests:
   - AdminDashboardTest.php
   - GuideVerificationTest.php
   - ContentManagementTest.php

5. API Tests:
   Test API endpoints

   A. API Authentication Tests:
   - Test API token generation
   - Test authenticated requests
   - Test unauthorized requests

   B. API Resource Tests:
   - Test CRUD operations
   - Test pagination
   - Test filtering
   - Test sorting
   - Test validation

   C. API Rate Limiting Tests:
   - Test rate limit enforcement
   - Test rate limit headers

6. Performance Tests:
   Test application performance

   A. Load Testing:
   - Use Apache JMeter or Locust
   - Test concurrent users
   - Test response times
   - Test database queries

   B. Database Query Tests:
   - Test N+1 query problems
   - Test slow queries
   - Use Laravel Debugbar
   - Use Telescope

   C. Page Load Tests:
   - Test page load times
   - Test asset loading
   - Test caching effectiveness

7. Security Tests:
   Test security vulnerabilities

   A. XSS Tests:
   - Test input sanitization
   - Test output escaping

   B. CSRF Tests:
   - Test CSRF token validation
   - Test CSRF protection

   C. SQL Injection Tests:
   - Test parameterized queries
   - Test input validation

   D. Authentication Tests:
   - Test password hashing
   - Test session security
   - Test API token security

   E. Authorization Tests:
   - Test role-based access
   - Test permission checks
   - Test unauthorized access attempts

8. Test Data:
   Create factories and seeders for testing

   A. Factories (database/factories/):
   - UserFactory
   - GuideFactory
   - BookingFactory
   - ReviewFactory
   - PaymentFactory

   B. Seeders for Testing:
   - TestDatabaseSeeder
   - Seed realistic test data
   - Seed edge cases

9. Continuous Integration:
   Set up GitHub Actions workflow

   .github/workflows/tests.yml:
```yaml
   name: Tests

   on: [push, pull_request]

   jobs:
     tests:
       runs-on: ubuntu-latest

       services:
         mysql:
           image: mysql:8.0
           env:
             MYSQL_DATABASE: testing
             MYSQL_ROOT_PASSWORD: password

         redis:
           image: redis:alpine

       steps:
         - uses: actions/checkout@v2

         - name: Setup PHP
           uses: shivammathur/setup-php@v2
           with:
             php-version: 8.2
             extensions: mbstring, pdo, pdo_mysql, redis

         - name: Install Dependencies
           run: composer install

         - name: Copy .env
           run: cp .env.testing .env

         - name: Generate Key
           run: php artisan key:generate

         - name: Run Migrations
           run: php artisan migrate

         - name: Run Tests
           run: php artisan test

         - name: Run Dusk Tests
           run: php artisan dusk
```

10. Code Coverage:
    - Generate code coverage reports
    - Use PHPUnit coverage
    - Aim for >80% coverage
    - Use tools like Codecov

11. Test Best Practices:
    - Write tests before fixing bugs (TDD)
    - Test one thing per test
    - Use descriptive test names
    - Arrange-Act-Assert pattern
    - Mock external dependencies
    - Use database transactions
    - Clean up after tests

12. Manual Testing Checklist:
    - Test on multiple browsers (Chrome, Firefox, Safari, Edge)
    - Test on mobile devices (iOS, Android)
    - Test different screen sizes
    - Test slow network conditions
    - Test with screen readers (accessibility)
    - Test all user roles
    - Test edge cases
    - Test error scenarios

Implement comprehensive testing to ensure platform quality and reliability."


STEP 30: Deployment Preparation
===============================
Context: Prepare application for production deployment.

Requirements:
- Environment configuration
- Database optimization
- Security hardening
- Performance optimization
- Monitoring setup
- Backup strategy

Prompt:
"Prepare AroundUz for production deployment:

1. Environment Configuration:
   A. Production .env file:
```env
   APP_NAME=AroundUz
   APP_ENV=production
   APP_KEY=[generate with php artisan key:generate]
   APP_DEBUG=false
   APP_URL=https://arounduz.com

   DB_CONNECTION=mysql
   DB_HOST=your-database-host
   DB_PORT=3306
   DB_DATABASE=arounduz_production
   DB_USERNAME=arounduz_user
   DB_PASSWORD=[strong-password]

   REDIS_HOST=your-redis-host
   REDIS_PASSWORD=[redis-password]

   MAIL_MAILER=smtp
   MAIL_HOST=smtp.mailtrap.io
   MAIL_PORT=2525
   MAIL_USERNAME=[your-username]
   MAIL_PASSWORD=[your-password]
   MAIL_FROM_ADDRESS=hello@arounduz.com
   MAIL_FROM_NAME="${APP_NAME}"

   STRIPE_KEY=[live-publishable-key]
   STRIPE_SECRET=[live-secret-key]
   STRIPE_WEBHOOK_SECRET=[webhook-secret]

   PAYPAL_MODE=live
   PAYPAL_CLIENT_ID=[live-client-id]
   PAYPAL_SECRET=[live-secret]

   PUSHER_APP_ID=[your-app-id]
   PUSHER_APP_KEY=[your-app-key]
   PUSHER_APP_SECRET=[your-app-secret]
   PUSHER_APP_CLUSTER=[your-cluster]

   AWS_ACCESS_KEY_ID=[your-key]
   AWS_SECRET_ACCESS_KEY=[your-secret]
   AWS_DEFAULT_REGION=us-east-1
   AWS_BUCKET=arounduz-uploads

   GOOGLE_MAPS_API_KEY=[your-api-key]
```

   B. Optimize configuration:
```bash
   php artisan config:cache
   php artisan route:cache
   php artisan view:cache
```

2. Database Optimization:
   A. Add indexes:
```php
   // Migration: add_indexes_for_performance
   Schema::table('bookings', function (Blueprint $table) {
       $table->index(['user_id', 'status']);
       $table->index('created_at');
   });

   Schema::table('guides', function (Blueprint $table) {
       $table->index(['city_id', 'verified']);
       $table->index('rating');
   });

   // Add indexes to all frequently queried columns
```

   B. Optimize queries:
   - Use eager loading
   - Avoid N+1 queries
   - Use query optimization
   - Add database views for complex reports

   C. Database maintenance:
```sql
   -- Optimize tables
   OPTIMIZE TABLE bookings, guides, agencies, users;

   -- Analyze tables
   ANALYZE TABLE bookings, guides, agencies, users;
```

3. Security Hardening:
   A. HTTPS Setup:
   - Install SSL certificate (Let's Encrypt)
   - Force HTTPS in .htaccess
   - Update APP_URL to https

   B. Security headers:
```php
   // Add to Kernel middleware
   public function handle($request, Closure $next)
   {
       $response = $next($request);

       $response->headers->set('X-Frame-Options', 'SAMEORIGIN');
       $response->headers->set('X-Content-Type-Options', 'nosniff');
       $response->headers->set('X-XSS-Protection', '1; mode=block');
       $response->headers->set('Strict-Transport-Security', 'max-age=31536000; includeSubDomains');

       return $response;
   }
```

   C. File permissions:
```bash
   chmod -R 755 storage bootstrap/cache
   chown -R www-data:www-data storage bootstrap/cache
```

   D. Hide sensitive information:
   - Disable directory listing
   - Remove phpinfo pages
   - Hide Laravel version
   - Disable debug mode

4. Performance Optimization:
   A. Enable caching:
```php
   // Cache config
   'cache' => [
       'default' => env('CACHE_DRIVER', 'redis'),
   ],

   // Cache queries
   $guides = Cache::remember('featured_guides', 3600, function () {
       return Guide::featured()->limit(6)->get();
   });
```

   B. Asset optimization:
   - Minify CSS and JS
   - Combine assets
   - Use CDN for static assets
   - Enable Gzip compression
   - Optimize images (compress, WebP format)

   C. Database connection pooling

   D. Enable OPcache:
```ini
   opcache.enable=1
   opcache.memory_consumption=256
   opcache.max_accelerated_files=10000
   opcache.revalidate_freq=0
```

   E. Queue workers:
```bash
   # Supervisor config for queue workers
   [program:arounduz-worker]
   process_name=%(program_name)s_%(process_num)02d
   command=php /path/to/artisan queue:work redis --sleep=3 --tries=3 --max-time=3600
   autostart=true
   autorestart=true
   user=www-data
   numprocs=4
   redirect_stderr=true
   stdout_logfile=/path/to/worker.log
```

5. Monitoring Setup:
   A. Application Monitoring:
   - Install Laravel Telescope (remove in production or protect)
   - Set up Sentry for error tracking
   - Set up New Relic or DataDog for APM

   B. Server Monitoring:
   - Set up Uptime monitoring (Pingdom, UptimeRobot)
   - Monitor server resources (CPU, memory, disk)
   - Set up alerts for critical issues

   C. Log Management:
   - Centralize logs (Papertrail, Loggly)
   - Set log rotation
   - Monitor error rates

6. Backup Strategy:
   A. Database Backups:
```bash
   # Daily backup script
   #!/bin/bash
   DATE=$(date +%Y%m%d_%H%M%S)
   mysqldump -u username -p password arounduz_production > /backups/db_$DATE.sql
   gzip /backups/db_$DATE.sql

   # Keep only last 30 days
   find /backups -name "db_*.sql.gz" -mtime +30 -delete
```

   - Schedule via cron
   - Store offsite (AWS S3, Dropbox)
   - Test restore regularly

   B. File Backups:
   - Backup uploaded files
   - Backup code repository
   - Use rsync or cloud storage

   C. Automated Backups:
```bash
   # Crontab
   0 2 * * * /path/to/backup-script.sh
```

7. Server Configuration:
   A. Web Server (Nginx):
```nginx
   server {
       listen 80;
       server_name arounduz.com www.arounduz.com;
       return 301 https://arounduz.com$request_uri;
   }

   server {
       listen 443 ssl http2;
       server_name arounduz.com;
       root /var/www/arounduz/public;

       ssl_certificate /etc/letsencrypt/live/arounduz.com/fullchain.pem;
       ssl_certificate_key /etc/letsencrypt/live/arounduz.com/privkey.pem;

       add_header X-Frame-Options "SAMEORIGIN";
       add_header X-Content-Type-Options "nosniff";

       index index.php index.html index.htm;

       location / {
           try_files $uri $uri/ /index.php?$query_string;
       }

       location ~ \.php$ {
           fastcgi_pass unix:/var/run/php/php8.2-fpm.sock;
           fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name;
           include fastcgi_params;
       }

       location ~ /\.(?!well-known).* {
           deny all;
       }
   }
```

   B. PHP-FPM Configuration:
```ini
   pm = dynamic
   pm.max_children = 50
   pm.start_servers = 10
   pm.min_spare_servers = 5
   pm.max_spare_servers = 20
   pm.max_requests = 500
```

   C. MySQL Configuration:
```ini
   innodb_buffer_pool_size = 1G
   max_connections = 200
   query_cache_size = 64M
   tmp_table_size = 64M
   max_heap_table_size = 64M
```

8. Deployment Checklist:
   - [ ] Update .env for production
   - [ ] Run migrations on production database
   - [ ] Seed production data
   - [ ] Generate application key
   - [ ] Cache config, routes, views
   - [ ] Set proper file permissions
   - [ ] Configure web server
   - [ ] Install SSL certificate
   - [ ] Set up queue workers
   - [ ] Set up scheduled tasks (cron)
   - [ ] Configure email service
   - [ ] Test payment gateways (Stripe, PayPal)
   - [ ] Set up monitoring
   - [ ] Configure backups
   - [ ] Test all major features
   - [ ] Load test the application
   - [ ] Set up CDN for assets
   - [ ] Configure DNS
   - [ ] Create error pages (404, 500)
   - [ ] Set up logging
   - [ ] Document deployment process

9. Post-Deployment:
   - Monitor error logs
   - Check performance metrics
   - Verify backups working
   - Test critical features
   - Monitor user feedback
   - Set up alerts
   - Plan regular maintenance

Ensure thorough testing before going live!"


STEP 31: Launch & Go-Live
=========================
Context: Final steps to launch AroundUz to production.

Prompt:
"Final launch steps for AroundUz:

1. Pre-Launch Checklist:
   - [ ] All features tested and working
   - [ ] All bugs fixed
   - [ ] Database optimized
   - [ ] Security audited
   - [ ] Performance tested
   - [ ] Backups configured and tested
   - [ ] Monitoring tools active
   - [ ] SSL certificate installed
   - [ ] Email service configured
   - [ ] Payment gateways tested (real transactions)
   - [ ] Content reviewed (typos, images, links)
   - [ ] Legal pages complete (Terms, Privacy)
   - [ ] Contact information updated
   - [ ] Social media accounts created
   - [ ] Google Analytics installed
   - [ ] SEO optimized
   - [ ] Sitemap submitted to search engines
   - [ ] Robots.txt configured
   - [ ] Favicon and meta tags set

2. Launch Day Tasks:
   A. Deploy to production server
   B. Point DNS to production server
   C. Test all major features
   D. Monitor error logs closely
   E. Be ready for hotfixes
   F. Announce launch on social media
   G. Send launch email to beta users
   H. Press release (if applicable)
   I. Monitor server performance
   J. Monitor user feedback

3. Post-Launch (Week 1):
   - Monitor daily active users
   - Fix critical bugs immediately
   - Respond to user feedback
   - Monitor server resources
   - Check backup integrity
   - Review analytics
   - Adjust marketing strategy
   - Plan next features

4. Marketing Launch:
   - Social media campaign
   - Email marketing to collected leads
   - Content marketing (blog posts)
   - SEO optimization
   - Paid advertising (Google Ads, Facebook Ads)
   - Partnerships with tourism boards
   - Press outreach
   - Influencer partnerships

5. Success Metrics to Track:
   - User registrations
   - Guide/Agency signups
   - Bookings completed
   - Revenue generated
   - Website traffic
   - Conversion rates
   - User retention
   - Customer satisfaction
   - Page load times
   - Error rates

Congratulations on launching AroundUz!"


STEP 32: Post-Launch Maintenance & Growth
=========================================
Context: Ongoing maintenance and feature development.

Prompt:
"Post-launch strategy for AroundUz:

1. Regular Maintenance:
   - Weekly: Review error logs, update content
   - Monthly: Security updates, dependency updates, performance review
   - Quarterly: Feature releases, major updates
   - Yearly: Server upgrades, architecture review

2. Feature Roadmap:
   Phase 1 (Months 1-3):
   - Mobile app (iOS and Android)
   - Advanced search filters
   - Virtual tour preview
   - Live chat support
   - Multi-currency support

   Phase 2 (Months 4-6):
   - AI-powered recommendations
   - Group booking discounts
   - Loyalty program
   - Referral system
   - API for third-party integrations

   Phase 3 (Months 7-12):
   - Video calling for consultations
   - Augmented reality features
   - Blockchain-based reviews
   - International expansion
   - White-label solution for other destinations

3. Growth Strategies:
   - SEO content marketing
   - Social media marketing
   - Influencer partnerships
   - Travel blogger collaborations
   - Tourism board partnerships
   - Trade shows and exhibitions
   - Email marketing campaigns
   - Retargeting campaigns

4. User Acquisition:
   - Referral bonuses
   - First booking discounts
   - Seasonal promotions
   - Partner with hotels and airlines
   - Content marketing (destination guides)
   - Video marketing (YouTube)
   - Podcast sponsorships

5. Community Building:
   - User forum
   - Travel tips blog
   - Photo sharing contest
   - Guide spotlight feature
   - User success stories
   - Newsletter

6. Analytics & Optimization:
   - A/B testing landing pages
   - Conversion rate optimization
   - User behavior analysis
   - Funnel optimization
   - Cohort analysis
   - Retention strategies

7. Customer Support:
   - 24/7 live chat
   - Help center with FAQs
   - Video tutorials
   - Email support
   - Phone support (premium)
   - Multilingual support

8. Platform Improvements:
   - Regular user surveys
   - Feature requests tracking
   - Bug bounty program
   - Beta testing program
   - User feedback implementation
